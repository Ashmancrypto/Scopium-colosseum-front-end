import{r as Pt,a as en,s as Sl,g as Vt,b as Al,e as Rl,c as Il,B as He,P as oo}from"./index-CLtJHQFY.js";function fr(e){"@babel/helpers - typeof";return fr=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},fr(e)}function Tl(e,t){if(fr(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(fr(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function Ol(e){var t=Tl(e,"string");return fr(t)=="symbol"?t:t+""}function G(e,t,r){return(t=Ol(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function so(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),r.push.apply(r,n)}return r}function De(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?so(Object(r),!0).forEach(function(n){G(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):so(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}var Rs={exports:{}},$n={exports:{}};let Cl=class extends Error{constructor(t){if(!Array.isArray(t))throw new TypeError(`Expected input to be an Array, got ${typeof t}`);let r="";for(let n=0;n<t.length;n++)r+=`    ${t[n].stack}
`;super(r),this.name="AggregateError",this.errors=t}};var he={AggregateError:Cl,ArrayIsArray(e){return Array.isArray(e)},ArrayPrototypeIncludes(e,t){return e.includes(t)},ArrayPrototypeIndexOf(e,t){return e.indexOf(t)},ArrayPrototypeJoin(e,t){return e.join(t)},ArrayPrototypeMap(e,t){return e.map(t)},ArrayPrototypePop(e,t){return e.pop(t)},ArrayPrototypePush(e,t){return e.push(t)},ArrayPrototypeSlice(e,t,r){return e.slice(t,r)},Error,FunctionPrototypeCall(e,t,...r){return e.call(t,...r)},FunctionPrototypeSymbolHasInstance(e,t){return Function.prototype[Symbol.hasInstance].call(e,t)},MathFloor:Math.floor,Number,NumberIsInteger:Number.isInteger,NumberIsNaN:Number.isNaN,NumberMAX_SAFE_INTEGER:Number.MAX_SAFE_INTEGER,NumberMIN_SAFE_INTEGER:Number.MIN_SAFE_INTEGER,NumberParseInt:Number.parseInt,ObjectDefineProperties(e,t){return Object.defineProperties(e,t)},ObjectDefineProperty(e,t,r){return Object.defineProperty(e,t,r)},ObjectGetOwnPropertyDescriptor(e,t){return Object.getOwnPropertyDescriptor(e,t)},ObjectKeys(e){return Object.keys(e)},ObjectSetPrototypeOf(e,t){return Object.setPrototypeOf(e,t)},Promise,PromisePrototypeCatch(e,t){return e.catch(t)},PromisePrototypeThen(e,t,r){return e.then(t,r)},PromiseReject(e){return Promise.reject(e)},PromiseResolve(e){return Promise.resolve(e)},ReflectApply:Reflect.apply,RegExpPrototypeTest(e,t){return e.test(t)},SafeSet:Set,String,StringPrototypeSlice(e,t,r){return e.slice(t,r)},StringPrototypeToLowerCase(e){return e.toLowerCase()},StringPrototypeToUpperCase(e){return e.toUpperCase()},StringPrototypeTrim(e){return e.trim()},Symbol,SymbolFor:Symbol.for,SymbolAsyncIterator:Symbol.asyncIterator,SymbolHasInstance:Symbol.hasInstance,SymbolIterator:Symbol.iterator,SymbolDispose:Symbol.dispose||Symbol("Symbol.dispose"),SymbolAsyncDispose:Symbol.asyncDispose||Symbol("Symbol.asyncDispose"),TypedArrayPrototypeSet(e,t,r){return e.set(t,r)},Boolean,Uint8Array},Is={exports:{}},Ts={format(e,...t){return e.replace(/%([sdifj])/g,function(...[r,n]){const i=t.shift();return n==="f"?i.toFixed(6):n==="j"?JSON.stringify(i):n==="s"&&typeof i=="object"?`${i.constructor!==Object?i.constructor.name:""} {}`.trim():i.toString()})},inspect(e){switch(typeof e){case"string":if(e.includes("'"))if(e.includes('"')){if(!e.includes("`")&&!e.includes("${"))return`\`${e}\``}else return`"${e}"`;return`'${e}'`;case"number":return isNaN(e)?"NaN":Object.is(e,-0)?String(e):e;case"bigint":return`${String(e)}n`;case"boolean":case"undefined":return String(e);case"object":return"{}"}}};const{format:Nl,inspect:Vr}=Ts,{AggregateError:Pl}=he,Ll=globalThis.AggregateError||Pl,xl=Symbol("kIsNodeError"),Ml=["string","function","number","object","Function","Object","boolean","bigint","symbol"],$l=/^([A-Z][a-z0-9]*)+$/,Bl="__node_internal_",tn={};function It(e,t){if(!e)throw new tn.ERR_INTERNAL_ASSERTION(t)}function ao(e){let t="",r=e.length;const n=e[0]==="-"?1:0;for(;r>=n+4;r-=3)t=`_${e.slice(r-3,r)}${t}`;return`${e.slice(0,r)}${t}`}function Dl(e,t,r){if(typeof t=="function")return It(t.length<=r.length,`Code: ${e}; The provided arguments length (${r.length}) does not match the required ones (${t.length}).`),t(...r);const n=(t.match(/%[dfijoOs]/g)||[]).length;return It(n===r.length,`Code: ${e}; The provided arguments length (${r.length}) does not match the required ones (${n}).`),r.length===0?t:Nl(t,...r)}function ve(e,t,r){r||(r=Error);class n extends r{constructor(...o){super(Dl(e,t,o))}toString(){return`${this.name} [${e}]: ${this.message}`}}Object.defineProperties(n.prototype,{name:{value:r.name,writable:!0,enumerable:!1,configurable:!0},toString:{value(){return`${this.name} [${e}]: ${this.message}`},writable:!0,enumerable:!1,configurable:!0}}),n.prototype.code=e,n.prototype[xl]=!0,tn[e]=n}function lo(e){const t=Bl+e.name;return Object.defineProperty(e,"name",{value:t}),e}function jl(e,t){if(e&&t&&e!==t){if(Array.isArray(t.errors))return t.errors.push(e),t;const r=new Ll([t,e],t.message);return r.code=t.code,r}return e||t}let kl=class extends Error{constructor(t="The operation was aborted",r=void 0){if(r!==void 0&&typeof r!="object")throw new tn.ERR_INVALID_ARG_TYPE("options","Object",r);super(t,r),this.code="ABORT_ERR",this.name="AbortError"}};ve("ERR_ASSERTION","%s",Error);ve("ERR_INVALID_ARG_TYPE",(e,t,r)=>{It(typeof e=="string","'name' must be a string"),Array.isArray(t)||(t=[t]);let n="The ";e.endsWith(" argument")?n+=`${e} `:n+=`"${e}" ${e.includes(".")?"property":"argument"} `,n+="must be ";const i=[],o=[],s=[];for(const c of t)It(typeof c=="string","All expected entries have to be of type string"),Ml.includes(c)?i.push(c.toLowerCase()):$l.test(c)?o.push(c):(It(c!=="object",'The value "object" should be written as "Object"'),s.push(c));if(o.length>0){const c=i.indexOf("object");c!==-1&&(i.splice(i,c,1),o.push("Object"))}if(i.length>0){switch(i.length){case 1:n+=`of type ${i[0]}`;break;case 2:n+=`one of type ${i[0]} or ${i[1]}`;break;default:{const c=i.pop();n+=`one of type ${i.join(", ")}, or ${c}`}}(o.length>0||s.length>0)&&(n+=" or ")}if(o.length>0){switch(o.length){case 1:n+=`an instance of ${o[0]}`;break;case 2:n+=`an instance of ${o[0]} or ${o[1]}`;break;default:{const c=o.pop();n+=`an instance of ${o.join(", ")}, or ${c}`}}s.length>0&&(n+=" or ")}switch(s.length){case 0:break;case 1:s[0].toLowerCase()!==s[0]&&(n+="an "),n+=`${s[0]}`;break;case 2:n+=`one of ${s[0]} or ${s[1]}`;break;default:{const c=s.pop();n+=`one of ${s.join(", ")}, or ${c}`}}if(r==null)n+=`. Received ${r}`;else if(typeof r=="function"&&r.name)n+=`. Received function ${r.name}`;else if(typeof r=="object"){var a;if((a=r.constructor)!==null&&a!==void 0&&a.name)n+=`. Received an instance of ${r.constructor.name}`;else{const c=Vr(r,{depth:-1});n+=`. Received ${c}`}}else{let c=Vr(r,{colors:!1});c.length>25&&(c=`${c.slice(0,25)}...`),n+=`. Received type ${typeof r} (${c})`}return n},TypeError);ve("ERR_INVALID_ARG_VALUE",(e,t,r="is invalid")=>{let n=Vr(t);return n.length>128&&(n=n.slice(0,128)+"..."),`The ${e.includes(".")?"property":"argument"} '${e}' ${r}. Received ${n}`},TypeError);ve("ERR_INVALID_RETURN_VALUE",(e,t,r)=>{var n;const i=r!=null&&(n=r.constructor)!==null&&n!==void 0&&n.name?`instance of ${r.constructor.name}`:`type ${typeof r}`;return`Expected ${e} to be returned from the "${t}" function but got ${i}.`},TypeError);ve("ERR_MISSING_ARGS",(...e)=>{It(e.length>0,"At least one arg needs to be specified");let t;const r=e.length;switch(e=(Array.isArray(e)?e:[e]).map(n=>`"${n}"`).join(" or "),r){case 1:t+=`The ${e[0]} argument`;break;case 2:t+=`The ${e[0]} and ${e[1]} arguments`;break;default:{const n=e.pop();t+=`The ${e.join(", ")}, and ${n} arguments`}break}return`${t} must be specified`},TypeError);ve("ERR_OUT_OF_RANGE",(e,t,r)=>{It(t,'Missing "range" argument');let n;if(Number.isInteger(r)&&Math.abs(r)>2**32)n=ao(String(r));else if(typeof r=="bigint"){n=String(r);const i=BigInt(2)**BigInt(32);(r>i||r<-i)&&(n=ao(n)),n+="n"}else n=Vr(r);return`The value of "${e}" is out of range. It must be ${t}. Received ${n}`},RangeError);ve("ERR_MULTIPLE_CALLBACK","Callback called multiple times",Error);ve("ERR_METHOD_NOT_IMPLEMENTED","The %s method is not implemented",Error);ve("ERR_STREAM_ALREADY_FINISHED","Cannot call %s after a stream was finished",Error);ve("ERR_STREAM_CANNOT_PIPE","Cannot pipe, not readable",Error);ve("ERR_STREAM_DESTROYED","Cannot call %s after a stream was destroyed",Error);ve("ERR_STREAM_NULL_VALUES","May not write null values to stream",TypeError);ve("ERR_STREAM_PREMATURE_CLOSE","Premature close",Error);ve("ERR_STREAM_PUSH_AFTER_EOF","stream.push() after EOF",Error);ve("ERR_STREAM_UNSHIFT_AFTER_END_EVENT","stream.unshift() after end event",Error);ve("ERR_STREAM_WRITE_AFTER_END","write after end",Error);ve("ERR_UNKNOWN_ENCODING","Unknown encoding: %s",TypeError);var Ie={AbortError:kl,aggregateTwoErrors:lo(jl),hideStackFrames:lo,codes:tn},ir={exports:{}},uo;function dr(){if(uo)return ir.exports;uo=1;const{AbortController:e,AbortSignal:t}=typeof self<"u"?self:typeof window<"u"?window:void 0;return ir.exports=e,ir.exports.AbortSignal=t,ir.exports.default=e,ir.exports}(function(e){const t=Pt,{format:r,inspect:n}=Ts,{codes:{ERR_INVALID_ARG_TYPE:i}}=Ie,{kResistStopPropagation:o,AggregateError:s,SymbolDispose:a}=he,c=globalThis.AbortSignal||dr().AbortSignal,l=globalThis.AbortController||dr().AbortController,g=Object.getPrototypeOf(async function(){}).constructor,p=globalThis.Blob||t.Blob,E=typeof p<"u"?function(y){return y instanceof p}:function(y){return!1},v=(h,y)=>{if(h!==void 0&&(h===null||typeof h!="object"||!("aborted"in h)))throw new i(y,"AbortSignal",h)},R=(h,y)=>{if(typeof h!="function")throw new i(y,"Function",h)};e.exports={AggregateError:s,kEmptyObject:Object.freeze({}),once(h){let y=!1;return function(...b){y||(y=!0,h.apply(this,b))}},createDeferredPromise:function(){let h,y;return{promise:new Promise((T,m)=>{h=T,y=m}),resolve:h,reject:y}},promisify(h){return new Promise((y,b)=>{h((T,...m)=>T?b(T):y(...m))})},debuglog(){return function(){}},format:r,inspect:n,types:{isAsyncFunction(h){return h instanceof g},isArrayBufferView(h){return ArrayBuffer.isView(h)}},isBlob:E,deprecate(h,y){return h},addAbortListener:en().addAbortListener||function(y,b){if(y===void 0)throw new i("signal","AbortSignal",y);v(y,"signal"),R(b,"listener");let T;return y.aborted?queueMicrotask(()=>b()):(y.addEventListener("abort",b,{__proto__:null,once:!0,[o]:!0}),T=()=>{y.removeEventListener("abort",b)}),{__proto__:null,[a](){var m;(m=T)===null||m===void 0||m()}}},AbortSignalAny:c.any||function(y){if(y.length===1)return y[0];const b=new l,T=()=>b.abort();return y.forEach(m=>{v(m,"signals"),m.addEventListener("abort",T,{once:!0})}),b.signal.addEventListener("abort",()=>{y.forEach(m=>m.removeEventListener("abort",T))},{once:!0}),b.signal}},e.exports.promisify.custom=Symbol.for("nodejs.util.promisify.custom")})(Is);var Pe=Is.exports,Ri={};const{ArrayIsArray:Os,ArrayPrototypeIncludes:Wl,ArrayPrototypeJoin:Ul,ArrayPrototypeMap:Fl,NumberIsInteger:Ii,NumberIsNaN:xh,NumberMAX_SAFE_INTEGER:ql,NumberMIN_SAFE_INTEGER:Hl,NumberParseInt:Mh,ObjectPrototypeHasOwnProperty:zl,RegExpPrototypeExec:$h,String:Gl,StringPrototypeToUpperCase:Bh,StringPrototypeTrim:Dh}=he,{hideStackFrames:je,codes:{ERR_SOCKET_BAD_PORT:jh,ERR_INVALID_ARG_TYPE:ke,ERR_INVALID_ARG_VALUE:Cs,ERR_OUT_OF_RANGE:Ft,ERR_UNKNOWN_SIGNAL:kh}}=Ie,{normalizeEncoding:Wh}=Pe,{isAsyncFunction:Vl,isArrayBufferView:Kl}=Pe.types,Yl=je((e,t,r=Hl,n=ql)=>{if(typeof e!="number")throw new ke(t,"number",e);if(!Ii(e))throw new Ft(t,"an integer",e);if(e<r||e>n)throw new Ft(t,`>= ${r} && <= ${n}`,e)});je((e,t,r=-2147483648,n=2147483647)=>{if(typeof e!="number")throw new ke(t,"number",e);if(!Ii(e))throw new Ft(t,"an integer",e);if(e<r||e>n)throw new Ft(t,`>= ${r} && <= ${n}`,e)});je((e,t,r=!1)=>{if(typeof e!="number")throw new ke(t,"number",e);if(!Ii(e))throw new Ft(t,"an integer",e);const n=r?1:0,i=4294967295;if(e<n||e>i)throw new Ft(t,`>= ${n} && <= ${i}`,e)});je((e,t,r)=>{if(!Wl(r,e)){const i="must be one of: "+Ul(Fl(r,o=>typeof o=="string"?`'${o}'`:Gl(o)),", ");throw new Cs(t,e,i)}});function Zl(e,t){if(typeof e!="boolean")throw new ke(t,"boolean",e)}function Bn(e,t,r){return e==null||!zl(e,t)?r:e[t]}const Jl=je((e,t,r=null)=>{const n=Bn(r,"allowArray",!1),i=Bn(r,"allowFunction",!1);if(!Bn(r,"nullable",!1)&&e===null||!n&&Os(e)||typeof e!="object"&&(!i||typeof e!="function"))throw new ke(t,"Object",e)});je((e,t)=>{if(e!=null&&typeof e!="object"&&typeof e!="function")throw new ke(t,"a dictionary",e)});je((e,t,r=0)=>{if(!Os(e))throw new ke(t,"Array",e);if(e.length<r){const n=`must be longer than ${r}`;throw new Cs(t,e,n)}});je((e,t="buffer")=>{if(!Kl(e))throw new ke(t,["Buffer","TypedArray","DataView"],e)});const Ql=je((e,t)=>{if(e!==void 0&&(e===null||typeof e!="object"||!("aborted"in e)))throw new ke(t,"AbortSignal",e)}),Xl=je((e,t)=>{if(typeof e!="function")throw new ke(t,"Function",e)});je((e,t)=>{if(typeof e!="function"||Vl(e))throw new ke(t,"Function",e)});je((e,t)=>{if(e!==void 0)throw new ke(t,"undefined",e)});var br={validateBoolean:Zl,validateFunction:Xl,validateInteger:Yl,validateObject:Jl,validateAbortSignal:Ql},Ti={exports:{}},pt={};(function(e){Object.defineProperties(e,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}});function t(L){return L&&L.__esModule&&Object.prototype.hasOwnProperty.call(L,"default")?L.default:L}var r={exports:{}},n=r.exports={},i,o;function s(){throw new Error("setTimeout has not been defined")}function a(){throw new Error("clearTimeout has not been defined")}(function(){try{typeof setTimeout=="function"?i=setTimeout:i=s}catch{i=s}try{typeof clearTimeout=="function"?o=clearTimeout:o=a}catch{o=a}})();function c(L){if(i===setTimeout)return setTimeout(L,0);if((i===s||!i)&&setTimeout)return i=setTimeout,setTimeout(L,0);try{return i(L,0)}catch{try{return i.call(null,L,0)}catch{return i.call(this,L,0)}}}function l(L){if(o===clearTimeout)return clearTimeout(L);if((o===a||!o)&&clearTimeout)return o=clearTimeout,clearTimeout(L);try{return o(L)}catch{try{return o.call(null,L)}catch{return o.call(this,L)}}}var g=[],p=!1,E,v=-1;function R(){!p||!E||(p=!1,E.length?g=E.concat(g):v=-1,g.length&&h())}function h(){if(!p){var L=c(R);p=!0;for(var N=g.length;N;){for(E=g,g=[];++v<N;)E&&E[v].run();v=-1,N=g.length}E=null,p=!1,l(L)}}n.nextTick=function(L){var N=new Array(arguments.length-1);if(arguments.length>1)for(var $=1;$<arguments.length;$++)N[$-1]=arguments[$];g.push(new y(L,N)),g.length===1&&!p&&c(h)};function y(L,N){this.fun=L,this.array=N}y.prototype.run=function(){this.fun.apply(null,this.array)},n.title="browser",n.browser=!0,n.env={},n.argv=[],n.version="",n.versions={};function b(){}n.on=b,n.addListener=b,n.once=b,n.off=b,n.removeListener=b,n.removeAllListeners=b,n.emit=b,n.prependListener=b,n.prependOnceListener=b,n.listeners=function(L){return[]},n.binding=function(L){throw new Error("process.binding is not supported")},n.cwd=function(){return"/"},n.chdir=function(L){throw new Error("process.chdir is not supported")},n.umask=function(){return 0};var T=r.exports;const m=t(T);e.default=m,e.process=m})(pt);const{SymbolAsyncIterator:co,SymbolIterator:fo,SymbolFor:Lt}=he,Ns=Lt("nodejs.stream.destroyed"),eu=Lt("nodejs.stream.errored"),ho=Lt("nodejs.stream.readable"),go=Lt("nodejs.stream.writable"),tu=Lt("nodejs.stream.disturbed"),ru=Lt("nodejs.webstream.isClosedPromise"),nu=Lt("nodejs.webstream.controllerErrorFunction");function Oi(e,t=!1){var r;return!!(e&&typeof e.pipe=="function"&&typeof e.on=="function"&&(!t||typeof e.pause=="function"&&typeof e.resume=="function")&&(!e._writableState||((r=e._readableState)===null||r===void 0?void 0:r.readable)!==!1)&&(!e._writableState||e._readableState))}function rn(e){var t;return!!(e&&typeof e.write=="function"&&typeof e.on=="function"&&(!e._readableState||((t=e._writableState)===null||t===void 0?void 0:t.writable)!==!1))}function iu(e){return!!(e&&typeof e.pipe=="function"&&e._readableState&&typeof e.on=="function"&&typeof e.write=="function")}function Ze(e){return e&&(e._readableState||e._writableState||typeof e.write=="function"&&typeof e.on=="function"||typeof e.pipe=="function"&&typeof e.on=="function")}function Ps(e){return!!(e&&!Ze(e)&&typeof e.pipeThrough=="function"&&typeof e.getReader=="function"&&typeof e.cancel=="function")}function Ls(e){return!!(e&&!Ze(e)&&typeof e.getWriter=="function"&&typeof e.abort=="function")}function xs(e){return!!(e&&!Ze(e)&&typeof e.readable=="object"&&typeof e.writable=="object")}function ou(e){return Ps(e)||Ls(e)||xs(e)}function su(e,t){return e==null?!1:t===!0?typeof e[co]=="function":t===!1?typeof e[fo]=="function":typeof e[co]=="function"||typeof e[fo]=="function"}function nn(e){if(!Ze(e))return null;const t=e._writableState,r=e._readableState,n=t||r;return!!(e.destroyed||e[Ns]||n!=null&&n.destroyed)}function au(e){if(!rn(e))return null;if(e.writableEnded===!0)return!0;const t=e._writableState;return t!=null&&t.errored?!1:typeof(t==null?void 0:t.ended)!="boolean"?null:t.ended}function lu(e,t){if(!rn(e))return null;if(e.writableFinished===!0)return!0;const r=e._writableState;return r!=null&&r.errored?!1:typeof(r==null?void 0:r.finished)!="boolean"?null:!!(r.finished||t===!1&&r.ended===!0&&r.length===0)}function Ms(e,t){if(!Oi(e))return null;const r=e._readableState;return r!=null&&r.errored?!1:typeof(r==null?void 0:r.endEmitted)!="boolean"?null:!!(r.endEmitted||t===!1&&r.ended===!0&&r.length===0)}function $s(e){return e&&e[ho]!=null?e[ho]:typeof(e==null?void 0:e.readable)!="boolean"?null:nn(e)?!1:Oi(e)&&e.readable&&!Ms(e)}function Bs(e){return e&&e[go]!=null?e[go]:typeof(e==null?void 0:e.writable)!="boolean"?null:nn(e)?!1:rn(e)&&e.writable&&!au(e)}function uu(e,t){return Ze(e)?nn(e)?!0:!((t==null?void 0:t.readable)!==!1&&$s(e)||(t==null?void 0:t.writable)!==!1&&Bs(e)):null}function cu(e){var t,r;return Ze(e)?e.writableErrored?e.writableErrored:(t=(r=e._writableState)===null||r===void 0?void 0:r.errored)!==null&&t!==void 0?t:null:null}function fu(e){var t,r;return Ze(e)?e.readableErrored?e.readableErrored:(t=(r=e._readableState)===null||r===void 0?void 0:r.errored)!==null&&t!==void 0?t:null:null}function du(e){if(!Ze(e))return null;if(typeof e.closed=="boolean")return e.closed;const t=e._writableState,r=e._readableState;return typeof(t==null?void 0:t.closed)=="boolean"||typeof(r==null?void 0:r.closed)=="boolean"?(t==null?void 0:t.closed)||(r==null?void 0:r.closed):typeof e._closed=="boolean"&&Ds(e)?e._closed:null}function Ds(e){return typeof e._closed=="boolean"&&typeof e._defaultKeepAlive=="boolean"&&typeof e._removedConnection=="boolean"&&typeof e._removedContLen=="boolean"}function hu(e){return typeof e._sent100=="boolean"&&Ds(e)}function gu(e){var t;return typeof e._consuming=="boolean"&&typeof e._dumped=="boolean"&&((t=e.req)===null||t===void 0?void 0:t.upgradeOrConnect)===void 0}function pu(e){if(!Ze(e))return null;const t=e._writableState,r=e._readableState,n=t||r;return!n&&hu(e)||!!(n&&n.autoDestroy&&n.emitClose&&n.closed===!1)}function bu(e){var t;return!!(e&&((t=e[tu])!==null&&t!==void 0?t:e.readableDidRead||e.readableAborted))}function wu(e){var t,r,n,i,o,s,a,c,l,g;return!!(e&&((t=(r=(n=(i=(o=(s=e[eu])!==null&&s!==void 0?s:e.readableErrored)!==null&&o!==void 0?o:e.writableErrored)!==null&&i!==void 0?i:(a=e._readableState)===null||a===void 0?void 0:a.errorEmitted)!==null&&n!==void 0?n:(c=e._writableState)===null||c===void 0?void 0:c.errorEmitted)!==null&&r!==void 0?r:(l=e._readableState)===null||l===void 0?void 0:l.errored)!==null&&t!==void 0?t:!((g=e._writableState)===null||g===void 0)&&g.errored))}var at={isDestroyed:nn,kIsDestroyed:Ns,isDisturbed:bu,isErrored:wu,isReadable:$s,kIsClosedPromise:ru,kControllerErrorFunction:nu,isClosed:du,isDuplexNodeStream:iu,isFinished:uu,isIterable:su,isReadableNodeStream:Oi,isReadableStream:Ps,isReadableFinished:Ms,isReadableErrored:fu,isNodeStream:Ze,isWebStream:ou,isWritable:Bs,isWritableNodeStream:rn,isWritableStream:Ls,isWritableFinished:lu,isWritableErrored:cu,isServerRequest:gu,willEmitClose:pu,isTransformStream:xs};const ft=pt,{AbortError:js,codes:yu}=Ie,{ERR_INVALID_ARG_TYPE:_u,ERR_STREAM_PREMATURE_CLOSE:po}=yu,{kEmptyObject:oi,once:si}=Pe,{validateAbortSignal:mu,validateFunction:vu,validateObject:Eu,validateBoolean:Su}=br,{Promise:Au,PromisePrototypeThen:Ru,SymbolDispose:ks}=he,{isClosed:Iu,isReadable:bo,isReadableNodeStream:Dn,isReadableStream:Tu,isReadableFinished:wo,isReadableErrored:yo,isWritable:_o,isWritableNodeStream:mo,isWritableStream:Ou,isWritableFinished:vo,isWritableErrored:Eo,isNodeStream:Cu,willEmitClose:Nu,kIsClosedPromise:Pu}=at;let kt;function Lu(e){return e.setHeader&&typeof e.abort=="function"}const ai=()=>{};function Ws(e,t,r){var n,i;if(arguments.length===2?(r=t,t=oi):t==null?t=oi:Eu(t,"options"),vu(r,"callback"),mu(t.signal,"options.signal"),r=si(r),Tu(e)||Ou(e))return xu(e,t,r);if(!Cu(e))throw new _u("stream",["ReadableStream","WritableStream","Stream"],e);const o=(n=t.readable)!==null&&n!==void 0?n:Dn(e),s=(i=t.writable)!==null&&i!==void 0?i:mo(e),a=e._writableState,c=e._readableState,l=()=>{e.writable||E()};let g=Nu(e)&&Dn(e)===o&&mo(e)===s,p=vo(e,!1);const E=()=>{p=!0,e.destroyed&&(g=!1),!(g&&(!e.readable||o))&&(!o||v)&&r.call(e)};let v=wo(e,!1);const R=()=>{v=!0,e.destroyed&&(g=!1),!(g&&(!e.writable||s))&&(!s||p)&&r.call(e)},h=N=>{r.call(e,N)};let y=Iu(e);const b=()=>{y=!0;const N=Eo(e)||yo(e);if(N&&typeof N!="boolean")return r.call(e,N);if(o&&!v&&Dn(e,!0)&&!wo(e,!1))return r.call(e,new po);if(s&&!p&&!vo(e,!1))return r.call(e,new po);r.call(e)},T=()=>{y=!0;const N=Eo(e)||yo(e);if(N&&typeof N!="boolean")return r.call(e,N);r.call(e)},m=()=>{e.req.on("finish",E)};Lu(e)?(e.on("complete",E),g||e.on("abort",b),e.req?m():e.on("request",m)):s&&!a&&(e.on("end",l),e.on("close",l)),!g&&typeof e.aborted=="boolean"&&e.on("aborted",b),e.on("end",R),e.on("finish",E),t.error!==!1&&e.on("error",h),e.on("close",b),y?ft.nextTick(b):a!=null&&a.errorEmitted||c!=null&&c.errorEmitted?g||ft.nextTick(T):(!o&&(!g||bo(e))&&(p||_o(e)===!1)||!s&&(!g||_o(e))&&(v||bo(e)===!1)||c&&e.req&&e.aborted)&&ft.nextTick(T);const L=()=>{r=ai,e.removeListener("aborted",b),e.removeListener("complete",E),e.removeListener("abort",b),e.removeListener("request",m),e.req&&e.req.removeListener("finish",E),e.removeListener("end",l),e.removeListener("close",l),e.removeListener("finish",E),e.removeListener("end",R),e.removeListener("error",h),e.removeListener("close",b)};if(t.signal&&!y){const N=()=>{const $=r;L(),$.call(e,new js(void 0,{cause:t.signal.reason}))};if(t.signal.aborted)ft.nextTick(N);else{kt=kt||Pe.addAbortListener;const $=kt(t.signal,N),H=r;r=si((...k)=>{$[ks](),H.apply(e,k)})}}return L}function xu(e,t,r){let n=!1,i=ai;if(t.signal)if(i=()=>{n=!0,r.call(e,new js(void 0,{cause:t.signal.reason}))},t.signal.aborted)ft.nextTick(i);else{kt=kt||Pe.addAbortListener;const s=kt(t.signal,i),a=r;r=si((...c)=>{s[ks](),a.apply(e,c)})}const o=(...s)=>{n||ft.nextTick(()=>r.apply(e,s))};return Ru(e[Pu].promise,o,o),ai}function Mu(e,t){var r;let n=!1;return t===null&&(t=oi),(r=t)!==null&&r!==void 0&&r.cleanup&&(Su(t.cleanup,"cleanup"),n=t.cleanup),new Au((i,o)=>{const s=Ws(e,t,a=>{n&&s(),a?o(a):i()})})}Ti.exports=Ws;Ti.exports.finished=Mu;var bt=Ti.exports;const Ke=pt,{aggregateTwoErrors:$u,codes:{ERR_MULTIPLE_CALLBACK:Bu},AbortError:Du}=Ie,{Symbol:Us}=he,{kIsDestroyed:ju,isDestroyed:ku,isFinished:Wu,isServerRequest:Uu}=at,Fs=Us("kDestroy"),li=Us("kConstruct");function qs(e,t,r){e&&(e.stack,t&&!t.errored&&(t.errored=e),r&&!r.errored&&(r.errored=e))}function Fu(e,t){const r=this._readableState,n=this._writableState,i=n||r;return n!=null&&n.destroyed||r!=null&&r.destroyed?(typeof t=="function"&&t(),this):(qs(e,n,r),n&&(n.destroyed=!0),r&&(r.destroyed=!0),i.constructed?So(this,e,t):this.once(Fs,function(o){So(this,$u(o,e),t)}),this)}function So(e,t,r){let n=!1;function i(o){if(n)return;n=!0;const s=e._readableState,a=e._writableState;qs(o,a,s),a&&(a.closed=!0),s&&(s.closed=!0),typeof r=="function"&&r(o),o?Ke.nextTick(qu,e,o):Ke.nextTick(Hs,e)}try{e._destroy(t||null,i)}catch(o){i(o)}}function qu(e,t){ui(e,t),Hs(e)}function Hs(e){const t=e._readableState,r=e._writableState;r&&(r.closeEmitted=!0),t&&(t.closeEmitted=!0),(r!=null&&r.emitClose||t!=null&&t.emitClose)&&e.emit("close")}function ui(e,t){const r=e._readableState,n=e._writableState;n!=null&&n.errorEmitted||r!=null&&r.errorEmitted||(n&&(n.errorEmitted=!0),r&&(r.errorEmitted=!0),e.emit("error",t))}function Hu(){const e=this._readableState,t=this._writableState;e&&(e.constructed=!0,e.closed=!1,e.closeEmitted=!1,e.destroyed=!1,e.errored=null,e.errorEmitted=!1,e.reading=!1,e.ended=e.readable===!1,e.endEmitted=e.readable===!1),t&&(t.constructed=!0,t.destroyed=!1,t.closed=!1,t.closeEmitted=!1,t.errored=null,t.errorEmitted=!1,t.finalCalled=!1,t.prefinished=!1,t.ended=t.writable===!1,t.ending=t.writable===!1,t.finished=t.writable===!1)}function ci(e,t,r){const n=e._readableState,i=e._writableState;if(i!=null&&i.destroyed||n!=null&&n.destroyed)return this;n!=null&&n.autoDestroy||i!=null&&i.autoDestroy?e.destroy(t):t&&(t.stack,i&&!i.errored&&(i.errored=t),n&&!n.errored&&(n.errored=t),r?Ke.nextTick(ui,e,t):ui(e,t))}function zu(e,t){if(typeof e._construct!="function")return;const r=e._readableState,n=e._writableState;r&&(r.constructed=!1),n&&(n.constructed=!1),e.once(li,t),!(e.listenerCount(li)>1)&&Ke.nextTick(Gu,e)}function Gu(e){let t=!1;function r(n){if(t){ci(e,n??new Bu);return}t=!0;const i=e._readableState,o=e._writableState,s=o||i;i&&(i.constructed=!0),o&&(o.constructed=!0),s.destroyed?e.emit(Fs,n):n?ci(e,n,!0):Ke.nextTick(Vu,e)}try{e._construct(n=>{Ke.nextTick(r,n)})}catch(n){Ke.nextTick(r,n)}}function Vu(e){e.emit(li)}function Ao(e){return(e==null?void 0:e.setHeader)&&typeof e.abort=="function"}function zs(e){e.emit("close")}function Ku(e,t){e.emit("error",t),Ke.nextTick(zs,e)}function Yu(e,t){!e||ku(e)||(!t&&!Wu(e)&&(t=new Du),Uu(e)?(e.socket=null,e.destroy(t)):Ao(e)?e.abort():Ao(e.req)?e.req.abort():typeof e.destroy=="function"?e.destroy(t):typeof e.close=="function"?e.close():t?Ke.nextTick(Ku,e,t):Ke.nextTick(zs,e),e.destroyed||(e[ju]=!0))}var Kt={construct:zu,destroyer:Yu,destroy:Fu,undestroy:Hu,errorOrDestroy:ci};const{ArrayIsArray:Zu,ObjectSetPrototypeOf:Gs}=he,{EventEmitter:on}=en();function sn(e){on.call(this,e)}Gs(sn.prototype,on.prototype);Gs(sn,on);sn.prototype.pipe=function(e,t){const r=this;function n(g){e.writable&&e.write(g)===!1&&r.pause&&r.pause()}r.on("data",n);function i(){r.readable&&r.resume&&r.resume()}e.on("drain",i),!e._isStdio&&(!t||t.end!==!1)&&(r.on("end",s),r.on("close",a));let o=!1;function s(){o||(o=!0,e.end())}function a(){o||(o=!0,typeof e.destroy=="function"&&e.destroy())}function c(g){l(),on.listenerCount(this,"error")===0&&this.emit("error",g)}fi(r,"error",c),fi(e,"error",c);function l(){r.removeListener("data",n),e.removeListener("drain",i),r.removeListener("end",s),r.removeListener("close",a),r.removeListener("error",c),e.removeListener("error",c),r.removeListener("end",l),r.removeListener("close",l),e.removeListener("close",l)}return r.on("end",l),r.on("close",l),e.on("close",l),e.emit("pipe",r),e};function fi(e,t,r){if(typeof e.prependListener=="function")return e.prependListener(t,r);!e._events||!e._events[t]?e.on(t,r):Zu(e._events[t])?e._events[t].unshift(r):e._events[t]=[r,e._events[t]]}var Ci={Stream:sn,prependListener:fi},Vs={exports:{}};(function(e){const{SymbolDispose:t}=he,{AbortError:r,codes:n}=Ie,{isNodeStream:i,isWebStream:o,kControllerErrorFunction:s}=at,a=bt,{ERR_INVALID_ARG_TYPE:c}=n;let l;const g=(p,E)=>{if(typeof p!="object"||!("aborted"in p))throw new c(E,"AbortSignal",p)};e.exports.addAbortSignal=function(E,v){if(g(E,"signal"),!i(v)&&!o(v))throw new c("stream",["ReadableStream","WritableStream","Stream"],v);return e.exports.addAbortSignalNoValidate(E,v)},e.exports.addAbortSignalNoValidate=function(p,E){if(typeof p!="object"||!("aborted"in p))return E;const v=i(E)?()=>{E.destroy(new r(void 0,{cause:p.reason}))}:()=>{E[s](new r(void 0,{cause:p.reason}))};if(p.aborted)v();else{l=l||Pe.addAbortListener;const R=l(p,v);a(E,R[t])}return E}})(Vs);var an=Vs.exports;const{StringPrototypeSlice:Ro,SymbolIterator:Ju,TypedArrayPrototypeSet:Br,Uint8Array:Qu}=he,{Buffer:jn}=Pt,{inspect:Xu}=Pe;var ec=class{constructor(){this.head=null,this.tail=null,this.length=0}push(t){const r={data:t,next:null};this.length>0?this.tail.next=r:this.head=r,this.tail=r,++this.length}unshift(t){const r={data:t,next:this.head};this.length===0&&(this.tail=r),this.head=r,++this.length}shift(){if(this.length===0)return;const t=this.head.data;return this.length===1?this.head=this.tail=null:this.head=this.head.next,--this.length,t}clear(){this.head=this.tail=null,this.length=0}join(t){if(this.length===0)return"";let r=this.head,n=""+r.data;for(;(r=r.next)!==null;)n+=t+r.data;return n}concat(t){if(this.length===0)return jn.alloc(0);const r=jn.allocUnsafe(t>>>0);let n=this.head,i=0;for(;n;)Br(r,n.data,i),i+=n.data.length,n=n.next;return r}consume(t,r){const n=this.head.data;if(t<n.length){const i=n.slice(0,t);return this.head.data=n.slice(t),i}return t===n.length?this.shift():r?this._getString(t):this._getBuffer(t)}first(){return this.head.data}*[Ju](){for(let t=this.head;t;t=t.next)yield t.data}_getString(t){let r="",n=this.head,i=0;do{const o=n.data;if(t>o.length)r+=o,t-=o.length;else{t===o.length?(r+=o,++i,n.next?this.head=n.next:this.head=this.tail=null):(r+=Ro(o,0,t),this.head=n,n.data=Ro(o,t));break}++i}while((n=n.next)!==null);return this.length-=i,r}_getBuffer(t){const r=jn.allocUnsafe(t),n=t;let i=this.head,o=0;do{const s=i.data;if(t>s.length)Br(r,s,n-t),t-=s.length;else{t===s.length?(Br(r,s,n-t),++o,i.next?this.head=i.next:this.head=this.tail=null):(Br(r,new Qu(s.buffer,s.byteOffset,t),n-t),this.head=i,i.data=s.slice(t));break}++o}while((i=i.next)!==null);return this.length-=o,r}[Symbol.for("nodejs.util.inspect.custom")](t,r){return Xu(this,{...r,depth:0,customInspect:!1})}};const{MathFloor:tc,NumberIsInteger:rc}=he,{validateInteger:nc}=br,{ERR_INVALID_ARG_VALUE:ic}=Ie.codes;let Ks=16*1024,Ys=16;function oc(e,t,r){return e.highWaterMark!=null?e.highWaterMark:t?e[r]:null}function Zs(e){return e?Ys:Ks}function sc(e,t){nc(t,"value",0),e?Ys=t:Ks=t}function ac(e,t,r,n){const i=oc(t,n,r);if(i!=null){if(!rc(i)||i<0){const o=n?`options.${r}`:"options.highWaterMark";throw new ic(o,i)}return tc(i)}return Zs(e.objectMode)}var ln={getHighWaterMark:ac,getDefaultHighWaterMark:Zs,setDefaultHighWaterMark:sc};const Io=pt,{PromisePrototypeThen:lc,SymbolAsyncIterator:To,SymbolIterator:Oo}=he,{Buffer:uc}=Pt,{ERR_INVALID_ARG_TYPE:cc,ERR_STREAM_NULL_VALUES:fc}=Ie.codes;function dc(e,t,r){let n;if(typeof t=="string"||t instanceof uc)return new e({objectMode:!0,...r,read(){this.push(t),this.push(null)}});let i;if(t&&t[To])i=!0,n=t[To]();else if(t&&t[Oo])i=!1,n=t[Oo]();else throw new cc("iterable",["Iterable"],t);const o=new e({objectMode:!0,highWaterMark:1,...r});let s=!1;o._read=function(){s||(s=!0,c())},o._destroy=function(l,g){lc(a(l),()=>Io.nextTick(g,l),p=>Io.nextTick(g,p||l))};async function a(l){const g=l!=null,p=typeof n.throw=="function";if(g&&p){const{value:E,done:v}=await n.throw(l);if(await E,v)return}if(typeof n.return=="function"){const{value:E}=await n.return();await E}}async function c(){for(;;){try{const{value:l,done:g}=i?await n.next():n.next();if(g)o.push(null);else{const p=l&&typeof l.then=="function"?await l:l;if(p===null)throw s=!1,new fc;if(o.push(p))continue;s=!1}}catch(l){o.destroy(l)}break}}return o}var Js=dc,kn,Co;function un(){if(Co)return kn;Co=1;const e=pt,{ArrayPrototypeIndexOf:t,NumberIsInteger:r,NumberIsNaN:n,NumberParseInt:i,ObjectDefineProperties:o,ObjectKeys:s,ObjectSetPrototypeOf:a,Promise:c,SafeSet:l,SymbolAsyncDispose:g,SymbolAsyncIterator:p,Symbol:E}=he;kn=Y,Y.ReadableState=Le;const{EventEmitter:v}=en(),{Stream:R,prependListener:h}=Ci,{Buffer:y}=Pt,{addAbortSignal:b}=an,T=bt;let m=Pe.debuglog("stream",u=>{m=u});const L=ec,N=Kt,{getHighWaterMark:$,getDefaultHighWaterMark:H}=ln,{aggregateTwoErrors:k,codes:{ERR_INVALID_ARG_TYPE:Q,ERR_METHOD_NOT_IMPLEMENTED:Z,ERR_OUT_OF_RANGE:D,ERR_STREAM_PUSH_AFTER_EOF:j,ERR_STREAM_UNSHIFT_AFTER_END_EVENT:O},AbortError:ee}=Ie,{validateObject:I}=br,P=E("kPaused"),{StringDecoder:F}=Sl,K=Js;a(Y.prototype,R.prototype),a(Y,R);const V=()=>{},{errorOrDestroy:X}=N,J=1,le=2,B=4,te=8,ge=16,be=32,we=64,Ee=128,Se=256,Te=512,We=1024,Ae=2048,_=4096,S=8192,C=16384,W=32768,z=65536,oe=1<<17,ce=1<<18;function ne(u){return{enumerable:!1,get(){return(this.state&u)!==0},set(d){d?this.state|=u:this.state&=~u}}}o(Le.prototype,{objectMode:ne(J),ended:ne(le),endEmitted:ne(B),reading:ne(te),constructed:ne(ge),sync:ne(be),needReadable:ne(we),emittedReadable:ne(Ee),readableListening:ne(Se),resumeScheduled:ne(Te),errorEmitted:ne(We),emitClose:ne(Ae),autoDestroy:ne(_),destroyed:ne(S),closed:ne(C),closeEmitted:ne(W),multiAwaitDrain:ne(z),readingMore:ne(oe),dataEmitted:ne(ce)});function Le(u,d,x){typeof x!="boolean"&&(x=d instanceof ot()),this.state=Ae|_|ge|be,u&&u.objectMode&&(this.state|=J),x&&u&&u.readableObjectMode&&(this.state|=J),this.highWaterMark=u?$(this,u,"readableHighWaterMark",x):H(!1),this.buffer=new L,this.length=0,this.pipes=[],this.flowing=null,this[P]=null,u&&u.emitClose===!1&&(this.state&=~Ae),u&&u.autoDestroy===!1&&(this.state&=~_),this.errored=null,this.defaultEncoding=u&&u.defaultEncoding||"utf8",this.awaitDrainWriters=null,this.decoder=null,this.encoding=null,u&&u.encoding&&(this.decoder=new F(u.encoding),this.encoding=u.encoding)}function Y(u){if(!(this instanceof Y))return new Y(u);const d=this instanceof ot();this._readableState=new Le(u,this,d),u&&(typeof u.read=="function"&&(this._read=u.read),typeof u.destroy=="function"&&(this._destroy=u.destroy),typeof u.construct=="function"&&(this._construct=u.construct),u.signal&&!d&&b(u.signal,this)),R.call(this,u),N.construct(this,()=>{this._readableState.needReadable&&yt(this,this._readableState)})}Y.prototype.destroy=N.destroy,Y.prototype._undestroy=N.undestroy,Y.prototype._destroy=function(u,d){d(u)},Y.prototype[v.captureRejectionSymbol]=function(u){this.destroy(u)},Y.prototype[g]=function(){let u;return this.destroyed||(u=this.readableEnded?null:new ee,this.destroy(u)),new c((d,x)=>T(this,M=>M&&M!==u?x(M):d(null)))},Y.prototype.push=function(u,d){return me(this,u,d,!1)},Y.prototype.unshift=function(u,d){return me(this,u,d,!0)};function me(u,d,x,M){m("readableAddChunk",d);const U=u._readableState;let ye;if(U.state&J||(typeof d=="string"?(x=x||U.defaultEncoding,U.encoding!==x&&(M&&U.encoding?d=y.from(d,x).toString(U.encoding):(d=y.from(d,x),x=""))):d instanceof y?x="":R._isUint8Array(d)?(d=R._uint8ArrayToBuffer(d),x=""):d!=null&&(ye=new Q("chunk",["string","Buffer","Uint8Array"],d))),ye)X(u,ye);else if(d===null)U.state&=~te,Bt(u,U);else if(U.state&J||d&&d.length>0)if(M)if(U.state&B)X(u,new O);else{if(U.destroyed||U.errored)return!1;$t(u,U,d,!0)}else if(U.ended)X(u,new j);else{if(U.destroyed||U.errored)return!1;U.state&=~te,U.decoder&&!x?(d=U.decoder.write(d),U.objectMode||d.length!==0?$t(u,U,d,!1):yt(u,U)):$t(u,U,d,!1)}else M||(U.state&=~te,yt(u,U));return!U.ended&&(U.length<U.highWaterMark||U.length===0)}function $t(u,d,x,M){d.flowing&&d.length===0&&!d.sync&&u.listenerCount("data")>0?(d.state&z?d.awaitDrainWriters.clear():d.awaitDrainWriters=null,d.dataEmitted=!0,u.emit("data",x)):(d.length+=d.objectMode?1:x.length,M?d.buffer.unshift(x):d.buffer.push(x),d.state&we&&wt(u)),yt(u,d)}Y.prototype.isPaused=function(){const u=this._readableState;return u[P]===!0||u.flowing===!1},Y.prototype.setEncoding=function(u){const d=new F(u);this._readableState.decoder=d,this._readableState.encoding=this._readableState.decoder.encoding;const x=this._readableState.buffer;let M="";for(const U of x)M+=d.write(U);return x.clear(),M!==""&&x.push(M),this._readableState.length=M.length,this};const vr=1073741824;function mn(u){if(u>vr)throw new D("size","<= 1GiB",u);return u--,u|=u>>>1,u|=u>>>2,u|=u>>>4,u|=u>>>8,u|=u>>>16,u++,u}function Er(u,d){return u<=0||d.length===0&&d.ended?0:d.state&J?1:n(u)?d.flowing&&d.length?d.buffer.first().length:d.length:u<=d.length?u:d.ended?d.length:0}Y.prototype.read=function(u){m("read",u),u===void 0?u=NaN:r(u)||(u=i(u,10));const d=this._readableState,x=u;if(u>d.highWaterMark&&(d.highWaterMark=mn(u)),u!==0&&(d.state&=~Ee),u===0&&d.needReadable&&((d.highWaterMark!==0?d.length>=d.highWaterMark:d.length>0)||d.ended))return m("read: emitReadable",d.length,d.ended),d.length===0&&d.ended?Qt(this):wt(this),null;if(u=Er(u,d),u===0&&d.ended)return d.length===0&&Qt(this),null;let M=(d.state&we)!==0;if(m("need readable",M),(d.length===0||d.length-u<d.highWaterMark)&&(M=!0,m("length less than watermark",M)),d.ended||d.reading||d.destroyed||d.errored||!d.constructed)M=!1,m("reading, ended or constructing",M);else if(M){m("do read"),d.state|=te|be,d.length===0&&(d.state|=we);try{this._read(d.highWaterMark)}catch(ye){X(this,ye)}d.state&=~be,d.reading||(u=Er(x,d))}let U;return u>0?U=lt(u,d):U=null,U===null?(d.needReadable=d.length<=d.highWaterMark,u=0):(d.length-=u,d.multiAwaitDrain?d.awaitDrainWriters.clear():d.awaitDrainWriters=null),d.length===0&&(d.ended||(d.needReadable=!0),x!==u&&d.ended&&Qt(this)),U!==null&&!d.errorEmitted&&!d.closeEmitted&&(d.dataEmitted=!0,this.emit("data",U)),U};function Bt(u,d){if(m("onEofChunk"),!d.ended){if(d.decoder){const x=d.decoder.end();x&&x.length&&(d.buffer.push(x),d.length+=d.objectMode?1:x.length)}d.ended=!0,d.sync?wt(u):(d.needReadable=!1,d.emittedReadable=!0,Zt(u))}}function wt(u){const d=u._readableState;m("emitReadable",d.needReadable,d.emittedReadable),d.needReadable=!1,d.emittedReadable||(m("emitReadable",d.flowing),d.emittedReadable=!0,e.nextTick(Zt,u))}function Zt(u){const d=u._readableState;m("emitReadable_",d.destroyed,d.length,d.ended),!d.destroyed&&!d.errored&&(d.length||d.ended)&&(u.emit("readable"),d.emittedReadable=!1),d.needReadable=!d.flowing&&!d.ended&&d.length<=d.highWaterMark,Jt(u)}function yt(u,d){!d.readingMore&&d.constructed&&(d.readingMore=!0,e.nextTick(Sr,u,d))}function Sr(u,d){for(;!d.reading&&!d.ended&&(d.length<d.highWaterMark||d.flowing&&d.length===0);){const x=d.length;if(m("maybeReadMore read 0"),u.read(0),x===d.length)break}d.readingMore=!1}Y.prototype._read=function(u){throw new Z("_read()")},Y.prototype.pipe=function(u,d){const x=this,M=this._readableState;M.pipes.length===1&&(M.multiAwaitDrain||(M.multiAwaitDrain=!0,M.awaitDrainWriters=new l(M.awaitDrainWriters?[M.awaitDrainWriters]:[]))),M.pipes.push(u),m("pipe count=%d opts=%j",M.pipes.length,d);const ye=(!d||d.end!==!1)&&u!==e.stdout&&u!==e.stderr?Or:_t;M.endEmitted?e.nextTick(ye):x.once("end",ye),u.on("unpipe",Oe);function Oe(Xe,Ue){m("onunpipe"),Xe===x&&Ue&&Ue.hasUnpiped===!1&&(Ue.hasUnpiped=!0,An())}function Or(){m("onend"),u.end()}let Ce,Cr=!1;function An(){m("cleanup"),u.removeListener("close",ze),u.removeListener("finish",tr),Ce&&u.removeListener("drain",Ce),u.removeListener("error",er),u.removeListener("unpipe",Oe),x.removeListener("end",Or),x.removeListener("end",_t),x.removeListener("data",Pr),Cr=!0,Ce&&M.awaitDrainWriters&&(!u._writableState||u._writableState.needDrain)&&Ce()}function Nr(){Cr||(M.pipes.length===1&&M.pipes[0]===u?(m("false write response, pause",0),M.awaitDrainWriters=u,M.multiAwaitDrain=!1):M.pipes.length>1&&M.pipes.includes(u)&&(m("false write response, pause",M.awaitDrainWriters.size),M.awaitDrainWriters.add(u)),x.pause()),Ce||(Ce=vn(x,u),u.on("drain",Ce))}x.on("data",Pr);function Pr(Xe){m("ondata");const Ue=u.write(Xe);m("dest.write",Ue),Ue===!1&&Nr()}function er(Xe){if(m("onerror",Xe),_t(),u.removeListener("error",er),u.listenerCount("error")===0){const Ue=u._writableState||u._readableState;Ue&&!Ue.errorEmitted?X(u,Xe):u.emit("error",Xe)}}h(u,"error",er);function ze(){u.removeListener("finish",tr),_t()}u.once("close",ze);function tr(){m("onfinish"),u.removeListener("close",ze),_t()}u.once("finish",tr);function _t(){m("unpipe"),x.unpipe(u)}return u.emit("pipe",x),u.writableNeedDrain===!0?Nr():M.flowing||(m("pipe resume"),x.resume()),u};function vn(u,d){return function(){const M=u._readableState;M.awaitDrainWriters===d?(m("pipeOnDrain",1),M.awaitDrainWriters=null):M.multiAwaitDrain&&(m("pipeOnDrain",M.awaitDrainWriters.size),M.awaitDrainWriters.delete(d)),(!M.awaitDrainWriters||M.awaitDrainWriters.size===0)&&u.listenerCount("data")&&u.resume()}}Y.prototype.unpipe=function(u){const d=this._readableState,x={hasUnpiped:!1};if(d.pipes.length===0)return this;if(!u){const U=d.pipes;d.pipes=[],this.pause();for(let ye=0;ye<U.length;ye++)U[ye].emit("unpipe",this,{hasUnpiped:!1});return this}const M=t(d.pipes,u);return M===-1?this:(d.pipes.splice(M,1),d.pipes.length===0&&this.pause(),u.emit("unpipe",this,x),this)},Y.prototype.on=function(u,d){const x=R.prototype.on.call(this,u,d),M=this._readableState;return u==="data"?(M.readableListening=this.listenerCount("readable")>0,M.flowing!==!1&&this.resume()):u==="readable"&&!M.endEmitted&&!M.readableListening&&(M.readableListening=M.needReadable=!0,M.flowing=!1,M.emittedReadable=!1,m("on readable",M.length,M.reading),M.length?wt(this):M.reading||e.nextTick(Je,this)),x},Y.prototype.addListener=Y.prototype.on,Y.prototype.removeListener=function(u,d){const x=R.prototype.removeListener.call(this,u,d);return u==="readable"&&e.nextTick(Ar,this),x},Y.prototype.off=Y.prototype.removeListener,Y.prototype.removeAllListeners=function(u){const d=R.prototype.removeAllListeners.apply(this,arguments);return(u==="readable"||u===void 0)&&e.nextTick(Ar,this),d};function Ar(u){const d=u._readableState;d.readableListening=u.listenerCount("readable")>0,d.resumeScheduled&&d[P]===!1?d.flowing=!0:u.listenerCount("data")>0?u.resume():d.readableListening||(d.flowing=null)}function Je(u){m("readable nexttick read 0"),u.read(0)}Y.prototype.resume=function(){const u=this._readableState;return u.flowing||(m("resume"),u.flowing=!u.readableListening,Dt(this,u)),u[P]=!1,this};function Dt(u,d){d.resumeScheduled||(d.resumeScheduled=!0,e.nextTick(En,u,d))}function En(u,d){m("resume",d.reading),d.reading||u.read(0),d.resumeScheduled=!1,u.emit("resume"),Jt(u),d.flowing&&!d.reading&&u.read(0)}Y.prototype.pause=function(){return m("call pause flowing=%j",this._readableState.flowing),this._readableState.flowing!==!1&&(m("pause"),this._readableState.flowing=!1,this.emit("pause")),this._readableState[P]=!0,this};function Jt(u){const d=u._readableState;for(m("flow",d.flowing);d.flowing&&u.read()!==null;);}Y.prototype.wrap=function(u){let d=!1;u.on("data",M=>{!this.push(M)&&u.pause&&(d=!0,u.pause())}),u.on("end",()=>{this.push(null)}),u.on("error",M=>{X(this,M)}),u.on("close",()=>{this.destroy()}),u.on("destroy",()=>{this.destroy()}),this._read=()=>{d&&u.resume&&(d=!1,u.resume())};const x=s(u);for(let M=1;M<x.length;M++){const U=x[M];this[U]===void 0&&typeof u[U]=="function"&&(this[U]=u[U].bind(u))}return this},Y.prototype[p]=function(){return Rr(this)},Y.prototype.iterator=function(u){return u!==void 0&&I(u,"options"),Rr(this,u)};function Rr(u,d){typeof u.read!="function"&&(u=Y.wrap(u,{objectMode:!0}));const x=Ir(u,d);return x.stream=u,x}async function*Ir(u,d){let x=V;function M(Oe){this===u?(x(),x=V):x=Oe}u.on("readable",M);let U;const ye=T(u,{writable:!1},Oe=>{U=Oe?k(U,Oe):null,x(),x=V});try{for(;;){const Oe=u.destroyed?null:u.read();if(Oe!==null)yield Oe;else{if(U)throw U;if(U===null)return;await new c(M)}}}catch(Oe){throw U=k(U,Oe),U}finally{(U||(d==null?void 0:d.destroyOnReturn)!==!1)&&(U===void 0||u._readableState.autoDestroy)?N.destroyer(u,null):(u.off("readable",M),ye())}}o(Y.prototype,{readable:{__proto__:null,get(){const u=this._readableState;return!!u&&u.readable!==!1&&!u.destroyed&&!u.errorEmitted&&!u.endEmitted},set(u){this._readableState&&(this._readableState.readable=!!u)}},readableDidRead:{__proto__:null,enumerable:!1,get:function(){return this._readableState.dataEmitted}},readableAborted:{__proto__:null,enumerable:!1,get:function(){return!!(this._readableState.readable!==!1&&(this._readableState.destroyed||this._readableState.errored)&&!this._readableState.endEmitted)}},readableHighWaterMark:{__proto__:null,enumerable:!1,get:function(){return this._readableState.highWaterMark}},readableBuffer:{__proto__:null,enumerable:!1,get:function(){return this._readableState&&this._readableState.buffer}},readableFlowing:{__proto__:null,enumerable:!1,get:function(){return this._readableState.flowing},set:function(u){this._readableState&&(this._readableState.flowing=u)}},readableLength:{__proto__:null,enumerable:!1,get(){return this._readableState.length}},readableObjectMode:{__proto__:null,enumerable:!1,get(){return this._readableState?this._readableState.objectMode:!1}},readableEncoding:{__proto__:null,enumerable:!1,get(){return this._readableState?this._readableState.encoding:null}},errored:{__proto__:null,enumerable:!1,get(){return this._readableState?this._readableState.errored:null}},closed:{__proto__:null,get(){return this._readableState?this._readableState.closed:!1}},destroyed:{__proto__:null,enumerable:!1,get(){return this._readableState?this._readableState.destroyed:!1},set(u){this._readableState&&(this._readableState.destroyed=u)}},readableEnded:{__proto__:null,enumerable:!1,get(){return this._readableState?this._readableState.endEmitted:!1}}}),o(Le.prototype,{pipesCount:{__proto__:null,get(){return this.pipes.length}},paused:{__proto__:null,get(){return this[P]!==!1},set(u){this[P]=!!u}}}),Y._fromList=lt;function lt(u,d){if(d.length===0)return null;let x;return d.objectMode?x=d.buffer.shift():!u||u>=d.length?(d.decoder?x=d.buffer.join(""):d.buffer.length===1?x=d.buffer.first():x=d.buffer.concat(d.length),d.buffer.clear()):x=d.buffer.consume(u,d.decoder),x}function Qt(u){const d=u._readableState;m("endReadable",d.endEmitted),d.endEmitted||(d.ended=!0,e.nextTick(Qe,d,u))}function Qe(u,d){if(m("endReadableNT",u.endEmitted,u.length),!u.errored&&!u.closeEmitted&&!u.endEmitted&&u.length===0){if(u.endEmitted=!0,d.emit("end"),d.writable&&d.allowHalfOpen===!1)e.nextTick(Sn,d);else if(u.autoDestroy){const x=d._writableState;(!x||x.autoDestroy&&(x.finished||x.writable===!1))&&d.destroy()}}}function Sn(u){u.writable&&!u.writableEnded&&!u.destroyed&&u.end()}Y.from=function(u,d){return K(Y,u,d)};let Xt;function Tr(){return Xt===void 0&&(Xt={}),Xt}return Y.fromWeb=function(u,d){return Tr().newStreamReadableFromReadableStream(u,d)},Y.toWeb=function(u,d){return Tr().newReadableStreamFromStreamReadable(u,d)},Y.wrap=function(u,d){var x,M;return new Y({objectMode:(x=(M=u.readableObjectMode)!==null&&M!==void 0?M:u.objectMode)!==null&&x!==void 0?x:!0,...d,destroy(U,ye){N.destroyer(u,U),ye(U)}}).wrap(u)},kn}var Wn,No;function Ni(){if(No)return Wn;No=1;const e=pt,{ArrayPrototypeSlice:t,Error:r,FunctionPrototypeSymbolHasInstance:n,ObjectDefineProperty:i,ObjectDefineProperties:o,ObjectSetPrototypeOf:s,StringPrototypeToLowerCase:a,Symbol:c,SymbolHasInstance:l}=he;Wn=I,I.WritableState=O;const{EventEmitter:g}=en(),p=Ci.Stream,{Buffer:E}=Pt,v=Kt,{addAbortSignal:R}=an,{getHighWaterMark:h,getDefaultHighWaterMark:y}=ln,{ERR_INVALID_ARG_TYPE:b,ERR_METHOD_NOT_IMPLEMENTED:T,ERR_MULTIPLE_CALLBACK:m,ERR_STREAM_CANNOT_PIPE:L,ERR_STREAM_DESTROYED:N,ERR_STREAM_ALREADY_FINISHED:$,ERR_STREAM_NULL_VALUES:H,ERR_STREAM_WRITE_AFTER_END:k,ERR_UNKNOWN_ENCODING:Q}=Ie.codes,{errorOrDestroy:Z}=v;s(I.prototype,p.prototype),s(I,p);function D(){}const j=c("kOnFinished");function O(_,S,C){typeof C!="boolean"&&(C=S instanceof ot()),this.objectMode=!!(_&&_.objectMode),C&&(this.objectMode=this.objectMode||!!(_&&_.writableObjectMode)),this.highWaterMark=_?h(this,_,"writableHighWaterMark",C):y(!1),this.finalCalled=!1,this.needDrain=!1,this.ending=!1,this.ended=!1,this.finished=!1,this.destroyed=!1;const W=!!(_&&_.decodeStrings===!1);this.decodeStrings=!W,this.defaultEncoding=_&&_.defaultEncoding||"utf8",this.length=0,this.writing=!1,this.corked=0,this.sync=!0,this.bufferProcessing=!1,this.onwrite=X.bind(void 0,S),this.writecb=null,this.writelen=0,this.afterWriteTickInfo=null,ee(this),this.pendingcb=0,this.constructed=!0,this.prefinished=!1,this.errorEmitted=!1,this.emitClose=!_||_.emitClose!==!1,this.autoDestroy=!_||_.autoDestroy!==!1,this.errored=null,this.closed=!1,this.closeEmitted=!1,this[j]=[]}function ee(_){_.buffered=[],_.bufferedIndex=0,_.allBuffers=!0,_.allNoop=!0}O.prototype.getBuffer=function(){return t(this.buffered,this.bufferedIndex)},i(O.prototype,"bufferedRequestCount",{__proto__:null,get(){return this.buffered.length-this.bufferedIndex}});function I(_){const S=this instanceof ot();if(!S&&!n(I,this))return new I(_);this._writableState=new O(_,this,S),_&&(typeof _.write=="function"&&(this._write=_.write),typeof _.writev=="function"&&(this._writev=_.writev),typeof _.destroy=="function"&&(this._destroy=_.destroy),typeof _.final=="function"&&(this._final=_.final),typeof _.construct=="function"&&(this._construct=_.construct),_.signal&&R(_.signal,this)),p.call(this,_),v.construct(this,()=>{const C=this._writableState;C.writing||te(this,C),Ee(this,C)})}i(I,l,{__proto__:null,value:function(_){return n(this,_)?!0:this!==I?!1:_&&_._writableState instanceof O}}),I.prototype.pipe=function(){Z(this,new L)};function P(_,S,C,W){const z=_._writableState;if(typeof C=="function")W=C,C=z.defaultEncoding;else{if(!C)C=z.defaultEncoding;else if(C!=="buffer"&&!E.isEncoding(C))throw new Q(C);typeof W!="function"&&(W=D)}if(S===null)throw new H;if(!z.objectMode)if(typeof S=="string")z.decodeStrings!==!1&&(S=E.from(S,C),C="buffer");else if(S instanceof E)C="buffer";else if(p._isUint8Array(S))S=p._uint8ArrayToBuffer(S),C="buffer";else throw new b("chunk",["string","Buffer","Uint8Array"],S);let oe;return z.ending?oe=new k:z.destroyed&&(oe=new N("write")),oe?(e.nextTick(W,oe),Z(_,oe,!0),oe):(z.pendingcb++,F(_,z,S,C,W))}I.prototype.write=function(_,S,C){return P(this,_,S,C)===!0},I.prototype.cork=function(){this._writableState.corked++},I.prototype.uncork=function(){const _=this._writableState;_.corked&&(_.corked--,_.writing||te(this,_))},I.prototype.setDefaultEncoding=function(S){if(typeof S=="string"&&(S=a(S)),!E.isEncoding(S))throw new Q(S);return this._writableState.defaultEncoding=S,this};function F(_,S,C,W,z){const oe=S.objectMode?1:C.length;S.length+=oe;const ce=S.length<S.highWaterMark;return ce||(S.needDrain=!0),S.writing||S.corked||S.errored||!S.constructed?(S.buffered.push({chunk:C,encoding:W,callback:z}),S.allBuffers&&W!=="buffer"&&(S.allBuffers=!1),S.allNoop&&z!==D&&(S.allNoop=!1)):(S.writelen=oe,S.writecb=z,S.writing=!0,S.sync=!0,_._write(C,W,S.onwrite),S.sync=!1),ce&&!S.errored&&!S.destroyed}function K(_,S,C,W,z,oe,ce){S.writelen=W,S.writecb=ce,S.writing=!0,S.sync=!0,S.destroyed?S.onwrite(new N("write")):C?_._writev(z,S.onwrite):_._write(z,oe,S.onwrite),S.sync=!1}function V(_,S,C,W){--S.pendingcb,W(C),B(S),Z(_,C)}function X(_,S){const C=_._writableState,W=C.sync,z=C.writecb;if(typeof z!="function"){Z(_,new m);return}C.writing=!1,C.writecb=null,C.length-=C.writelen,C.writelen=0,S?(S.stack,C.errored||(C.errored=S),_._readableState&&!_._readableState.errored&&(_._readableState.errored=S),W?e.nextTick(V,_,C,S,z):V(_,C,S,z)):(C.buffered.length>C.bufferedIndex&&te(_,C),W?C.afterWriteTickInfo!==null&&C.afterWriteTickInfo.cb===z?C.afterWriteTickInfo.count++:(C.afterWriteTickInfo={count:1,cb:z,stream:_,state:C},e.nextTick(J,C.afterWriteTickInfo)):le(_,C,1,z))}function J({stream:_,state:S,count:C,cb:W}){return S.afterWriteTickInfo=null,le(_,S,C,W)}function le(_,S,C,W){for(!S.ending&&!_.destroyed&&S.length===0&&S.needDrain&&(S.needDrain=!1,_.emit("drain"));C-- >0;)S.pendingcb--,W();S.destroyed&&B(S),Ee(_,S)}function B(_){if(_.writing)return;for(let z=_.bufferedIndex;z<_.buffered.length;++z){var S;const{chunk:oe,callback:ce}=_.buffered[z],ne=_.objectMode?1:oe.length;_.length-=ne,ce((S=_.errored)!==null&&S!==void 0?S:new N("write"))}const C=_[j].splice(0);for(let z=0;z<C.length;z++){var W;C[z]((W=_.errored)!==null&&W!==void 0?W:new N("end"))}ee(_)}function te(_,S){if(S.corked||S.bufferProcessing||S.destroyed||!S.constructed)return;const{buffered:C,bufferedIndex:W,objectMode:z}=S,oe=C.length-W;if(!oe)return;let ce=W;if(S.bufferProcessing=!0,oe>1&&_._writev){S.pendingcb-=oe-1;const ne=S.allNoop?D:Y=>{for(let me=ce;me<C.length;++me)C[me].callback(Y)},Le=S.allNoop&&ce===0?C:t(C,ce);Le.allBuffers=S.allBuffers,K(_,S,!0,S.length,Le,"",ne),ee(S)}else{do{const{chunk:ne,encoding:Le,callback:Y}=C[ce];C[ce++]=null;const me=z?1:ne.length;K(_,S,!1,me,ne,Le,Y)}while(ce<C.length&&!S.writing);ce===C.length?ee(S):ce>256?(C.splice(0,ce),S.bufferedIndex=0):S.bufferedIndex=ce}S.bufferProcessing=!1}I.prototype._write=function(_,S,C){if(this._writev)this._writev([{chunk:_,encoding:S}],C);else throw new T("_write()")},I.prototype._writev=null,I.prototype.end=function(_,S,C){const W=this._writableState;typeof _=="function"?(C=_,_=null,S=null):typeof S=="function"&&(C=S,S=null);let z;if(_!=null){const oe=P(this,_,S);oe instanceof r&&(z=oe)}return W.corked&&(W.corked=1,this.uncork()),z||(!W.errored&&!W.ending?(W.ending=!0,Ee(this,W,!0),W.ended=!0):W.finished?z=new $("end"):W.destroyed&&(z=new N("end"))),typeof C=="function"&&(z||W.finished?e.nextTick(C,z):W[j].push(C)),this};function ge(_){return _.ending&&!_.destroyed&&_.constructed&&_.length===0&&!_.errored&&_.buffered.length===0&&!_.finished&&!_.writing&&!_.errorEmitted&&!_.closeEmitted}function be(_,S){let C=!1;function W(z){if(C){Z(_,z??m());return}if(C=!0,S.pendingcb--,z){const oe=S[j].splice(0);for(let ce=0;ce<oe.length;ce++)oe[ce](z);Z(_,z,S.sync)}else ge(S)&&(S.prefinished=!0,_.emit("prefinish"),S.pendingcb++,e.nextTick(Se,_,S))}S.sync=!0,S.pendingcb++;try{_._final(W)}catch(z){W(z)}S.sync=!1}function we(_,S){!S.prefinished&&!S.finalCalled&&(typeof _._final=="function"&&!S.destroyed?(S.finalCalled=!0,be(_,S)):(S.prefinished=!0,_.emit("prefinish")))}function Ee(_,S,C){ge(S)&&(we(_,S),S.pendingcb===0&&(C?(S.pendingcb++,e.nextTick((W,z)=>{ge(z)?Se(W,z):z.pendingcb--},_,S)):ge(S)&&(S.pendingcb++,Se(_,S))))}function Se(_,S){S.pendingcb--,S.finished=!0;const C=S[j].splice(0);for(let W=0;W<C.length;W++)C[W]();if(_.emit("finish"),S.autoDestroy){const W=_._readableState;(!W||W.autoDestroy&&(W.endEmitted||W.readable===!1))&&_.destroy()}}o(I.prototype,{closed:{__proto__:null,get(){return this._writableState?this._writableState.closed:!1}},destroyed:{__proto__:null,get(){return this._writableState?this._writableState.destroyed:!1},set(_){this._writableState&&(this._writableState.destroyed=_)}},writable:{__proto__:null,get(){const _=this._writableState;return!!_&&_.writable!==!1&&!_.destroyed&&!_.errored&&!_.ending&&!_.ended},set(_){this._writableState&&(this._writableState.writable=!!_)}},writableFinished:{__proto__:null,get(){return this._writableState?this._writableState.finished:!1}},writableObjectMode:{__proto__:null,get(){return this._writableState?this._writableState.objectMode:!1}},writableBuffer:{__proto__:null,get(){return this._writableState&&this._writableState.getBuffer()}},writableEnded:{__proto__:null,get(){return this._writableState?this._writableState.ending:!1}},writableNeedDrain:{__proto__:null,get(){const _=this._writableState;return _?!_.destroyed&&!_.ending&&_.needDrain:!1}},writableHighWaterMark:{__proto__:null,get(){return this._writableState&&this._writableState.highWaterMark}},writableCorked:{__proto__:null,get(){return this._writableState?this._writableState.corked:0}},writableLength:{__proto__:null,get(){return this._writableState&&this._writableState.length}},errored:{__proto__:null,enumerable:!1,get(){return this._writableState?this._writableState.errored:null}},writableAborted:{__proto__:null,enumerable:!1,get:function(){return!!(this._writableState.writable!==!1&&(this._writableState.destroyed||this._writableState.errored)&&!this._writableState.finished)}}});const Te=v.destroy;I.prototype.destroy=function(_,S){const C=this._writableState;return!C.destroyed&&(C.bufferedIndex<C.buffered.length||C[j].length)&&e.nextTick(B,C),Te.call(this,_,S),this},I.prototype._undestroy=v.undestroy,I.prototype._destroy=function(_,S){S(_)},I.prototype[g.captureRejectionSymbol]=function(_){this.destroy(_)};let We;function Ae(){return We===void 0&&(We={}),We}return I.fromWeb=function(_,S){return Ae().newStreamWritableFromWritableStream(_,S)},I.toWeb=function(_){return Ae().newWritableStreamFromStreamWritable(_)},Wn}var Un,Po;function hc(){if(Po)return Un;Po=1;const e=pt,t=Pt,{isReadable:r,isWritable:n,isIterable:i,isNodeStream:o,isReadableNodeStream:s,isWritableNodeStream:a,isDuplexNodeStream:c,isReadableStream:l,isWritableStream:g}=at,p=bt,{AbortError:E,codes:{ERR_INVALID_ARG_TYPE:v,ERR_INVALID_RETURN_VALUE:R}}=Ie,{destroyer:h}=Kt,y=ot(),b=un(),T=Ni(),{createDeferredPromise:m}=Pe,L=Js,N=globalThis.Blob||t.Blob,$=typeof N<"u"?function(O){return O instanceof N}:function(O){return!1},H=globalThis.AbortController||dr().AbortController,{FunctionPrototypeCall:k}=he;class Q extends y{constructor(O){super(O),(O==null?void 0:O.readable)===!1&&(this._readableState.readable=!1,this._readableState.ended=!0,this._readableState.endEmitted=!0),(O==null?void 0:O.writable)===!1&&(this._writableState.writable=!1,this._writableState.ending=!0,this._writableState.ended=!0,this._writableState.finished=!0)}}Un=function j(O,ee){if(c(O))return O;if(s(O))return D({readable:O});if(a(O))return D({writable:O});if(o(O))return D({writable:!1,readable:!1});if(l(O))return D({readable:b.fromWeb(O)});if(g(O))return D({writable:T.fromWeb(O)});if(typeof O=="function"){const{value:P,write:F,final:K,destroy:V}=Z(O);if(i(P))return L(Q,P,{objectMode:!0,write:F,final:K,destroy:V});const X=P==null?void 0:P.then;if(typeof X=="function"){let J;const le=k(X,P,B=>{if(B!=null)throw new R("nully","body",B)},B=>{h(J,B)});return J=new Q({objectMode:!0,readable:!1,write:F,final(B){K(async()=>{try{await le,e.nextTick(B,null)}catch(te){e.nextTick(B,te)}})},destroy:V})}throw new R("Iterable, AsyncIterable or AsyncFunction",ee,P)}if($(O))return j(O.arrayBuffer());if(i(O))return L(Q,O,{objectMode:!0,writable:!1});if(l(O==null?void 0:O.readable)&&g(O==null?void 0:O.writable))return Q.fromWeb(O);if(typeof(O==null?void 0:O.writable)=="object"||typeof(O==null?void 0:O.readable)=="object"){const P=O!=null&&O.readable?s(O==null?void 0:O.readable)?O==null?void 0:O.readable:j(O.readable):void 0,F=O!=null&&O.writable?a(O==null?void 0:O.writable)?O==null?void 0:O.writable:j(O.writable):void 0;return D({readable:P,writable:F})}const I=O==null?void 0:O.then;if(typeof I=="function"){let P;return k(I,O,F=>{F!=null&&P.push(F),P.push(null)},F=>{h(P,F)}),P=new Q({objectMode:!0,writable:!1,read(){}})}throw new v(ee,["Blob","ReadableStream","WritableStream","Stream","Iterable","AsyncIterable","Function","{ readable, writable } pair","Promise"],O)};function Z(j){let{promise:O,resolve:ee}=m();const I=new H,P=I.signal;return{value:j(async function*(){for(;;){const K=O;O=null;const{chunk:V,done:X,cb:J}=await K;if(e.nextTick(J),X)return;if(P.aborted)throw new E(void 0,{cause:P.reason});({promise:O,resolve:ee}=m()),yield V}}(),{signal:P}),write(K,V,X){const J=ee;ee=null,J({chunk:K,done:!1,cb:X})},final(K){const V=ee;ee=null,V({done:!0,cb:K})},destroy(K,V){I.abort(),V(K)}}}function D(j){const O=j.readable&&typeof j.readable.read!="function"?b.wrap(j.readable):j.readable,ee=j.writable;let I=!!r(O),P=!!n(ee),F,K,V,X,J;function le(B){const te=X;X=null,te?te(B):B&&J.destroy(B)}return J=new Q({readableObjectMode:!!(O!=null&&O.readableObjectMode),writableObjectMode:!!(ee!=null&&ee.writableObjectMode),readable:I,writable:P}),P&&(p(ee,B=>{P=!1,B&&h(O,B),le(B)}),J._write=function(B,te,ge){ee.write(B,te)?ge():F=ge},J._final=function(B){ee.end(),K=B},ee.on("drain",function(){if(F){const B=F;F=null,B()}}),ee.on("finish",function(){if(K){const B=K;K=null,B()}})),I&&(p(O,B=>{I=!1,B&&h(O,B),le(B)}),O.on("readable",function(){if(V){const B=V;V=null,B()}}),O.on("end",function(){J.push(null)}),J._read=function(){for(;;){const B=O.read();if(B===null){V=J._read;return}if(!J.push(B))return}}),J._destroy=function(B,te){!B&&X!==null&&(B=new E),V=null,F=null,K=null,X===null?te(B):(X=te,h(ee,B),h(O,B))},J}return Un}var Fn,Lo;function ot(){if(Lo)return Fn;Lo=1;const{ObjectDefineProperties:e,ObjectGetOwnPropertyDescriptor:t,ObjectKeys:r,ObjectSetPrototypeOf:n}=he;Fn=s;const i=un(),o=Ni();n(s.prototype,i.prototype),n(s,i);{const g=r(o.prototype);for(let p=0;p<g.length;p++){const E=g[p];s.prototype[E]||(s.prototype[E]=o.prototype[E])}}function s(g){if(!(this instanceof s))return new s(g);i.call(this,g),o.call(this,g),g?(this.allowHalfOpen=g.allowHalfOpen!==!1,g.readable===!1&&(this._readableState.readable=!1,this._readableState.ended=!0,this._readableState.endEmitted=!0),g.writable===!1&&(this._writableState.writable=!1,this._writableState.ending=!0,this._writableState.ended=!0,this._writableState.finished=!0)):this.allowHalfOpen=!0}e(s.prototype,{writable:{__proto__:null,...t(o.prototype,"writable")},writableHighWaterMark:{__proto__:null,...t(o.prototype,"writableHighWaterMark")},writableObjectMode:{__proto__:null,...t(o.prototype,"writableObjectMode")},writableBuffer:{__proto__:null,...t(o.prototype,"writableBuffer")},writableLength:{__proto__:null,...t(o.prototype,"writableLength")},writableFinished:{__proto__:null,...t(o.prototype,"writableFinished")},writableCorked:{__proto__:null,...t(o.prototype,"writableCorked")},writableEnded:{__proto__:null,...t(o.prototype,"writableEnded")},writableNeedDrain:{__proto__:null,...t(o.prototype,"writableNeedDrain")},destroyed:{__proto__:null,get(){return this._readableState===void 0||this._writableState===void 0?!1:this._readableState.destroyed&&this._writableState.destroyed},set(g){this._readableState&&this._writableState&&(this._readableState.destroyed=g,this._writableState.destroyed=g)}}});let a;function c(){return a===void 0&&(a={}),a}s.fromWeb=function(g,p){return c().newStreamDuplexFromReadableWritablePair(g,p)},s.toWeb=function(g){return c().newReadableWritablePairFromDuplex(g)};let l;return s.from=function(g){return l||(l=hc()),l(g,"body")},Fn}const{ObjectSetPrototypeOf:Qs,Symbol:gc}=he;var Xs=st;const{ERR_METHOD_NOT_IMPLEMENTED:pc}=Ie.codes,Pi=ot(),{getHighWaterMark:bc}=ln;Qs(st.prototype,Pi.prototype);Qs(st,Pi);const ur=gc("kCallback");function st(e){if(!(this instanceof st))return new st(e);const t=e?bc(this,e,"readableHighWaterMark",!0):null;t===0&&(e={...e,highWaterMark:null,readableHighWaterMark:t,writableHighWaterMark:e.writableHighWaterMark||0}),Pi.call(this,e),this._readableState.sync=!1,this[ur]=null,e&&(typeof e.transform=="function"&&(this._transform=e.transform),typeof e.flush=="function"&&(this._flush=e.flush)),this.on("prefinish",wc)}function di(e){typeof this._flush=="function"&&!this.destroyed?this._flush((t,r)=>{if(t){e?e(t):this.destroy(t);return}r!=null&&this.push(r),this.push(null),e&&e()}):(this.push(null),e&&e())}function wc(){this._final!==di&&di.call(this)}st.prototype._final=di;st.prototype._transform=function(e,t,r){throw new pc("_transform()")};st.prototype._write=function(e,t,r){const n=this._readableState,i=this._writableState,o=n.length;this._transform(e,t,(s,a)=>{if(s){r(s);return}a!=null&&this.push(a),i.ended||o===n.length||n.length<n.highWaterMark?r():this[ur]=r})};st.prototype._read=function(){if(this[ur]){const e=this[ur];this[ur]=null,e()}};const{ObjectSetPrototypeOf:ea}=he;var ta=qt;const Li=Xs;ea(qt.prototype,Li.prototype);ea(qt,Li);function qt(e){if(!(this instanceof qt))return new qt(e);Li.call(this,e)}qt.prototype._transform=function(e,t,r){r(null,e)};const ar=pt,{ArrayIsArray:yc,Promise:_c,SymbolAsyncIterator:mc,SymbolDispose:vc}=he,Kr=bt,{once:Ec}=Pe,Sc=Kt,xo=ot(),{aggregateTwoErrors:Ac,codes:{ERR_INVALID_ARG_TYPE:hi,ERR_INVALID_RETURN_VALUE:qn,ERR_MISSING_ARGS:Rc,ERR_STREAM_DESTROYED:Ic,ERR_STREAM_PREMATURE_CLOSE:Tc},AbortError:Oc}=Ie,{validateFunction:Cc,validateAbortSignal:Nc}=br,{isIterable:Et,isReadable:Hn,isReadableNodeStream:Hr,isNodeStream:Mo,isTransformStream:jt,isWebStream:Pc,isReadableStream:zn,isReadableFinished:Lc}=at,xc=globalThis.AbortController||dr().AbortController;let Gn,Vn,Kn;function $o(e,t,r){let n=!1;e.on("close",()=>{n=!0});const i=Kr(e,{readable:t,writable:r},o=>{n=!o});return{destroy:o=>{n||(n=!0,Sc.destroyer(e,o||new Ic("pipe")))},cleanup:i}}function Mc(e){return Cc(e[e.length-1],"streams[stream.length - 1]"),e.pop()}function Yn(e){if(Et(e))return e;if(Hr(e))return $c(e);throw new hi("val",["Readable","Iterable","AsyncIterable"],e)}async function*$c(e){Vn||(Vn=un()),yield*Vn.prototype[mc].call(e)}async function Dr(e,t,r,{end:n}){let i,o=null;const s=l=>{if(l&&(i=l),o){const g=o;o=null,g()}},a=()=>new _c((l,g)=>{i?g(i):o=()=>{i?g(i):l()}});t.on("drain",s);const c=Kr(t,{readable:!1},s);try{t.writableNeedDrain&&await a();for await(const l of e)t.write(l)||await a();n&&(t.end(),await a()),r()}catch(l){r(i!==l?Ac(i,l):l)}finally{c(),t.off("drain",s)}}async function Zn(e,t,r,{end:n}){jt(t)&&(t=t.writable);const i=t.getWriter();try{for await(const o of e)await i.ready,i.write(o).catch(()=>{});await i.ready,n&&await i.close(),r()}catch(o){try{await i.abort(o),r(o)}catch(s){r(s)}}}function Bc(...e){return ra(e,Ec(Mc(e)))}function ra(e,t,r){if(e.length===1&&yc(e[0])&&(e=e[0]),e.length<2)throw new Rc("streams");const n=new xc,i=n.signal,o=r==null?void 0:r.signal,s=[];Nc(o,"options.signal");function a(){R(new Oc)}Kn=Kn||Pe.addAbortListener;let c;o&&(c=Kn(o,a));let l,g;const p=[];let E=0;function v(T){R(T,--E===0)}function R(T,m){var L;if(T&&(!l||l.code==="ERR_STREAM_PREMATURE_CLOSE")&&(l=T),!(!l&&!m)){for(;p.length;)p.shift()(l);(L=c)===null||L===void 0||L[vc](),n.abort(),m&&(l||s.forEach(N=>N()),ar.nextTick(t,l,g))}}let h;for(let T=0;T<e.length;T++){const m=e[T],L=T<e.length-1,N=T>0,$=L||(r==null?void 0:r.end)!==!1,H=T===e.length-1;if(Mo(m)){let k=function(Q){Q&&Q.name!=="AbortError"&&Q.code!=="ERR_STREAM_PREMATURE_CLOSE"&&v(Q)};if($){const{destroy:Q,cleanup:Z}=$o(m,L,N);p.push(Q),Hn(m)&&H&&s.push(Z)}m.on("error",k),Hn(m)&&H&&s.push(()=>{m.removeListener("error",k)})}if(T===0)if(typeof m=="function"){if(h=m({signal:i}),!Et(h))throw new qn("Iterable, AsyncIterable or Stream","source",h)}else Et(m)||Hr(m)||jt(m)?h=m:h=xo.from(m);else if(typeof m=="function"){if(jt(h)){var y;h=Yn((y=h)===null||y===void 0?void 0:y.readable)}else h=Yn(h);if(h=m(h,{signal:i}),L){if(!Et(h,!0))throw new qn("AsyncIterable",`transform[${T-1}]`,h)}else{var b;Gn||(Gn=ta);const k=new Gn({objectMode:!0}),Q=(b=h)===null||b===void 0?void 0:b.then;if(typeof Q=="function")E++,Q.call(h,j=>{g=j,j!=null&&k.write(j),$&&k.end(),ar.nextTick(v)},j=>{k.destroy(j),ar.nextTick(v,j)});else if(Et(h,!0))E++,Dr(h,k,v,{end:$});else if(zn(h)||jt(h)){const j=h.readable||h;E++,Dr(j,k,v,{end:$})}else throw new qn("AsyncIterable or Promise","destination",h);h=k;const{destroy:Z,cleanup:D}=$o(h,!1,!0);p.push(Z),H&&s.push(D)}}else if(Mo(m)){if(Hr(h)){E+=2;const k=Dc(h,m,v,{end:$});Hn(m)&&H&&s.push(k)}else if(jt(h)||zn(h)){const k=h.readable||h;E++,Dr(k,m,v,{end:$})}else if(Et(h))E++,Dr(h,m,v,{end:$});else throw new hi("val",["Readable","Iterable","AsyncIterable","ReadableStream","TransformStream"],h);h=m}else if(Pc(m)){if(Hr(h))E++,Zn(Yn(h),m,v,{end:$});else if(zn(h)||Et(h))E++,Zn(h,m,v,{end:$});else if(jt(h))E++,Zn(h.readable,m,v,{end:$});else throw new hi("val",["Readable","Iterable","AsyncIterable","ReadableStream","TransformStream"],h);h=m}else h=xo.from(m)}return(i!=null&&i.aborted||o!=null&&o.aborted)&&ar.nextTick(a),h}function Dc(e,t,r,{end:n}){let i=!1;if(t.on("close",()=>{i||r(new Tc)}),e.pipe(t,{end:!1}),n){let o=function(){i=!0,t.end()};Lc(e)?ar.nextTick(o):e.once("end",o)}else r();return Kr(e,{readable:!0,writable:!1},o=>{const s=e._readableState;o&&o.code==="ERR_STREAM_PREMATURE_CLOSE"&&s&&s.ended&&!s.errored&&!s.errorEmitted?e.once("end",r).once("error",r):r(o)}),Kr(t,{readable:!1,writable:!0},r)}var xi={pipelineImpl:ra,pipeline:Bc};const{pipeline:jc}=xi,jr=ot(),{destroyer:kc}=Kt,{isNodeStream:kr,isReadable:Bo,isWritable:Do,isWebStream:Jn,isTransformStream:vt,isWritableStream:jo,isReadableStream:ko}=at,{AbortError:Wc,codes:{ERR_INVALID_ARG_VALUE:Wo,ERR_MISSING_ARGS:Uc}}=Ie,Fc=bt;var na=function(...t){if(t.length===0)throw new Uc("streams");if(t.length===1)return jr.from(t[0]);const r=[...t];if(typeof t[0]=="function"&&(t[0]=jr.from(t[0])),typeof t[t.length-1]=="function"){const v=t.length-1;t[v]=jr.from(t[v])}for(let v=0;v<t.length;++v)if(!(!kr(t[v])&&!Jn(t[v]))){if(v<t.length-1&&!(Bo(t[v])||ko(t[v])||vt(t[v])))throw new Wo(`streams[${v}]`,r[v],"must be readable");if(v>0&&!(Do(t[v])||jo(t[v])||vt(t[v])))throw new Wo(`streams[${v}]`,r[v],"must be writable")}let n,i,o,s,a;function c(v){const R=s;s=null,R?R(v):v?a.destroy(v):!E&&!p&&a.destroy()}const l=t[0],g=jc(t,c),p=!!(Do(l)||jo(l)||vt(l)),E=!!(Bo(g)||ko(g)||vt(g));if(a=new jr({writableObjectMode:!!(l!=null&&l.writableObjectMode),readableObjectMode:!!(g!=null&&g.readableObjectMode),writable:p,readable:E}),p){if(kr(l))a._write=function(R,h,y){l.write(R,h)?y():n=y},a._final=function(R){l.end(),i=R},l.on("drain",function(){if(n){const R=n;n=null,R()}});else if(Jn(l)){const h=(vt(l)?l.writable:l).getWriter();a._write=async function(y,b,T){try{await h.ready,h.write(y).catch(()=>{}),T()}catch(m){T(m)}},a._final=async function(y){try{await h.ready,h.close().catch(()=>{}),i=y}catch(b){y(b)}}}const v=vt(g)?g.readable:g;Fc(v,()=>{if(i){const R=i;i=null,R()}})}if(E){if(kr(g))g.on("readable",function(){if(o){const v=o;o=null,v()}}),g.on("end",function(){a.push(null)}),a._read=function(){for(;;){const v=g.read();if(v===null){o=a._read;return}if(!a.push(v))return}};else if(Jn(g)){const R=(vt(g)?g.readable:g).getReader();a._read=async function(){for(;;)try{const{value:h,done:y}=await R.read();if(!a.push(h))return;if(y){a.push(null);return}}catch{return}}}}return a._destroy=function(v,R){!v&&s!==null&&(v=new Wc),o=null,n=null,i=null,s===null?R(v):(s=R,kr(g)&&kc(g,v))},a};const qc=globalThis.AbortController||dr().AbortController,{codes:{ERR_INVALID_ARG_VALUE:Hc,ERR_INVALID_ARG_TYPE:wr,ERR_MISSING_ARGS:zc,ERR_OUT_OF_RANGE:Gc},AbortError:Ye}=Ie,{validateAbortSignal:xt,validateInteger:Uo,validateObject:Mt}=br,Vc=he.Symbol("kWeak"),Kc=he.Symbol("kResistStopPropagation"),{finished:Yc}=bt,Zc=na,{addAbortSignalNoValidate:Jc}=an,{isWritable:Qc,isNodeStream:Xc}=at,{deprecate:ef}=Pe,{ArrayPrototypePush:tf,Boolean:rf,MathFloor:Fo,Number:nf,NumberIsNaN:of,Promise:qo,PromiseReject:Ho,PromiseResolve:sf,PromisePrototypeThen:zo,Symbol:ia}=he,Yr=ia("kEmpty"),Go=ia("kEof");function af(e,t){if(t!=null&&Mt(t,"options"),(t==null?void 0:t.signal)!=null&&xt(t.signal,"options.signal"),Xc(e)&&!Qc(e))throw new Hc("stream",e,"must be writable");const r=Zc(this,e);return t!=null&&t.signal&&Jc(t.signal,r),r}function cn(e,t){if(typeof e!="function")throw new wr("fn",["Function","AsyncFunction"],e);t!=null&&Mt(t,"options"),(t==null?void 0:t.signal)!=null&&xt(t.signal,"options.signal");let r=1;(t==null?void 0:t.concurrency)!=null&&(r=Fo(t.concurrency));let n=r-1;return(t==null?void 0:t.highWaterMark)!=null&&(n=Fo(t.highWaterMark)),Uo(r,"options.concurrency",1),Uo(n,"options.highWaterMark",0),n+=r,(async function*(){const o=Pe.AbortSignalAny([t==null?void 0:t.signal].filter(rf)),s=this,a=[],c={signal:o};let l,g,p=!1,E=0;function v(){p=!0,R()}function R(){E-=1,h()}function h(){g&&!p&&E<r&&a.length<n&&(g(),g=null)}async function y(){try{for await(let b of s){if(p)return;if(o.aborted)throw new Ye;try{if(b=e(b,c),b===Yr)continue;b=sf(b)}catch(T){b=Ho(T)}E+=1,zo(b,R,v),a.push(b),l&&(l(),l=null),!p&&(a.length>=n||E>=r)&&await new qo(T=>{g=T})}a.push(Go)}catch(b){const T=Ho(b);zo(T,R,v),a.push(T)}finally{p=!0,l&&(l(),l=null)}}y();try{for(;;){for(;a.length>0;){const b=await a[0];if(b===Go)return;if(o.aborted)throw new Ye;b!==Yr&&(yield b),a.shift(),h()}await new qo(b=>{l=b})}}finally{p=!0,g&&(g(),g=null)}}).call(this)}function lf(e=void 0){return e!=null&&Mt(e,"options"),(e==null?void 0:e.signal)!=null&&xt(e.signal,"options.signal"),(async function*(){let r=0;for await(const i of this){var n;if(e!=null&&(n=e.signal)!==null&&n!==void 0&&n.aborted)throw new Ye({cause:e.signal.reason});yield[r++,i]}}).call(this)}async function oa(e,t=void 0){for await(const r of Mi.call(this,e,t))return!0;return!1}async function uf(e,t=void 0){if(typeof e!="function")throw new wr("fn",["Function","AsyncFunction"],e);return!await oa.call(this,async(...r)=>!await e(...r),t)}async function cf(e,t){for await(const r of Mi.call(this,e,t))return r}async function ff(e,t){if(typeof e!="function")throw new wr("fn",["Function","AsyncFunction"],e);async function r(n,i){return await e(n,i),Yr}for await(const n of cn.call(this,r,t));}function Mi(e,t){if(typeof e!="function")throw new wr("fn",["Function","AsyncFunction"],e);async function r(n,i){return await e(n,i)?n:Yr}return cn.call(this,r,t)}class df extends zc{constructor(){super("reduce"),this.message="Reduce of an empty stream requires an initial value"}}async function hf(e,t,r){var n;if(typeof e!="function")throw new wr("reducer",["Function","AsyncFunction"],e);r!=null&&Mt(r,"options"),(r==null?void 0:r.signal)!=null&&xt(r.signal,"options.signal");let i=arguments.length>1;if(r!=null&&(n=r.signal)!==null&&n!==void 0&&n.aborted){const l=new Ye(void 0,{cause:r.signal.reason});throw this.once("error",()=>{}),await Yc(this.destroy(l)),l}const o=new qc,s=o.signal;if(r!=null&&r.signal){const l={once:!0,[Vc]:this,[Kc]:!0};r.signal.addEventListener("abort",()=>o.abort(),l)}let a=!1;try{for await(const l of this){var c;if(a=!0,r!=null&&(c=r.signal)!==null&&c!==void 0&&c.aborted)throw new Ye;i?t=await e(t,l,{signal:s}):(t=l,i=!0)}if(!a&&!i)throw new df}finally{o.abort()}return t}async function gf(e){e!=null&&Mt(e,"options"),(e==null?void 0:e.signal)!=null&&xt(e.signal,"options.signal");const t=[];for await(const n of this){var r;if(e!=null&&(r=e.signal)!==null&&r!==void 0&&r.aborted)throw new Ye(void 0,{cause:e.signal.reason});tf(t,n)}return t}function pf(e,t){const r=cn.call(this,e,t);return(async function*(){for await(const i of r)yield*i}).call(this)}function sa(e){if(e=nf(e),of(e))return 0;if(e<0)throw new Gc("number",">= 0",e);return e}function bf(e,t=void 0){return t!=null&&Mt(t,"options"),(t==null?void 0:t.signal)!=null&&xt(t.signal,"options.signal"),e=sa(e),(async function*(){var n;if(t!=null&&(n=t.signal)!==null&&n!==void 0&&n.aborted)throw new Ye;for await(const o of this){var i;if(t!=null&&(i=t.signal)!==null&&i!==void 0&&i.aborted)throw new Ye;e--<=0&&(yield o)}}).call(this)}function wf(e,t=void 0){return t!=null&&Mt(t,"options"),(t==null?void 0:t.signal)!=null&&xt(t.signal,"options.signal"),e=sa(e),(async function*(){var n;if(t!=null&&(n=t.signal)!==null&&n!==void 0&&n.aborted)throw new Ye;for await(const o of this){var i;if(t!=null&&(i=t.signal)!==null&&i!==void 0&&i.aborted)throw new Ye;if(e-- >0&&(yield o),e<=0)return}}).call(this)}Ri.streamReturningOperators={asIndexedPairs:ef(lf,"readable.asIndexedPairs will be removed in a future version."),drop:bf,filter:Mi,flatMap:pf,map:cn,take:wf,compose:af};Ri.promiseReturningOperators={every:uf,forEach:ff,reduce:hf,toArray:gf,some:oa,find:cf};var Qn,Vo;function aa(){if(Vo)return Qn;Vo=1;const{ArrayPrototypePop:e,Promise:t}=he,{isIterable:r,isNodeStream:n,isWebStream:i}=at,{pipelineImpl:o}=xi,{finished:s}=bt;la();function a(...c){return new t((l,g)=>{let p,E;const v=c[c.length-1];if(v&&typeof v=="object"&&!n(v)&&!r(v)&&!i(v)){const R=e(c);p=R.signal,E=R.end}o(c,(R,h)=>{R?g(R):l(h)},{signal:p,end:E})})}return Qn={finished:s,pipeline:a},Qn}var Ko;function la(){if(Ko)return $n.exports;Ko=1;const{Buffer:e}=Pt,{ObjectDefineProperty:t,ObjectKeys:r,ReflectApply:n}=he,{promisify:{custom:i}}=Pe,{streamReturningOperators:o,promiseReturningOperators:s}=Ri,{codes:{ERR_ILLEGAL_CONSTRUCTOR:a}}=Ie,c=na,{setDefaultHighWaterMark:l,getDefaultHighWaterMark:g}=ln,{pipeline:p}=xi,{destroyer:E}=Kt,v=bt,R=aa(),h=at,y=$n.exports=Ci.Stream;y.isDestroyed=h.isDestroyed,y.isDisturbed=h.isDisturbed,y.isErrored=h.isErrored,y.isReadable=h.isReadable,y.isWritable=h.isWritable,y.Readable=un();for(const T of r(o)){let L=function(...N){if(new.target)throw a();return y.Readable.from(n(m,this,N))};const m=o[T];t(L,"name",{__proto__:null,value:m.name}),t(L,"length",{__proto__:null,value:m.length}),t(y.Readable.prototype,T,{__proto__:null,value:L,enumerable:!1,configurable:!0,writable:!0})}for(const T of r(s)){let L=function(...N){if(new.target)throw a();return n(m,this,N)};const m=s[T];t(L,"name",{__proto__:null,value:m.name}),t(L,"length",{__proto__:null,value:m.length}),t(y.Readable.prototype,T,{__proto__:null,value:L,enumerable:!1,configurable:!0,writable:!0})}y.Writable=Ni(),y.Duplex=ot(),y.Transform=Xs,y.PassThrough=ta,y.pipeline=p;const{addAbortSignal:b}=an;return y.addAbortSignal=b,y.finished=v,y.destroy=E,y.compose=c,y.setDefaultHighWaterMark=l,y.getDefaultHighWaterMark=g,t(y,"promises",{__proto__:null,configurable:!0,enumerable:!0,get(){return R}}),t(p,i,{__proto__:null,enumerable:!0,get(){return R.pipeline}}),t(v,i,{__proto__:null,enumerable:!0,get(){return R.finished}}),y.Stream=y,y._isUint8Array=function(m){return m instanceof Uint8Array},y._uint8ArrayToBuffer=function(m){return e.from(m.buffer,m.byteOffset,m.byteLength)},$n.exports}(function(e){const t=la(),r=aa(),n=t.Readable.destroy;e.exports=t.Readable,e.exports._uint8ArrayToBuffer=t._uint8ArrayToBuffer,e.exports._isUint8Array=t._isUint8Array,e.exports.isDisturbed=t.isDisturbed,e.exports.isErrored=t.isErrored,e.exports.isReadable=t.isReadable,e.exports.Readable=t.Readable,e.exports.Writable=t.Writable,e.exports.Duplex=t.Duplex,e.exports.Transform=t.Transform,e.exports.PassThrough=t.PassThrough,e.exports.addAbortSignal=t.addAbortSignal,e.exports.finished=t.finished,e.exports.destroy=t.destroy,e.exports.destroy=n,e.exports.pipeline=t.pipeline,e.exports.compose=t.compose,Object.defineProperty(t,"promises",{configurable:!0,enumerable:!0,get(){return r}}),e.exports.Stream=t.Stream,e.exports.default=e.exports})(Rs);var fn=Rs.exports,ua=hr;hr.default=hr;hr.stable=da;hr.stableStringify=da;var Zr="[...]",ca="[Circular]",Ot=[],At=[];function fa(){return{depthLimit:Number.MAX_SAFE_INTEGER,edgesLimit:Number.MAX_SAFE_INTEGER}}function hr(e,t,r,n){typeof n>"u"&&(n=fa()),gi(e,"",0,[],void 0,0,n);var i;try{At.length===0?i=JSON.stringify(e,t,r):i=JSON.stringify(e,ha(t),r)}catch{return JSON.stringify("[unable to serialize, circular reference is too complex to analyze]")}finally{for(;Ot.length!==0;){var o=Ot.pop();o.length===4?Object.defineProperty(o[0],o[1],o[3]):o[0][o[1]]=o[2]}}return i}function Wt(e,t,r,n){var i=Object.getOwnPropertyDescriptor(n,r);i.get!==void 0?i.configurable?(Object.defineProperty(n,r,{value:e}),Ot.push([n,r,t,i])):At.push([t,r,e]):(n[r]=e,Ot.push([n,r,t]))}function gi(e,t,r,n,i,o,s){o+=1;var a;if(typeof e=="object"&&e!==null){for(a=0;a<n.length;a++)if(n[a]===e){Wt(ca,e,t,i);return}if(typeof s.depthLimit<"u"&&o>s.depthLimit){Wt(Zr,e,t,i);return}if(typeof s.edgesLimit<"u"&&r+1>s.edgesLimit){Wt(Zr,e,t,i);return}if(n.push(e),Array.isArray(e))for(a=0;a<e.length;a++)gi(e[a],a,a,n,e,o,s);else{var c=Object.keys(e);for(a=0;a<c.length;a++){var l=c[a];gi(e[l],l,a,n,e,o,s)}}n.pop()}}function yf(e,t){return e<t?-1:e>t?1:0}function da(e,t,r,n){typeof n>"u"&&(n=fa());var i=pi(e,"",0,[],void 0,0,n)||e,o;try{At.length===0?o=JSON.stringify(i,t,r):o=JSON.stringify(i,ha(t),r)}catch{return JSON.stringify("[unable to serialize, circular reference is too complex to analyze]")}finally{for(;Ot.length!==0;){var s=Ot.pop();s.length===4?Object.defineProperty(s[0],s[1],s[3]):s[0][s[1]]=s[2]}}return o}function pi(e,t,r,n,i,o,s){o+=1;var a;if(typeof e=="object"&&e!==null){for(a=0;a<n.length;a++)if(n[a]===e){Wt(ca,e,t,i);return}try{if(typeof e.toJSON=="function")return}catch{return}if(typeof s.depthLimit<"u"&&o>s.depthLimit){Wt(Zr,e,t,i);return}if(typeof s.edgesLimit<"u"&&r+1>s.edgesLimit){Wt(Zr,e,t,i);return}if(n.push(e),Array.isArray(e))for(a=0;a<e.length;a++)pi(e[a],a,a,n,e,o,s);else{var c={},l=Object.keys(e).sort(yf);for(a=0;a<l.length;a++){var g=l[a];pi(e[g],g,a,n,e,o,s),c[g]=e[g]}if(typeof i<"u")Ot.push([i,t,e]),i[t]=c;else return c}n.pop()}}function ha(e){return e=typeof e<"u"?e:function(t,r){return r},function(t,r){if(At.length>0)for(var n=0;n<At.length;n++){var i=At[n];if(i[1]===t&&i[0]===r){r=i[2],At.splice(n,1);break}}return e.call(this,t,r)}}const _f=Vt(ua);var $i={exports:{}},mf=ga;function ga(e,t){if(e&&t)return ga(e)(t);if(typeof e!="function")throw new TypeError("need wrapper function");return Object.keys(e).forEach(function(n){r[n]=e[n]}),r;function r(){for(var n=new Array(arguments.length),i=0;i<n.length;i++)n[i]=arguments[i];var o=e.apply(this,n),s=n[n.length-1];return typeof o=="function"&&o!==s&&Object.keys(s).forEach(function(a){o[a]=s[a]}),o}}var pa=mf;$i.exports=pa(zr);$i.exports.strict=pa(ba);zr.proto=zr(function(){Object.defineProperty(Function.prototype,"once",{value:function(){return zr(this)},configurable:!0}),Object.defineProperty(Function.prototype,"onceStrict",{value:function(){return ba(this)},configurable:!0})});function zr(e){var t=function(){return t.called?t.value:(t.called=!0,t.value=e.apply(this,arguments))};return t.called=!1,t}function ba(e){var t=function(){if(t.called)throw new Error(t.onceError);return t.called=!0,t.value=e.apply(this,arguments)},r=e.name||"Function wrapped with `once`";return t.onceError=r+" shouldn't be called more than once",t.called=!1,t}var Bi=$i.exports;const vf=Vt(Bi);var Yo={env:{}},Ef=Bi,Sf=function(){},Af=globalThis.Bare?queueMicrotask:Yo.nextTick.bind(Yo),Rf=function(e){return e.setHeader&&typeof e.abort=="function"},If=function(e){return e.stdio&&Array.isArray(e.stdio)&&e.stdio.length===3},wa=function(e,t,r){if(typeof t=="function")return wa(e,null,t);t||(t={}),r=Ef(r||Sf);var n=e._writableState,i=e._readableState,o=t.readable||t.readable!==!1&&e.readable,s=t.writable||t.writable!==!1&&e.writable,a=!1,c=function(){e.writable||l()},l=function(){s=!1,o||r.call(e)},g=function(){o=!1,s||r.call(e)},p=function(y){r.call(e,y?new Error("exited with error code: "+y):null)},E=function(y){r.call(e,y)},v=function(){Af(R)},R=function(){if(!a){if(o&&!(i&&i.ended&&!i.destroyed))return r.call(e,new Error("premature close"));if(s&&!(n&&n.ended&&!n.destroyed))return r.call(e,new Error("premature close"))}},h=function(){e.req.on("finish",l)};return Rf(e)?(e.on("complete",l),e.on("abort",v),e.req?h():e.on("request",h)):s&&!n&&(e.on("end",c),e.on("close",c)),If(e)&&e.on("exit",p),e.on("end",g),e.on("finish",l),t.error!==!1&&e.on("error",E),e.on("close",v),function(){a=!0,e.removeListener("complete",l),e.removeListener("abort",v),e.removeListener("request",h),e.req&&e.req.removeListener("finish",l),e.removeListener("end",c),e.removeListener("close",c),e.removeListener("finish",l),e.removeListener("exit",p),e.removeListener("end",g),e.removeListener("error",E),e.removeListener("close",v)}},ya=wa;const Zo=Vt(ya);var Tf=null;const Of=Object.freeze(Object.defineProperty({__proto__:null,default:Tf},Symbol.toStringTag,{value:"Module"})),Cf=Al(Of);var Jo={},Nf=Bi,Pf=ya,Gr;try{Gr=Cf}catch{}var gr=function(){},Lf=typeof Jo>"u"?!1:/^v?\.0/.test(Jo.version),dn=function(e){return typeof e=="function"},xf=function(e){return!Lf||!Gr?!1:(e instanceof(Gr.ReadStream||gr)||e instanceof(Gr.WriteStream||gr))&&dn(e.close)},Mf=function(e){return e.setHeader&&dn(e.abort)},$f=function(e,t,r,n){n=Nf(n);var i=!1;e.on("close",function(){i=!0}),Pf(e,{readable:t,writable:r},function(s){if(s)return n(s);i=!0,n()});var o=!1;return function(s){if(!i&&!o){if(o=!0,xf(e))return e.close(gr);if(Mf(e))return e.abort();if(dn(e.destroy))return e.destroy();n(s||new Error("stream was destroyed"))}}},Qo=function(e){e()},Bf=function(e,t){return e.pipe(t)},Df=function(){var e=Array.prototype.slice.call(arguments),t=dn(e[e.length-1]||gr)&&e.pop()||gr;if(Array.isArray(e[0])&&(e=e[0]),e.length<2)throw new Error("pump requires two streams per minimum");var r,n=e.map(function(i,o){var s=o<e.length-1,a=o>0;return $f(i,s,a,function(c){r||(r=c),c&&n.forEach(Qo),!s&&(n.forEach(Qo),t(r))})});return e.reduce(Bf)},jf=Df;const Xo=Vt(jf);function Wr(){}const es="SYN",Xn="ACK",ts="BRK";class rs extends fn.Duplex{constructor(t){let{name:r,target:n,targetWindow:i=window,targetOrigin:o="*"}=t;if(super({objectMode:!0}),G(this,"_init",void 0),G(this,"_haveSyn",void 0),G(this,"_name",void 0),G(this,"_target",void 0),G(this,"_targetWindow",void 0),G(this,"_targetOrigin",void 0),G(this,"_onMessage",void 0),G(this,"_synIntervalId",void 0),!r||!n)throw new Error("Invalid input.");this._init=!1,this._haveSyn=!1,this._name=r,this._target=n,this._targetWindow=i,this._targetOrigin=o,this._onMessage=this.onMessage.bind(this),this._synIntervalId=null,window.addEventListener("message",this._onMessage,!1),this._handShake()}_break(){this.cork(),this._write(ts,null,Wr),this._haveSyn=!1,this._init=!1}_handShake(){this._write(es,null,Wr),this.cork()}_onData(t){if(!this._init)t===es?(this._haveSyn=!0,this._write(Xn,null,Wr)):t===Xn&&(this._init=!0,this._haveSyn||this._write(Xn,null,Wr),this.uncork());else if(t===ts)this._break();else try{this.push(t)}catch(r){this.emit("error",r)}}_postMessage(t){const r=this._targetOrigin;this._targetWindow.postMessage({target:this._target,data:t},r)}onMessage(t){const r=t.data;this._targetOrigin!=="*"&&t.origin!==this._targetOrigin||t.source!==this._targetWindow||typeof r!="object"||r.target!==this._name||!r.data||this._onData(r.data)}_read(){}_write(t,r,n){this._postMessage(t),n()}_destroy(){window.removeEventListener("message",this._onMessage,!1)}}const kf={rpc:{internal:-32603}},ns={"-32700":{standard:"JSON RPC 2.0",message:"Invalid JSON was received by the server. An error occurred on the server while parsing the JSON text."},"-32600":{standard:"JSON RPC 2.0",message:"The JSON sent is not a valid Request object."},"-32601":{standard:"JSON RPC 2.0",message:"The method does not exist / is not available."},"-32602":{standard:"JSON RPC 2.0",message:"Invalid method parameter(s)."},"-32603":{standard:"JSON RPC 2.0",message:"Internal JSON-RPC error."},"-32000":{standard:"EIP-1474",message:"Invalid input."},"-32001":{standard:"EIP-1474",message:"Resource not found."},"-32002":{standard:"EIP-1474",message:"Resource unavailable."},"-32003":{standard:"EIP-1474",message:"Transaction rejected."},"-32004":{standard:"EIP-1474",message:"Method not supported."},"-32005":{standard:"EIP-1474",message:"Request limit exceeded."},4001:{standard:"EIP-1193",message:"User rejected the request."},4100:{standard:"EIP-1193",message:"The requested account and/or method has not been authorized by the user."},4200:{standard:"EIP-1193",message:"The requested method is not supported by this Ethereum provider."},4900:{standard:"EIP-1193",message:"The provider is disconnected from all chains."},4901:{standard:"EIP-1193",message:"The provider is disconnected from the specified chain."}},is=kf.rpc.internal,Wf="Unspecified error message. This is a bug, please report it.";function _a(e){return Number.isInteger(e)}function os(e){return typeof e=="string"&&e.length>0}function ss(e){return!!e&&typeof e=="object"&&!Array.isArray(e)}function ma(e){const t=e;return!(!t||!_a(t.code)||!os(t.message)||t.stack&&!os(t.stack))}function Uf(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:Wf;if(_a(e)){const r=e.toString();if(Object.hasOwn(ns,r))return ns[r].message}return t}const Ff={code:is,message:Uf(is)};function bi(e){try{JSON.parse(JSON.stringify(e,(t,r)=>{if(t==="__proto__"||t==="constructor")throw new Error("Not valid json");if(typeof r=="function"||typeof r=="symbol")throw new Error("Not valid json");return r}),(t,r)=>{if(!(t==="__proto__"||t==="constructor"))return r})}catch{return!1}return!0}function as(e){return Object.getOwnPropertyNames(e).reduce((t,r)=>{const n=e[r];return bi(n)&&(t[r]=n),t},{})}function qf(e){return Array.isArray(e)?e.map(t=>bi(t)?t:ss(t)?as(t):null):ss(e)?as(e):bi(e)?e:null}function Hf(e,t){if(e&&typeof e=="object"&&"serialize"in e&&typeof e.serialize=="function")return e.serialize();if(ma(e))return e;const r=qf(e);return De(De({},t),{},{data:{cause:r}})}function ls(e){let{fallbackError:t=Ff,shouldIncludeStack:r=!0}=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(!ma(t))throw new Error("Must provide fallback error with integer number code and string message.");const n=Hf(e,t);return r||delete n.stack,n}function us(e,t,r){try{Reflect.apply(e,t,r)}catch(n){setTimeout(()=>{throw n})}}function zf(e){const t=e.length,r=new Array(t);for(let n=0;n<t;n+=1)r[n]=e[n];return r}class hn extends Rl.EventEmitter{emit(t){let r=t==="error";const n=this._events;if(n!==void 0)r=r&&n.error===void 0;else if(!r)return!1;for(var i=arguments.length,o=new Array(i>1?i-1:0),s=1;s<i;s++)o[s-1]=arguments[s];if(r){let c;if(o.length>0&&([c]=o),c instanceof Error)throw c;const l=new Error(`Unhandled error.${c?` (${c.message})`:""}`);throw l.context=c,l}const a=n[t];if(a===void 0)return!1;if(typeof a=="function")us(a,this,o);else{const c=a.length,l=zf(a);for(let g=0;g<c;g+=1)us(l[g],this,o)}return!0}}class or extends Error{constructor(t){let{code:r,message:n,data:i}=t;if(!Number.isInteger(r))throw new Error("code must be an integer");if(!n||typeof n!="string")throw new Error("message must be string");super(n),G(this,"code",void 0),G(this,"data",void 0),this.code=r,i!==void 0&&(this.data=i)}toString(){return _f({code:this.code,message:this.message,data:this.data,stack:this.stack})}}const wi=function(e,t){let r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0;return(n,i)=>{n||i.error?t(n||i.error):!r||Array.isArray(i)?e(i):e(i.result)}};function Gf(){const e={};function t(){return!1}const r=new hn;function n(c){const l=e[c.id];if(!l)throw new Error(`StreamMiddleware - Unknown response id "${c.id}"`);delete e[c.id],Object.assign(l.res,c),setTimeout(l.end)}function i(c){r.emit("notification",c)}function o(c,l,g){let p;try{!c.id?i(c):n(c)}catch(E){p=E}g(p)}const s=new fn.Duplex({objectMode:!0,read:t,write:o});return{events:r,middleware:(c,l,g,p)=>{s.push(c),e[c.id]={req:c,res:l,next:g,end:p}},stream:s}}function Vf(){return(e,t,r,n)=>{const i=e.id,o=Math.random().toString(36).slice(2);e.id=o,t.id=o,r(s=>{e.id=i,t.id=i,s()})}}class tt extends hn{constructor(){super(),G(this,"_middleware",void 0),this._middleware=[]}static async _runAllMiddleware(t,r,n){const i=[];let o=null,s=!1;for(const a of n)if([o,s]=await tt._runMiddleware(t,r,a,i),s)break;return[o,s,i.reverse()]}static _runMiddleware(t,r,n,i){return new Promise(o=>{const s=c=>{const l=c||r.error;l&&(typeof l=="object"&&Object.keys(l).includes("stack")===!1&&(l.stack="Stack trace is not available."),r.error=ls(l,{shouldIncludeStack:!0,fallbackError:{message:(l==null?void 0:l.message)||(l==null?void 0:l.toString()),code:(l==null?void 0:l.code)||-32603,stack:(l==null?void 0:l.stack)||"Stack trace is not available.",data:(l==null?void 0:l.data)||(l==null?void 0:l.message)||(l==null?void 0:l.toString())}})),o([l,!0])},a=c=>{r.error?s(r.error):(c&&(typeof c!="function"&&s(new or({code:-32603,message:"JRPCEngine: 'next' return handlers must be functions"})),i.push(c)),o([null,!1]))};try{n(t,r,a,s)}catch(c){s(c)}})}static async _runReturnHandlers(t){for(const r of t)await new Promise((n,i)=>{r(o=>o?i(o):n())})}static _checkForCompletion(t,r,n){if(!("result"in r)&&!("error"in r))throw new or({code:-32603,message:"Response has no error or result for request"});if(!n)throw new or({code:-32603,message:"Nothing ended request"})}push(t){this._middleware.push(t)}handle(t,r){if(r&&typeof r!="function")throw new Error('"callback" must be a function if provided.');return Array.isArray(t)?r?this._handleBatch(t,r):this._handleBatch(t):r?this._handle(t,r):this._promiseHandle(t)}asMiddleware(){return async(t,r,n,i)=>{try{const[o,s,a]=await tt._runAllMiddleware(t,r,this._middleware);return s?(await tt._runReturnHandlers(a),i(o)):n(async c=>{try{await tt._runReturnHandlers(a)}catch(l){return c(l)}return c()})}catch(o){return i(o)}}}async _handleBatch(t,r){try{const n=await Promise.all(t.map(this._promiseHandle.bind(this)));return r?r(null,n):n}catch(n){if(r)return r(n);throw n}}_promiseHandle(t){return new Promise((r,n)=>{this._handle(t,(i,o)=>{i&&o===void 0?n(i):r(o)}).catch(n)})}async _handle(t,r){if(!t||Array.isArray(t)||typeof t!="object"){const v=new or({code:-32603,message:"request must be plain object"});return r(v,{id:void 0,jsonrpc:"2.0",error:v})}if(typeof t.method!="string"){const v=new or({code:-32603,message:"method must be string"});return r(v,{id:t.id,jsonrpc:"2.0",error:v})}const n=De({},t),i={id:n.id,jsonrpc:n.jsonrpc};let o=null;try{await this._processRequest(n,i)}catch(v){o=v}if(o&&(delete i.result,!i.error)){var s,a,c,l,g,p,E;typeof o=="object"&&Object.keys(o).includes("stack")===!1&&(o.stack="Stack trace is not available."),i.error=ls(o,{shouldIncludeStack:!0,fallbackError:{message:((s=o)===null||s===void 0?void 0:s.message)||((a=o)===null||a===void 0?void 0:a.toString()),code:((c=o)===null||c===void 0?void 0:c.code)||-32603,stack:((l=o)===null||l===void 0?void 0:l.stack)||"Stack trace is not available.",data:((g=o)===null||g===void 0?void 0:g.data)||((p=o)===null||p===void 0?void 0:p.message)||((E=o)===null||E===void 0?void 0:E.toString())}})}return r(o,i)}async _processRequest(t,r){const[n,i,o]=await tt._runAllMiddleware(t,r,this._middleware);if(tt._checkForCompletion(t,r,i),await tt._runReturnHandlers(o),n)throw n}}class Kf extends fn.Duplex{constructor(t){let{parent:r,name:n}=t;super({objectMode:!0}),G(this,"_parent",void 0),G(this,"_name",void 0),this._parent=r,this._name=n}_read(){}_write(t,r,n){this._parent.push({name:this._name,data:t}),n()}}const cs=Symbol("IGNORE_SUBSTREAM");class Yf extends fn.Duplex{constructor(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};super(De(De({},t),{},{objectMode:!0})),G(this,"_substreams",void 0),G(this,"getStream",void 0),this._substreams={}}createStream(t){if(!t)throw new Error("ObjectMultiplex - name must not be empty");if(this._substreams[t])throw new Error(`ObjectMultiplex - Substream for name "${t}" already exists`);const r=new Kf({parent:this,name:t});return this._substreams[t]=r,Zf(this,n=>r.destroy(n||void 0)),r}ignoreStream(t){if(!t)throw new Error("ObjectMultiplex - name must not be empty");if(this._substreams[t])throw new Error(`ObjectMultiplex - Substream for name "${t}" already exists`);this._substreams[t]=cs}_read(){}_write(t,r,n){const{name:i,data:o}=t;if(!i)return window.console.warn(`ObjectMultiplex - malformed chunk without name "${t}"`),n();const s=this._substreams[i];return s?(s!==cs&&s.push(o),n()):(window.console.warn(`ObjectMultiplex - orphaned data for stream "${i}"`),n())}}function Zf(e,t){const r=vf(t);Zo(e,{readable:!1},r),Zo(e,{writable:!1},r)}var Jr={exports:{}};Jr.exports;(function(e,t){var r=200,n="__lodash_hash_undefined__",i=800,o=16,s=9007199254740991,a="[object Arguments]",c="[object Array]",l="[object AsyncFunction]",g="[object Boolean]",p="[object Date]",E="[object Error]",v="[object Function]",R="[object GeneratorFunction]",h="[object Map]",y="[object Number]",b="[object Null]",T="[object Object]",m="[object Proxy]",L="[object RegExp]",N="[object Set]",$="[object String]",H="[object Undefined]",k="[object WeakMap]",Q="[object ArrayBuffer]",Z="[object DataView]",D="[object Float32Array]",j="[object Float64Array]",O="[object Int8Array]",ee="[object Int16Array]",I="[object Int32Array]",P="[object Uint8Array]",F="[object Uint8ClampedArray]",K="[object Uint16Array]",V="[object Uint32Array]",X=/[\\^$.*+?()[\]{}|]/g,J=/^\[object .+?Constructor\]$/,le=/^(?:0|[1-9]\d*)$/,B={};B[D]=B[j]=B[O]=B[ee]=B[I]=B[P]=B[F]=B[K]=B[V]=!0,B[a]=B[c]=B[Q]=B[g]=B[Z]=B[p]=B[E]=B[v]=B[h]=B[y]=B[T]=B[L]=B[N]=B[$]=B[k]=!1;var te=typeof globalThis=="object"&&globalThis&&globalThis.Object===Object&&globalThis,ge=typeof self=="object"&&self&&self.Object===Object&&self,be=te||ge||Function("return this")(),we=t&&!t.nodeType&&t,Ee=we&&!0&&e&&!e.nodeType&&e,Se=Ee&&Ee.exports===we,Te=Se&&te.process,We=function(){try{var f=Ee&&Ee.require&&Ee.require("util").types;return f||Te&&Te.binding&&Te.binding("util")}catch{}}(),Ae=We&&We.isTypedArray;function _(f,w,A){switch(A.length){case 0:return f.call(w);case 1:return f.call(w,A[0]);case 2:return f.call(w,A[0],A[1]);case 3:return f.call(w,A[0],A[1],A[2])}return f.apply(w,A)}function S(f,w){for(var A=-1,q=Array(f);++A<f;)q[A]=w(A);return q}function C(f){return function(w){return f(w)}}function W(f,w){return f==null?void 0:f[w]}function z(f,w){return function(A){return f(w(A))}}var oe=Array.prototype,ce=Function.prototype,ne=Object.prototype,Le=be["__core-js_shared__"],Y=ce.toString,me=ne.hasOwnProperty,$t=function(){var f=/[^.]+$/.exec(Le&&Le.keys&&Le.keys.IE_PROTO||"");return f?"Symbol(src)_1."+f:""}(),vr=ne.toString,mn=Y.call(Object),Er=RegExp("^"+Y.call(me).replace(X,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),Bt=Se?be.Buffer:void 0,wt=be.Symbol,Zt=be.Uint8Array;Bt&&Bt.allocUnsafe;var yt=z(Object.getPrototypeOf,Object),Sr=Object.create,vn=ne.propertyIsEnumerable,Ar=oe.splice,Je=wt?wt.toStringTag:void 0,Dt=function(){try{var f=Tn(Object,"defineProperty");return f({},"",{}),f}catch{}}(),En=Bt?Bt.isBuffer:void 0,Jt=Math.max,Rr=Date.now,Ir=Tn(be,"Map"),lt=Tn(Object,"create"),Qt=function(){function f(){}return function(w){if(!mt(w))return{};if(Sr)return Sr(w);f.prototype=w;var A=new f;return f.prototype=void 0,A}}();function Qe(f){var w=-1,A=f==null?0:f.length;for(this.clear();++w<A;){var q=f[w];this.set(q[0],q[1])}}function Sn(){this.__data__=lt?lt(null):{},this.size=0}function Xt(f){var w=this.has(f)&&delete this.__data__[f];return this.size-=w?1:0,w}function Tr(f){var w=this.__data__;if(lt){var A=w[f];return A===n?void 0:A}return me.call(w,f)?w[f]:void 0}function u(f){var w=this.__data__;return lt?w[f]!==void 0:me.call(w,f)}function d(f,w){var A=this.__data__;return this.size+=this.has(f)?0:1,A[f]=lt&&w===void 0?n:w,this}Qe.prototype.clear=Sn,Qe.prototype.delete=Xt,Qe.prototype.get=Tr,Qe.prototype.has=u,Qe.prototype.set=d;function x(f){var w=-1,A=f==null?0:f.length;for(this.clear();++w<A;){var q=f[w];this.set(q[0],q[1])}}function M(){this.__data__=[],this.size=0}function U(f){var w=this.__data__,A=Lr(w,f);if(A<0)return!1;var q=w.length-1;return A==q?w.pop():Ar.call(w,A,1),--this.size,!0}function ye(f){var w=this.__data__,A=Lr(w,f);return A<0?void 0:w[A][1]}function Oe(f){return Lr(this.__data__,f)>-1}function Or(f,w){var A=this.__data__,q=Lr(A,f);return q<0?(++this.size,A.push([f,w])):A[q][1]=w,this}x.prototype.clear=M,x.prototype.delete=U,x.prototype.get=ye,x.prototype.has=Oe,x.prototype.set=Or;function Ce(f){var w=-1,A=f==null?0:f.length;for(this.clear();++w<A;){var q=f[w];this.set(q[0],q[1])}}function Cr(){this.size=0,this.__data__={hash:new Qe,map:new(Ir||x),string:new Qe}}function An(f){var w=Mr(this,f).delete(f);return this.size-=w?1:0,w}function Nr(f){return Mr(this,f).get(f)}function Pr(f){return Mr(this,f).has(f)}function er(f,w){var A=Mr(this,f),q=A.size;return A.set(f,w),this.size+=A.size==q?0:1,this}Ce.prototype.clear=Cr,Ce.prototype.delete=An,Ce.prototype.get=Nr,Ce.prototype.has=Pr,Ce.prototype.set=er;function ze(f){var w=this.__data__=new x(f);this.size=w.size}function tr(){this.__data__=new x,this.size=0}function _t(f){var w=this.__data__,A=w.delete(f);return this.size=w.size,A}function Xe(f){return this.__data__.get(f)}function Ue(f){return this.__data__.has(f)}function qa(f,w){var A=this.__data__;if(A instanceof x){var q=A.__data__;if(!Ir||q.length<r-1)return q.push([f,w]),this.size=++A.size,this;A=this.__data__=new Ce(q)}return A.set(f,w),this.size=A.size,this}ze.prototype.clear=tr,ze.prototype.delete=_t,ze.prototype.get=Xe,ze.prototype.has=Ue,ze.prototype.set=qa;function Ha(f,w){var A=Nn(f),q=!A&&Cn(f),re=!A&&!q&&Xi(f),se=!A&&!q&&!re&&to(f),fe=A||q||re||se,ie=fe?S(f.length,String):[],de=ie.length;for(var Fe in f)fe&&(Fe=="length"||re&&(Fe=="offset"||Fe=="parent")||se&&(Fe=="buffer"||Fe=="byteLength"||Fe=="byteOffset")||Ji(Fe,de))||ie.push(Fe);return ie}function Rn(f,w,A){(A!==void 0&&!$r(f[w],A)||A===void 0&&!(w in f))&&In(f,w,A)}function za(f,w,A){var q=f[w];(!(me.call(f,w)&&$r(q,A))||A===void 0&&!(w in f))&&In(f,w,A)}function Lr(f,w){for(var A=f.length;A--;)if($r(f[A][0],w))return A;return-1}function In(f,w,A){w=="__proto__"&&Dt?Dt(f,w,{configurable:!0,enumerable:!0,value:A,writable:!0}):f[w]=A}var Ga=ol();function xr(f){return f==null?f===void 0?H:b:Je&&Je in Object(f)?sl(f):dl(f)}function Yi(f){return rr(f)&&xr(f)==a}function Va(f){if(!mt(f)||cl(f))return!1;var w=Ln(f)?Er:J;return w.test(bl(f))}function Ka(f){return rr(f)&&eo(f.length)&&!!B[xr(f)]}function Ya(f){if(!mt(f))return fl(f);var w=Qi(f),A=[];for(var q in f)q=="constructor"&&(w||!me.call(f,q))||A.push(q);return A}function Zi(f,w,A,q,re){f!==w&&Ga(w,function(se,fe){if(re||(re=new ze),mt(se))Za(f,w,fe,A,Zi,q,re);else{var ie=q?q(On(f,fe),se,fe+"",f,w,re):void 0;ie===void 0&&(ie=se),Rn(f,fe,ie)}},ro)}function Za(f,w,A,q,re,se,fe){var ie=On(f,A),de=On(w,A),Fe=fe.get(de);if(Fe){Rn(f,A,Fe);return}var xe=se?se(ie,de,A+"",f,w,fe):void 0,nr=xe===void 0;if(nr){var xn=Nn(de),Mn=!xn&&Xi(de),io=!xn&&!Mn&&to(de);xe=de,xn||Mn||io?Nn(ie)?xe=ie:wl(ie)?xe=rl(ie):Mn?(nr=!1,xe=Xa(de)):io?(nr=!1,xe=tl(de)):xe=[]:yl(de)||Cn(de)?(xe=ie,Cn(ie)?xe=_l(ie):(!mt(ie)||Ln(ie))&&(xe=al(de))):nr=!1}nr&&(fe.set(de,xe),re(xe,de,q,se,fe),fe.delete(de)),Rn(f,A,xe)}function Ja(f,w){return gl(hl(f,w,no),f+"")}var Qa=Dt?function(f,w){return Dt(f,"toString",{configurable:!0,enumerable:!1,value:vl(w),writable:!0})}:no;function Xa(f,w){return f.slice()}function el(f){var w=new f.constructor(f.byteLength);return new Zt(w).set(new Zt(f)),w}function tl(f,w){var A=el(f.buffer);return new f.constructor(A,f.byteOffset,f.length)}function rl(f,w){var A=-1,q=f.length;for(w||(w=Array(q));++A<q;)w[A]=f[A];return w}function nl(f,w,A,q){var re=!A;A||(A={});for(var se=-1,fe=w.length;++se<fe;){var ie=w[se],de=void 0;de===void 0&&(de=f[ie]),re?In(A,ie,de):za(A,ie,de)}return A}function il(f){return Ja(function(w,A){var q=-1,re=A.length,se=re>1?A[re-1]:void 0,fe=re>2?A[2]:void 0;for(se=f.length>3&&typeof se=="function"?(re--,se):void 0,fe&&ll(A[0],A[1],fe)&&(se=re<3?void 0:se,re=1),w=Object(w);++q<re;){var ie=A[q];ie&&f(w,ie,q,se)}return w})}function ol(f){return function(w,A,q){for(var re=-1,se=Object(w),fe=q(w),ie=fe.length;ie--;){var de=fe[++re];if(A(se[de],de,se)===!1)break}return w}}function Mr(f,w){var A=f.__data__;return ul(w)?A[typeof w=="string"?"string":"hash"]:A.map}function Tn(f,w){var A=W(f,w);return Va(A)?A:void 0}function sl(f){var w=me.call(f,Je),A=f[Je];try{f[Je]=void 0;var q=!0}catch{}var re=vr.call(f);return q&&(w?f[Je]=A:delete f[Je]),re}function al(f){return typeof f.constructor=="function"&&!Qi(f)?Qt(yt(f)):{}}function Ji(f,w){var A=typeof f;return w=w??s,!!w&&(A=="number"||A!="symbol"&&le.test(f))&&f>-1&&f%1==0&&f<w}function ll(f,w,A){if(!mt(A))return!1;var q=typeof w;return(q=="number"?Pn(A)&&Ji(w,A.length):q=="string"&&w in A)?$r(A[w],f):!1}function ul(f){var w=typeof f;return w=="string"||w=="number"||w=="symbol"||w=="boolean"?f!=="__proto__":f===null}function cl(f){return!!$t&&$t in f}function Qi(f){var w=f&&f.constructor,A=typeof w=="function"&&w.prototype||ne;return f===A}function fl(f){var w=[];if(f!=null)for(var A in Object(f))w.push(A);return w}function dl(f){return vr.call(f)}function hl(f,w,A){return w=Jt(w===void 0?f.length-1:w,0),function(){for(var q=arguments,re=-1,se=Jt(q.length-w,0),fe=Array(se);++re<se;)fe[re]=q[w+re];re=-1;for(var ie=Array(w+1);++re<w;)ie[re]=q[re];return ie[w]=A(fe),_(f,this,ie)}}function On(f,w){if(!(w==="constructor"&&typeof f[w]=="function")&&w!="__proto__")return f[w]}var gl=pl(Qa);function pl(f){var w=0,A=0;return function(){var q=Rr(),re=o-(q-A);if(A=q,re>0){if(++w>=i)return arguments[0]}else w=0;return f.apply(void 0,arguments)}}function bl(f){if(f!=null){try{return Y.call(f)}catch{}try{return f+""}catch{}}return""}function $r(f,w){return f===w||f!==f&&w!==w}var Cn=Yi(function(){return arguments}())?Yi:function(f){return rr(f)&&me.call(f,"callee")&&!vn.call(f,"callee")},Nn=Array.isArray;function Pn(f){return f!=null&&eo(f.length)&&!Ln(f)}function wl(f){return rr(f)&&Pn(f)}var Xi=En||El;function Ln(f){if(!mt(f))return!1;var w=xr(f);return w==v||w==R||w==l||w==m}function eo(f){return typeof f=="number"&&f>-1&&f%1==0&&f<=s}function mt(f){var w=typeof f;return f!=null&&(w=="object"||w=="function")}function rr(f){return f!=null&&typeof f=="object"}function yl(f){if(!rr(f)||xr(f)!=T)return!1;var w=yt(f);if(w===null)return!0;var A=me.call(w,"constructor")&&w.constructor;return typeof A=="function"&&A instanceof A&&Y.call(A)==mn}var to=Ae?C(Ae):Ka;function _l(f){return nl(f,ro(f))}function ro(f){return Pn(f)?Ha(f):Ya(f)}var ml=il(function(f,w,A){Zi(f,w,A)});function vl(f){return function(){return f}}function no(f){return f}function El(){return!1}e.exports=ml})(Jr,Jr.exports);Jr.exports;var va={exports:{}};(function(e){(function(t,r){e.exports?e.exports=r():t.log=r()})(Il,function(){var t=function(){},r="undefined",n=typeof window!==r&&typeof window.navigator!==r&&/Trident\/|MSIE /.test(window.navigator.userAgent),i=["trace","debug","info","warn","error"],o={},s=null;function a(h,y){var b=h[y];if(typeof b.bind=="function")return b.bind(h);try{return Function.prototype.bind.call(b,h)}catch{return function(){return Function.prototype.apply.apply(b,[h,arguments])}}}function c(){console.log&&(console.log.apply?console.log.apply(console,arguments):Function.prototype.apply.apply(console.log,[console,arguments])),console.trace&&console.trace()}function l(h){return h==="debug"&&(h="log"),typeof console===r?!1:h==="trace"&&n?c:console[h]!==void 0?a(console,h):console.log!==void 0?a(console,"log"):t}function g(){for(var h=this.getLevel(),y=0;y<i.length;y++){var b=i[y];this[b]=y<h?t:this.methodFactory(b,h,this.name)}if(this.log=this.debug,typeof console===r&&h<this.levels.SILENT)return"No console available for logging"}function p(h){return function(){typeof console!==r&&(g.call(this),this[h].apply(this,arguments))}}function E(h,y,b){return l(h)||p.apply(this,arguments)}function v(h,y){var b=this,T,m,L,N="loglevel";typeof h=="string"?N+=":"+h:typeof h=="symbol"&&(N=void 0);function $(D){var j=(i[D]||"silent").toUpperCase();if(!(typeof window===r||!N)){try{window.localStorage[N]=j;return}catch{}try{window.document.cookie=encodeURIComponent(N)+"="+j+";"}catch{}}}function H(){var D;if(!(typeof window===r||!N)){try{D=window.localStorage[N]}catch{}if(typeof D===r)try{var j=window.document.cookie,O=encodeURIComponent(N),ee=j.indexOf(O+"=");ee!==-1&&(D=/^([^;]+)/.exec(j.slice(ee+O.length+1))[1])}catch{}return b.levels[D]===void 0&&(D=void 0),D}}function k(){if(!(typeof window===r||!N)){try{window.localStorage.removeItem(N)}catch{}try{window.document.cookie=encodeURIComponent(N)+"=; expires=Thu, 01 Jan 1970 00:00:00 UTC"}catch{}}}function Q(D){var j=D;if(typeof j=="string"&&b.levels[j.toUpperCase()]!==void 0&&(j=b.levels[j.toUpperCase()]),typeof j=="number"&&j>=0&&j<=b.levels.SILENT)return j;throw new TypeError("log.setLevel() called with invalid level: "+D)}b.name=h,b.levels={TRACE:0,DEBUG:1,INFO:2,WARN:3,ERROR:4,SILENT:5},b.methodFactory=y||E,b.getLevel=function(){return L??m??T},b.setLevel=function(D,j){return L=Q(D),j!==!1&&$(L),g.call(b)},b.setDefaultLevel=function(D){m=Q(D),H()||b.setLevel(D,!1)},b.resetLevel=function(){L=null,k(),g.call(b)},b.enableAll=function(D){b.setLevel(b.levels.TRACE,D)},b.disableAll=function(D){b.setLevel(b.levels.SILENT,D)},b.rebuild=function(){if(s!==b&&(T=Q(s.getLevel())),g.call(b),s===b)for(var D in o)o[D].rebuild()},T=Q(s?s.getLevel():"WARN");var Z=H();Z!=null&&(L=Q(Z)),g.call(b)}s=new v,s.getLogger=function(y){if(typeof y!="symbol"&&typeof y!="string"||y==="")throw new TypeError("You must supply a name when creating a logger.");var b=o[y];return b||(b=o[y]=new v(y,s.methodFactory)),b};var R=typeof window!==r?window.log:void 0;return s.noConflict=function(){return typeof window!==r&&window.log===s&&(window.log=R),s},s.getLoggers=function(){return o},s.default=s,s})})(va);var Ea=va.exports;const Qr=Vt(Ea),Jf=Qr.getLogger("http-helpers");Jf.setLevel(Ea.levels.INFO);function fs(e){if(!Number.isSafeInteger(e)||e<0)throw new Error(`positive integer expected, not ${e}`)}function Qf(e){return e instanceof Uint8Array||e!=null&&typeof e=="object"&&e.constructor.name==="Uint8Array"}function gn(e,...t){if(!Qf(e))throw new Error("Uint8Array expected");if(t.length>0&&!t.includes(e.length))throw new Error(`Uint8Array expected of length ${t}, not of length=${e.length}`)}function Xf(e){if(typeof e!="function"||typeof e.create!="function")throw new Error("Hash should be wrapped by utils.wrapConstructor");fs(e.outputLen),fs(e.blockLen)}function Xr(e,t=!0){if(e.destroyed)throw new Error("Hash instance has been destroyed");if(t&&e.finished)throw new Error("Hash#digest() has already been called")}function ed(e,t){gn(e);const r=t.outputLen;if(e.length<r)throw new Error(`digestInto() expects output buffer of length at least ${r}`)}const ei=typeof globalThis=="object"&&"crypto"in globalThis?globalThis.crypto:void 0;/*! noble-hashes - MIT License (c) 2022 Paul Miller (paulmillr.com) */const ti=e=>new DataView(e.buffer,e.byteOffset,e.byteLength),Ge=(e,t)=>e<<32-t|e>>>t;new Uint8Array(new Uint32Array([287454020]).buffer)[0];function td(e){if(typeof e!="string")throw new Error(`utf8ToBytes expected string, got ${typeof e}`);return new Uint8Array(new TextEncoder().encode(e))}function Di(e){return typeof e=="string"&&(e=td(e)),gn(e),e}function rd(...e){let t=0;for(let n=0;n<e.length;n++){const i=e[n];gn(i),t+=i.length}const r=new Uint8Array(t);for(let n=0,i=0;n<e.length;n++){const o=e[n];r.set(o,i),i+=o.length}return r}class Sa{clone(){return this._cloneInto()}}function nd(e){const t=n=>e().update(Di(n)).digest(),r=e();return t.outputLen=r.outputLen,t.blockLen=r.blockLen,t.create=()=>e(),t}function id(e=32){if(ei&&typeof ei.getRandomValues=="function")return ei.getRandomValues(new Uint8Array(e));throw new Error("crypto.getRandomValues must be defined")}function od(e,t,r,n){if(typeof e.setBigUint64=="function")return e.setBigUint64(t,r,n);const i=BigInt(32),o=BigInt(4294967295),s=Number(r>>i&o),a=Number(r&o),c=n?4:0,l=n?0:4;e.setUint32(t+c,s,n),e.setUint32(t+l,a,n)}const sd=(e,t,r)=>e&t^~e&r,ad=(e,t,r)=>e&t^e&r^t&r;class ld extends Sa{constructor(t,r,n,i){super(),this.blockLen=t,this.outputLen=r,this.padOffset=n,this.isLE=i,this.finished=!1,this.length=0,this.pos=0,this.destroyed=!1,this.buffer=new Uint8Array(t),this.view=ti(this.buffer)}update(t){Xr(this);const{view:r,buffer:n,blockLen:i}=this;t=Di(t);const o=t.length;for(let s=0;s<o;){const a=Math.min(i-this.pos,o-s);if(a===i){const c=ti(t);for(;i<=o-s;s+=i)this.process(c,s);continue}n.set(t.subarray(s,s+a),this.pos),this.pos+=a,s+=a,this.pos===i&&(this.process(r,0),this.pos=0)}return this.length+=t.length,this.roundClean(),this}digestInto(t){Xr(this),ed(t,this),this.finished=!0;const{buffer:r,view:n,blockLen:i,isLE:o}=this;let{pos:s}=this;r[s++]=128,this.buffer.subarray(s).fill(0),this.padOffset>i-s&&(this.process(n,0),s=0);for(let p=s;p<i;p++)r[p]=0;od(n,i-8,BigInt(this.length*8),o),this.process(n,0);const a=ti(t),c=this.outputLen;if(c%4)throw new Error("_sha2: outputLen should be aligned to 32bit");const l=c/4,g=this.get();if(l>g.length)throw new Error("_sha2: outputLen bigger than state");for(let p=0;p<l;p++)a.setUint32(4*p,g[p],o)}digest(){const{buffer:t,outputLen:r}=this;this.digestInto(t);const n=t.slice(0,r);return this.destroy(),n}_cloneInto(t){t||(t=new this.constructor),t.set(...this.get());const{blockLen:r,buffer:n,length:i,finished:o,destroyed:s,pos:a}=this;return t.length=i,t.pos=a,t.finished=o,t.destroyed=s,i%r&&t.buffer.set(n),t}}const ud=new Uint32Array([1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298]),ut=new Uint32Array([1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225]),ct=new Uint32Array(64);class cd extends ld{constructor(){super(64,32,8,!1),this.A=ut[0]|0,this.B=ut[1]|0,this.C=ut[2]|0,this.D=ut[3]|0,this.E=ut[4]|0,this.F=ut[5]|0,this.G=ut[6]|0,this.H=ut[7]|0}get(){const{A:t,B:r,C:n,D:i,E:o,F:s,G:a,H:c}=this;return[t,r,n,i,o,s,a,c]}set(t,r,n,i,o,s,a,c){this.A=t|0,this.B=r|0,this.C=n|0,this.D=i|0,this.E=o|0,this.F=s|0,this.G=a|0,this.H=c|0}process(t,r){for(let p=0;p<16;p++,r+=4)ct[p]=t.getUint32(r,!1);for(let p=16;p<64;p++){const E=ct[p-15],v=ct[p-2],R=Ge(E,7)^Ge(E,18)^E>>>3,h=Ge(v,17)^Ge(v,19)^v>>>10;ct[p]=h+ct[p-7]+R+ct[p-16]|0}let{A:n,B:i,C:o,D:s,E:a,F:c,G:l,H:g}=this;for(let p=0;p<64;p++){const E=Ge(a,6)^Ge(a,11)^Ge(a,25),v=g+E+sd(a,c,l)+ud[p]+ct[p]|0,h=(Ge(n,2)^Ge(n,13)^Ge(n,22))+ad(n,i,o)|0;g=l,l=c,c=a,a=s+v|0,s=o,o=i,i=n,n=v+h|0}n=n+this.A|0,i=i+this.B|0,o=o+this.C|0,s=s+this.D|0,a=a+this.E|0,c=c+this.F|0,l=l+this.G|0,g=g+this.H|0,this.set(n,i,o,s,a,c,l,g)}roundClean(){ct.fill(0)}destroy(){this.set(0,0,0,0,0,0,0,0),this.buffer.fill(0)}}const fd=nd(()=>new cd);class Aa extends Sa{constructor(t,r){super(),this.finished=!1,this.destroyed=!1,Xf(t);const n=Di(r);if(this.iHash=t.create(),typeof this.iHash.update!="function")throw new Error("Expected instance of class which extends utils.Hash");this.blockLen=this.iHash.blockLen,this.outputLen=this.iHash.outputLen;const i=this.blockLen,o=new Uint8Array(i);o.set(n.length>i?t.create().update(n).digest():n);for(let s=0;s<o.length;s++)o[s]^=54;this.iHash.update(o),this.oHash=t.create();for(let s=0;s<o.length;s++)o[s]^=106;this.oHash.update(o),o.fill(0)}update(t){return Xr(this),this.iHash.update(t),this}digestInto(t){Xr(this),gn(t,this.outputLen),this.finished=!0,this.iHash.digestInto(t),this.oHash.update(t),this.oHash.digestInto(t),this.destroy()}digest(){const t=new Uint8Array(this.oHash.outputLen);return this.digestInto(t),t}_cloneInto(t){t||(t=Object.create(Object.getPrototypeOf(this),{}));const{oHash:r,iHash:n,finished:i,destroyed:o,blockLen:s,outputLen:a}=this;return t=t,t.finished=i,t.destroyed=o,t.blockLen=s,t.outputLen=a,t.oHash=r._cloneInto(t.oHash),t.iHash=n._cloneInto(t.iHash),t}destroy(){this.destroyed=!0,this.oHash.destroy(),this.iHash.destroy()}}const Ra=(e,t,r)=>new Aa(e,t).update(r).digest();Ra.create=(e,t)=>new Aa(e,t);/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const Ia=BigInt(0),pn=BigInt(1),dd=BigInt(2);function Ct(e){return e instanceof Uint8Array||e!=null&&typeof e=="object"&&e.constructor.name==="Uint8Array"}function yr(e){if(!Ct(e))throw new Error("Uint8Array expected")}const hd=Array.from({length:256},(e,t)=>t.toString(16).padStart(2,"0"));function Ht(e){yr(e);let t="";for(let r=0;r<e.length;r++)t+=hd[e[r]];return t}function Ta(e){const t=e.toString(16);return t.length&1?`0${t}`:t}function ji(e){if(typeof e!="string")throw new Error("hex string expected, got "+typeof e);return BigInt(e===""?"0":`0x${e}`)}const et={_0:48,_9:57,_A:65,_F:70,_a:97,_f:102};function ds(e){if(e>=et._0&&e<=et._9)return e-et._0;if(e>=et._A&&e<=et._F)return e-(et._A-10);if(e>=et._a&&e<=et._f)return e-(et._a-10)}function zt(e){if(typeof e!="string")throw new Error("hex string expected, got "+typeof e);const t=e.length,r=t/2;if(t%2)throw new Error("padded hex string expected, got unpadded hex of length "+t);const n=new Uint8Array(r);for(let i=0,o=0;i<r;i++,o+=2){const s=ds(e.charCodeAt(o)),a=ds(e.charCodeAt(o+1));if(s===void 0||a===void 0){const c=e[o]+e[o+1];throw new Error('hex string expected, got non-hex character "'+c+'" at index '+o)}n[i]=s*16+a}return n}function Tt(e){return ji(Ht(e))}function ki(e){return yr(e),ji(Ht(Uint8Array.from(e).reverse()))}function Gt(e,t){return zt(e.toString(16).padStart(t*2,"0"))}function Wi(e,t){return Gt(e,t).reverse()}function gd(e){return zt(Ta(e))}function qe(e,t,r){let n;if(typeof t=="string")try{n=zt(t)}catch(o){throw new Error(`${e} must be valid hex string, got "${t}". Cause: ${o}`)}else if(Ct(t))n=Uint8Array.from(t);else throw new Error(`${e} must be hex string or Uint8Array`);const i=n.length;if(typeof r=="number"&&i!==r)throw new Error(`${e} expected ${r} bytes, got ${i}`);return n}function pr(...e){let t=0;for(let n=0;n<e.length;n++){const i=e[n];yr(i),t+=i.length}const r=new Uint8Array(t);for(let n=0,i=0;n<e.length;n++){const o=e[n];r.set(o,i),i+=o.length}return r}function pd(e,t){if(e.length!==t.length)return!1;let r=0;for(let n=0;n<e.length;n++)r|=e[n]^t[n];return r===0}function bd(e){if(typeof e!="string")throw new Error(`utf8ToBytes expected string, got ${typeof e}`);return new Uint8Array(new TextEncoder().encode(e))}function wd(e){let t;for(t=0;e>Ia;e>>=pn,t+=1);return t}function yd(e,t){return e>>BigInt(t)&pn}function _d(e,t,r){return e|(r?pn:Ia)<<BigInt(t)}const Ui=e=>(dd<<BigInt(e-1))-pn,ri=e=>new Uint8Array(e),hs=e=>Uint8Array.from(e);function Oa(e,t,r){if(typeof e!="number"||e<2)throw new Error("hashLen must be a number");if(typeof t!="number"||t<2)throw new Error("qByteLen must be a number");if(typeof r!="function")throw new Error("hmacFn must be a function");let n=ri(e),i=ri(e),o=0;const s=()=>{n.fill(1),i.fill(0),o=0},a=(...p)=>r(i,n,...p),c=(p=ri())=>{i=a(hs([0]),p),n=a(),p.length!==0&&(i=a(hs([1]),p),n=a())},l=()=>{if(o++>=1e3)throw new Error("drbg: tried 1000 values");let p=0;const E=[];for(;p<t;){n=a();const v=n.slice();E.push(v),p+=n.length}return pr(...E)};return(p,E)=>{s(),c(p);let v;for(;!(v=E(l()));)c();return s(),v}}const md={bigint:e=>typeof e=="bigint",function:e=>typeof e=="function",boolean:e=>typeof e=="boolean",string:e=>typeof e=="string",stringOrUint8Array:e=>typeof e=="string"||Ct(e),isSafeInteger:e=>Number.isSafeInteger(e),array:e=>Array.isArray(e),field:(e,t)=>t.Fp.isValid(e),hash:e=>typeof e=="function"&&Number.isSafeInteger(e.outputLen)};function _r(e,t,r={}){const n=(i,o,s)=>{const a=md[o];if(typeof a!="function")throw new Error(`Invalid validator "${o}", expected function`);const c=e[i];if(!(s&&c===void 0)&&!a(c,e))throw new Error(`Invalid param ${String(i)}=${c} (${typeof c}), expected ${o}`)};for(const[i,o]of Object.entries(t))n(i,o,!1);for(const[i,o]of Object.entries(r))n(i,o,!0);return e}const vd=Object.freeze(Object.defineProperty({__proto__:null,abytes:yr,bitGet:yd,bitLen:wd,bitMask:Ui,bitSet:_d,bytesToHex:Ht,bytesToNumberBE:Tt,bytesToNumberLE:ki,concatBytes:pr,createHmacDrbg:Oa,ensureBytes:qe,equalBytes:pd,hexToBytes:zt,hexToNumber:ji,isBytes:Ct,numberToBytesBE:Gt,numberToBytesLE:Wi,numberToHexUnpadded:Ta,numberToVarBytesBE:gd,utf8ToBytes:bd,validateObject:_r},Symbol.toStringTag,{value:"Module"}));/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const _e=BigInt(0),pe=BigInt(1),St=BigInt(2),Ed=BigInt(3),yi=BigInt(4),gs=BigInt(5),ps=BigInt(8);BigInt(9);BigInt(16);function Ne(e,t){const r=e%t;return r>=_e?r:t+r}function Sd(e,t,r){if(r<=_e||t<_e)throw new Error("Expected power/modulo > 0");if(r===pe)return _e;let n=pe;for(;t>_e;)t&pe&&(n=n*e%r),e=e*e%r,t>>=pe;return n}function Me(e,t,r){let n=e;for(;t-- >_e;)n*=n,n%=r;return n}function _i(e,t){if(e===_e||t<=_e)throw new Error(`invert: expected positive integers, got n=${e} mod=${t}`);let r=Ne(e,t),n=t,i=_e,o=pe;for(;r!==_e;){const a=n/r,c=n%r,l=i-o*a;n=r,r=c,i=o,o=l}if(n!==pe)throw new Error("invert: does not exist");return Ne(i,t)}function Ad(e){const t=(e-pe)/St;let r,n,i;for(r=e-pe,n=0;r%St===_e;r/=St,n++);for(i=St;i<e&&Sd(i,t,e)!==e-pe;i++);if(n===1){const s=(e+pe)/yi;return function(c,l){const g=c.pow(l,s);if(!c.eql(c.sqr(g),l))throw new Error("Cannot find square root");return g}}const o=(r+pe)/St;return function(a,c){if(a.pow(c,t)===a.neg(a.ONE))throw new Error("Cannot find square root");let l=n,g=a.pow(a.mul(a.ONE,i),r),p=a.pow(c,o),E=a.pow(c,r);for(;!a.eql(E,a.ONE);){if(a.eql(E,a.ZERO))return a.ZERO;let v=1;for(let h=a.sqr(E);v<l&&!a.eql(h,a.ONE);v++)h=a.sqr(h);const R=a.pow(g,pe<<BigInt(l-v-1));g=a.sqr(R),p=a.mul(p,R),E=a.mul(E,g),l=v}return p}}function Rd(e){if(e%yi===Ed){const t=(e+pe)/yi;return function(n,i){const o=n.pow(i,t);if(!n.eql(n.sqr(o),i))throw new Error("Cannot find square root");return o}}if(e%ps===gs){const t=(e-gs)/ps;return function(n,i){const o=n.mul(i,St),s=n.pow(o,t),a=n.mul(i,s),c=n.mul(n.mul(a,St),s),l=n.mul(a,n.sub(c,n.ONE));if(!n.eql(n.sqr(l),i))throw new Error("Cannot find square root");return l}}return Ad(e)}const Id=["create","isValid","is0","neg","inv","sqrt","sqr","eql","add","sub","mul","pow","div","addN","subN","mulN","sqrN"];function Td(e){const t={ORDER:"bigint",MASK:"bigint",BYTES:"isSafeInteger",BITS:"isSafeInteger"},r=Id.reduce((n,i)=>(n[i]="function",n),t);return _r(e,r)}function Od(e,t,r){if(r<_e)throw new Error("Expected power > 0");if(r===_e)return e.ONE;if(r===pe)return t;let n=e.ONE,i=t;for(;r>_e;)r&pe&&(n=e.mul(n,i)),i=e.sqr(i),r>>=pe;return n}function Cd(e,t){const r=new Array(t.length),n=t.reduce((o,s,a)=>e.is0(s)?o:(r[a]=o,e.mul(o,s)),e.ONE),i=e.inv(n);return t.reduceRight((o,s,a)=>e.is0(s)?o:(r[a]=e.mul(o,r[a]),e.mul(o,s)),i),r}function Ca(e,t){const r=t!==void 0?t:e.toString(2).length,n=Math.ceil(r/8);return{nBitLength:r,nByteLength:n}}function Nd(e,t,r=!1,n={}){if(e<=_e)throw new Error(`Expected Field ORDER > 0, got ${e}`);const{nBitLength:i,nByteLength:o}=Ca(e,t);if(o>2048)throw new Error("Field lengths over 2048 bytes are not supported");const s=Rd(e),a=Object.freeze({ORDER:e,BITS:i,BYTES:o,MASK:Ui(i),ZERO:_e,ONE:pe,create:c=>Ne(c,e),isValid:c=>{if(typeof c!="bigint")throw new Error(`Invalid field element: expected bigint, got ${typeof c}`);return _e<=c&&c<e},is0:c=>c===_e,isOdd:c=>(c&pe)===pe,neg:c=>Ne(-c,e),eql:(c,l)=>c===l,sqr:c=>Ne(c*c,e),add:(c,l)=>Ne(c+l,e),sub:(c,l)=>Ne(c-l,e),mul:(c,l)=>Ne(c*l,e),pow:(c,l)=>Od(a,c,l),div:(c,l)=>Ne(c*_i(l,e),e),sqrN:c=>c*c,addN:(c,l)=>c+l,subN:(c,l)=>c-l,mulN:(c,l)=>c*l,inv:c=>_i(c,e),sqrt:n.sqrt||(c=>s(a,c)),invertBatch:c=>Cd(a,c),cmov:(c,l,g)=>g?l:c,toBytes:c=>r?Wi(c,o):Gt(c,o),fromBytes:c=>{if(c.length!==o)throw new Error(`Fp.fromBytes: expected ${o}, got ${c.length}`);return r?ki(c):Tt(c)}});return Object.freeze(a)}function Na(e){if(typeof e!="bigint")throw new Error("field order must be bigint");const t=e.toString(2).length;return Math.ceil(t/8)}function Pa(e){const t=Na(e);return t+Math.ceil(t/2)}function Pd(e,t,r=!1){const n=e.length,i=Na(t),o=Pa(t);if(n<16||n<o||n>1024)throw new Error(`expected ${o}-1024 bytes of input, got ${n}`);const s=r?Tt(e):ki(e),a=Ne(s,t-pe)+pe;return r?Wi(a,i):Gt(a,i)}/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const Ld=BigInt(0),ni=BigInt(1);function xd(e,t){const r=(i,o)=>{const s=o.negate();return i?s:o},n=i=>{const o=Math.ceil(t/i)+1,s=2**(i-1);return{windows:o,windowSize:s}};return{constTimeNegate:r,unsafeLadder(i,o){let s=e.ZERO,a=i;for(;o>Ld;)o&ni&&(s=s.add(a)),a=a.double(),o>>=ni;return s},precomputeWindow(i,o){const{windows:s,windowSize:a}=n(o),c=[];let l=i,g=l;for(let p=0;p<s;p++){g=l,c.push(g);for(let E=1;E<a;E++)g=g.add(l),c.push(g);l=g.double()}return c},wNAF(i,o,s){const{windows:a,windowSize:c}=n(i);let l=e.ZERO,g=e.BASE;const p=BigInt(2**i-1),E=2**i,v=BigInt(i);for(let R=0;R<a;R++){const h=R*c;let y=Number(s&p);s>>=v,y>c&&(y-=E,s+=ni);const b=h,T=h+Math.abs(y)-1,m=R%2!==0,L=y<0;y===0?g=g.add(r(m,o[b])):l=l.add(r(L,o[T]))}return{p:l,f:g}},wNAFCached(i,o,s,a){const c=i._WINDOW_SIZE||1;let l=o.get(i);return l||(l=this.precomputeWindow(i,c),c!==1&&o.set(i,a(l))),this.wNAF(c,l,s)}}}function La(e){return Td(e.Fp),_r(e,{n:"bigint",h:"bigint",Gx:"field",Gy:"field"},{nBitLength:"isSafeInteger",nByteLength:"isSafeInteger"}),Object.freeze({...Ca(e.n,e.nBitLength),...e,p:e.Fp.ORDER})}/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */function Md(e){const t=La(e);_r(t,{a:"field",b:"field"},{allowedPrivateKeyLengths:"array",wrapPrivateKey:"boolean",isTorsionFree:"function",clearCofactor:"function",allowInfinityPoint:"boolean",fromBytes:"function",toBytes:"function"});const{endo:r,Fp:n,a:i}=t;if(r){if(!n.eql(i,n.ZERO))throw new Error("Endomorphism can only be defined for Koblitz curves that have a=0");if(typeof r!="object"||typeof r.beta!="bigint"||typeof r.splitScalar!="function")throw new Error("Expected endomorphism with beta: bigint and splitScalar: function")}return Object.freeze({...t})}const{bytesToNumberBE:$d,hexToBytes:Bd}=vd,Rt={Err:class extends Error{constructor(t=""){super(t)}},_parseInt(e){const{Err:t}=Rt;if(e.length<2||e[0]!==2)throw new t("Invalid signature integer tag");const r=e[1],n=e.subarray(2,r+2);if(!r||n.length!==r)throw new t("Invalid signature integer: wrong length");if(n[0]&128)throw new t("Invalid signature integer: negative");if(n[0]===0&&!(n[1]&128))throw new t("Invalid signature integer: unnecessary leading zero");return{d:$d(n),l:e.subarray(r+2)}},toSig(e){const{Err:t}=Rt,r=typeof e=="string"?Bd(e):e;yr(r);let n=r.length;if(n<2||r[0]!=48)throw new t("Invalid signature tag");if(r[1]!==n-2)throw new t("Invalid signature: incorrect length");const{d:i,l:o}=Rt._parseInt(r.subarray(2)),{d:s,l:a}=Rt._parseInt(o);if(a.length)throw new t("Invalid signature: left bytes after parsing");return{r:i,s}},hexFromSig(e){const t=l=>Number.parseInt(l[0],16)&8?"00"+l:l,r=l=>{const g=l.toString(16);return g.length&1?`0${g}`:g},n=t(r(e.s)),i=t(r(e.r)),o=n.length/2,s=i.length/2,a=r(o),c=r(s);return`30${r(s+o+4)}02${c}${i}02${a}${n}`}},rt=BigInt(0),Be=BigInt(1);BigInt(2);const bs=BigInt(3);BigInt(4);function Dd(e){const t=Md(e),{Fp:r}=t,n=t.toBytes||((R,h,y)=>{const b=h.toAffine();return pr(Uint8Array.from([4]),r.toBytes(b.x),r.toBytes(b.y))}),i=t.fromBytes||(R=>{const h=R.subarray(1),y=r.fromBytes(h.subarray(0,r.BYTES)),b=r.fromBytes(h.subarray(r.BYTES,2*r.BYTES));return{x:y,y:b}});function o(R){const{a:h,b:y}=t,b=r.sqr(R),T=r.mul(b,R);return r.add(r.add(T,r.mul(R,h)),y)}if(!r.eql(r.sqr(t.Gy),o(t.Gx)))throw new Error("bad generator point: equation left != right");function s(R){return typeof R=="bigint"&&rt<R&&R<t.n}function a(R){if(!s(R))throw new Error("Expected valid bigint: 0 < bigint < curve.n")}function c(R){const{allowedPrivateKeyLengths:h,nByteLength:y,wrapPrivateKey:b,n:T}=t;if(h&&typeof R!="bigint"){if(Ct(R)&&(R=Ht(R)),typeof R!="string"||!h.includes(R.length))throw new Error("Invalid key");R=R.padStart(y*2,"0")}let m;try{m=typeof R=="bigint"?R:Tt(qe("private key",R,y))}catch{throw new Error(`private key must be ${y} bytes, hex or bigint, not ${typeof R}`)}return b&&(m=Ne(m,T)),a(m),m}const l=new Map;function g(R){if(!(R instanceof p))throw new Error("ProjectivePoint expected")}class p{constructor(h,y,b){if(this.px=h,this.py=y,this.pz=b,h==null||!r.isValid(h))throw new Error("x required");if(y==null||!r.isValid(y))throw new Error("y required");if(b==null||!r.isValid(b))throw new Error("z required")}static fromAffine(h){const{x:y,y:b}=h||{};if(!h||!r.isValid(y)||!r.isValid(b))throw new Error("invalid affine point");if(h instanceof p)throw new Error("projective point not allowed");const T=m=>r.eql(m,r.ZERO);return T(y)&&T(b)?p.ZERO:new p(y,b,r.ONE)}get x(){return this.toAffine().x}get y(){return this.toAffine().y}static normalizeZ(h){const y=r.invertBatch(h.map(b=>b.pz));return h.map((b,T)=>b.toAffine(y[T])).map(p.fromAffine)}static fromHex(h){const y=p.fromAffine(i(qe("pointHex",h)));return y.assertValidity(),y}static fromPrivateKey(h){return p.BASE.multiply(c(h))}_setWindowSize(h){this._WINDOW_SIZE=h,l.delete(this)}assertValidity(){if(this.is0()){if(t.allowInfinityPoint&&!r.is0(this.py))return;throw new Error("bad point: ZERO")}const{x:h,y}=this.toAffine();if(!r.isValid(h)||!r.isValid(y))throw new Error("bad point: x or y not FE");const b=r.sqr(y),T=o(h);if(!r.eql(b,T))throw new Error("bad point: equation left != right");if(!this.isTorsionFree())throw new Error("bad point: not in prime-order subgroup")}hasEvenY(){const{y:h}=this.toAffine();if(r.isOdd)return!r.isOdd(h);throw new Error("Field doesn't support isOdd")}equals(h){g(h);const{px:y,py:b,pz:T}=this,{px:m,py:L,pz:N}=h,$=r.eql(r.mul(y,N),r.mul(m,T)),H=r.eql(r.mul(b,N),r.mul(L,T));return $&&H}negate(){return new p(this.px,r.neg(this.py),this.pz)}double(){const{a:h,b:y}=t,b=r.mul(y,bs),{px:T,py:m,pz:L}=this;let N=r.ZERO,$=r.ZERO,H=r.ZERO,k=r.mul(T,T),Q=r.mul(m,m),Z=r.mul(L,L),D=r.mul(T,m);return D=r.add(D,D),H=r.mul(T,L),H=r.add(H,H),N=r.mul(h,H),$=r.mul(b,Z),$=r.add(N,$),N=r.sub(Q,$),$=r.add(Q,$),$=r.mul(N,$),N=r.mul(D,N),H=r.mul(b,H),Z=r.mul(h,Z),D=r.sub(k,Z),D=r.mul(h,D),D=r.add(D,H),H=r.add(k,k),k=r.add(H,k),k=r.add(k,Z),k=r.mul(k,D),$=r.add($,k),Z=r.mul(m,L),Z=r.add(Z,Z),k=r.mul(Z,D),N=r.sub(N,k),H=r.mul(Z,Q),H=r.add(H,H),H=r.add(H,H),new p(N,$,H)}add(h){g(h);const{px:y,py:b,pz:T}=this,{px:m,py:L,pz:N}=h;let $=r.ZERO,H=r.ZERO,k=r.ZERO;const Q=t.a,Z=r.mul(t.b,bs);let D=r.mul(y,m),j=r.mul(b,L),O=r.mul(T,N),ee=r.add(y,b),I=r.add(m,L);ee=r.mul(ee,I),I=r.add(D,j),ee=r.sub(ee,I),I=r.add(y,T);let P=r.add(m,N);return I=r.mul(I,P),P=r.add(D,O),I=r.sub(I,P),P=r.add(b,T),$=r.add(L,N),P=r.mul(P,$),$=r.add(j,O),P=r.sub(P,$),k=r.mul(Q,I),$=r.mul(Z,O),k=r.add($,k),$=r.sub(j,k),k=r.add(j,k),H=r.mul($,k),j=r.add(D,D),j=r.add(j,D),O=r.mul(Q,O),I=r.mul(Z,I),j=r.add(j,O),O=r.sub(D,O),O=r.mul(Q,O),I=r.add(I,O),D=r.mul(j,I),H=r.add(H,D),D=r.mul(P,I),$=r.mul(ee,$),$=r.sub($,D),D=r.mul(ee,j),k=r.mul(P,k),k=r.add(k,D),new p($,H,k)}subtract(h){return this.add(h.negate())}is0(){return this.equals(p.ZERO)}wNAF(h){return v.wNAFCached(this,l,h,y=>{const b=r.invertBatch(y.map(T=>T.pz));return y.map((T,m)=>T.toAffine(b[m])).map(p.fromAffine)})}multiplyUnsafe(h){const y=p.ZERO;if(h===rt)return y;if(a(h),h===Be)return this;const{endo:b}=t;if(!b)return v.unsafeLadder(this,h);let{k1neg:T,k1:m,k2neg:L,k2:N}=b.splitScalar(h),$=y,H=y,k=this;for(;m>rt||N>rt;)m&Be&&($=$.add(k)),N&Be&&(H=H.add(k)),k=k.double(),m>>=Be,N>>=Be;return T&&($=$.negate()),L&&(H=H.negate()),H=new p(r.mul(H.px,b.beta),H.py,H.pz),$.add(H)}multiply(h){a(h);let y=h,b,T;const{endo:m}=t;if(m){const{k1neg:L,k1:N,k2neg:$,k2:H}=m.splitScalar(y);let{p:k,f:Q}=this.wNAF(N),{p:Z,f:D}=this.wNAF(H);k=v.constTimeNegate(L,k),Z=v.constTimeNegate($,Z),Z=new p(r.mul(Z.px,m.beta),Z.py,Z.pz),b=k.add(Z),T=Q.add(D)}else{const{p:L,f:N}=this.wNAF(y);b=L,T=N}return p.normalizeZ([b,T])[0]}multiplyAndAddUnsafe(h,y,b){const T=p.BASE,m=(N,$)=>$===rt||$===Be||!N.equals(T)?N.multiplyUnsafe($):N.multiply($),L=m(this,y).add(m(h,b));return L.is0()?void 0:L}toAffine(h){const{px:y,py:b,pz:T}=this,m=this.is0();h==null&&(h=m?r.ONE:r.inv(T));const L=r.mul(y,h),N=r.mul(b,h),$=r.mul(T,h);if(m)return{x:r.ZERO,y:r.ZERO};if(!r.eql($,r.ONE))throw new Error("invZ was invalid");return{x:L,y:N}}isTorsionFree(){const{h,isTorsionFree:y}=t;if(h===Be)return!0;if(y)return y(p,this);throw new Error("isTorsionFree() has not been declared for the elliptic curve")}clearCofactor(){const{h,clearCofactor:y}=t;return h===Be?this:y?y(p,this):this.multiplyUnsafe(t.h)}toRawBytes(h=!0){return this.assertValidity(),n(p,this,h)}toHex(h=!0){return Ht(this.toRawBytes(h))}}p.BASE=new p(t.Gx,t.Gy,r.ONE),p.ZERO=new p(r.ZERO,r.ONE,r.ZERO);const E=t.nBitLength,v=xd(p,t.endo?Math.ceil(E/2):E);return{CURVE:t,ProjectivePoint:p,normPrivateKeyToScalar:c,weierstrassEquation:o,isWithinCurveOrder:s}}function jd(e){const t=La(e);return _r(t,{hash:"hash",hmac:"function",randomBytes:"function"},{bits2int:"function",bits2int_modN:"function",lowS:"boolean"}),Object.freeze({lowS:!0,...t})}function kd(e){const t=jd(e),{Fp:r,n}=t,i=r.BYTES+1,o=2*r.BYTES+1;function s(I){return rt<I&&I<r.ORDER}function a(I){return Ne(I,n)}function c(I){return _i(I,n)}const{ProjectivePoint:l,normPrivateKeyToScalar:g,weierstrassEquation:p,isWithinCurveOrder:E}=Dd({...t,toBytes(I,P,F){const K=P.toAffine(),V=r.toBytes(K.x),X=pr;return F?X(Uint8Array.from([P.hasEvenY()?2:3]),V):X(Uint8Array.from([4]),V,r.toBytes(K.y))},fromBytes(I){const P=I.length,F=I[0],K=I.subarray(1);if(P===i&&(F===2||F===3)){const V=Tt(K);if(!s(V))throw new Error("Point is not on curve");const X=p(V);let J;try{J=r.sqrt(X)}catch(te){const ge=te instanceof Error?": "+te.message:"";throw new Error("Point is not on curve"+ge)}const le=(J&Be)===Be;return(F&1)===1!==le&&(J=r.neg(J)),{x:V,y:J}}else if(P===o&&F===4){const V=r.fromBytes(K.subarray(0,r.BYTES)),X=r.fromBytes(K.subarray(r.BYTES,2*r.BYTES));return{x:V,y:X}}else throw new Error(`Point of length ${P} was invalid. Expected ${i} compressed bytes or ${o} uncompressed bytes`)}}),v=I=>Ht(Gt(I,t.nByteLength));function R(I){const P=n>>Be;return I>P}function h(I){return R(I)?a(-I):I}const y=(I,P,F)=>Tt(I.slice(P,F));class b{constructor(P,F,K){this.r=P,this.s=F,this.recovery=K,this.assertValidity()}static fromCompact(P){const F=t.nByteLength;return P=qe("compactSignature",P,F*2),new b(y(P,0,F),y(P,F,2*F))}static fromDER(P){const{r:F,s:K}=Rt.toSig(qe("DER",P));return new b(F,K)}assertValidity(){if(!E(this.r))throw new Error("r must be 0 < r < CURVE.n");if(!E(this.s))throw new Error("s must be 0 < s < CURVE.n")}addRecoveryBit(P){return new b(this.r,this.s,P)}recoverPublicKey(P){const{r:F,s:K,recovery:V}=this,X=H(qe("msgHash",P));if(V==null||![0,1,2,3].includes(V))throw new Error("recovery id invalid");const J=V===2||V===3?F+t.n:F;if(J>=r.ORDER)throw new Error("recovery id 2 or 3 invalid");const le=V&1?"03":"02",B=l.fromHex(le+v(J)),te=c(J),ge=a(-X*te),be=a(K*te),we=l.BASE.multiplyAndAddUnsafe(B,ge,be);if(!we)throw new Error("point at infinify");return we.assertValidity(),we}hasHighS(){return R(this.s)}normalizeS(){return this.hasHighS()?new b(this.r,a(-this.s),this.recovery):this}toDERRawBytes(){return zt(this.toDERHex())}toDERHex(){return Rt.hexFromSig({r:this.r,s:this.s})}toCompactRawBytes(){return zt(this.toCompactHex())}toCompactHex(){return v(this.r)+v(this.s)}}const T={isValidPrivateKey(I){try{return g(I),!0}catch{return!1}},normPrivateKeyToScalar:g,randomPrivateKey:()=>{const I=Pa(t.n);return Pd(t.randomBytes(I),t.n)},precompute(I=8,P=l.BASE){return P._setWindowSize(I),P.multiply(BigInt(3)),P}};function m(I,P=!0){return l.fromPrivateKey(I).toRawBytes(P)}function L(I){const P=Ct(I),F=typeof I=="string",K=(P||F)&&I.length;return P?K===i||K===o:F?K===2*i||K===2*o:I instanceof l}function N(I,P,F=!0){if(L(I))throw new Error("first arg must be private key");if(!L(P))throw new Error("second arg must be public key");return l.fromHex(P).multiply(g(I)).toRawBytes(F)}const $=t.bits2int||function(I){const P=Tt(I),F=I.length*8-t.nBitLength;return F>0?P>>BigInt(F):P},H=t.bits2int_modN||function(I){return a($(I))},k=Ui(t.nBitLength);function Q(I){if(typeof I!="bigint")throw new Error("bigint expected");if(!(rt<=I&&I<k))throw new Error(`bigint expected < 2^${t.nBitLength}`);return Gt(I,t.nByteLength)}function Z(I,P,F=D){if(["recovered","canonical"].some(Se=>Se in F))throw new Error("sign() legacy options not supported");const{hash:K,randomBytes:V}=t;let{lowS:X,prehash:J,extraEntropy:le}=F;X==null&&(X=!0),I=qe("msgHash",I),J&&(I=qe("prehashed msgHash",K(I)));const B=H(I),te=g(P),ge=[Q(te),Q(B)];if(le!=null&&le!==!1){const Se=le===!0?V(r.BYTES):le;ge.push(qe("extraEntropy",Se))}const be=pr(...ge),we=B;function Ee(Se){const Te=$(Se);if(!E(Te))return;const We=c(Te),Ae=l.BASE.multiply(Te).toAffine(),_=a(Ae.x);if(_===rt)return;const S=a(We*a(we+_*te));if(S===rt)return;let C=(Ae.x===_?0:2)|Number(Ae.y&Be),W=S;return X&&R(S)&&(W=h(S),C^=1),new b(_,W,C)}return{seed:be,k2sig:Ee}}const D={lowS:t.lowS,prehash:!1},j={lowS:t.lowS,prehash:!1};function O(I,P,F=D){const{seed:K,k2sig:V}=Z(I,P,F),X=t;return Oa(X.hash.outputLen,X.nByteLength,X.hmac)(K,V)}l.BASE._setWindowSize(8);function ee(I,P,F,K=j){var Ae;const V=I;if(P=qe("msgHash",P),F=qe("publicKey",F),"strict"in K)throw new Error("options.strict was renamed to lowS");const{lowS:X,prehash:J}=K;let le,B;try{if(typeof V=="string"||Ct(V))try{le=b.fromDER(V)}catch(_){if(!(_ instanceof Rt.Err))throw _;le=b.fromCompact(V)}else if(typeof V=="object"&&typeof V.r=="bigint"&&typeof V.s=="bigint"){const{r:_,s:S}=V;le=new b(_,S)}else throw new Error("PARSE");B=l.fromHex(F)}catch(_){if(_.message==="PARSE")throw new Error("signature must be Signature instance, Uint8Array or hex string");return!1}if(X&&le.hasHighS())return!1;J&&(P=t.hash(P));const{r:te,s:ge}=le,be=H(P),we=c(ge),Ee=a(be*we),Se=a(te*we),Te=(Ae=l.BASE.multiplyAndAddUnsafe(B,Ee,Se))==null?void 0:Ae.toAffine();return Te?a(Te.x)===te:!1}return{CURVE:t,getPublicKey:m,getSharedSecret:N,sign:O,verify:ee,ProjectivePoint:l,Signature:b,utils:T}}/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */function Wd(e){return{hash:e,hmac:(t,...r)=>Ra(e,t,rd(...r)),randomBytes:id}}function Ud(e,t){const r=n=>kd({...e,...Wd(n)});return Object.freeze({...r(t),create:r})}/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const xa=BigInt("0xfffffffffffffffffffffffffffffffffffffffffffffffffffffffefffffc2f"),ws=BigInt("0xfffffffffffffffffffffffffffffffebaaedce6af48a03bbfd25e8cd0364141"),Fd=BigInt(1),mi=BigInt(2),ys=(e,t)=>(e+t/mi)/t;function qd(e){const t=xa,r=BigInt(3),n=BigInt(6),i=BigInt(11),o=BigInt(22),s=BigInt(23),a=BigInt(44),c=BigInt(88),l=e*e*e%t,g=l*l*e%t,p=Me(g,r,t)*g%t,E=Me(p,r,t)*g%t,v=Me(E,mi,t)*l%t,R=Me(v,i,t)*v%t,h=Me(R,o,t)*R%t,y=Me(h,a,t)*h%t,b=Me(y,c,t)*y%t,T=Me(b,a,t)*h%t,m=Me(T,r,t)*g%t,L=Me(m,s,t)*R%t,N=Me(L,n,t)*l%t,$=Me(N,mi,t);if(!vi.eql(vi.sqr($),e))throw new Error("Cannot find square root");return $}const vi=Nd(xa,void 0,void 0,{sqrt:qd}),Fi=Ud({a:BigInt(0),b:BigInt(7),Fp:vi,n:ws,Gx:BigInt("55066263022277343669578718895168534326250603453777594175500187360389116729240"),Gy:BigInt("32670510020758816978083085130507043184471273380659243275938904335757337482424"),h:BigInt(1),lowS:!0,endo:{beta:BigInt("0x7ae96a2b657c07106e64479eac3434e99cf0497512f58995c1396c28719501ee"),splitScalar:e=>{const t=ws,r=BigInt("0x3086d221a7d46bcde86c90e49284eb15"),n=-Fd*BigInt("0xe4437ed6010e88286f547fa90abfe4c3"),i=BigInt("0x114ca50f7a8e2f3f657c1108d9d44cfd8"),o=r,s=BigInt("0x100000000000000000000000000000000"),a=ys(o*e,t),c=ys(-n*e,t);let l=Ne(e-a*r-c*i,t),g=Ne(-a*n-c*o,t);const p=l>s,E=g>s;if(p&&(l=t-l),E&&(g=t-g),l>s||g>s)throw new Error("splitScalar: Endomorphism failed, k="+e);return{k1neg:p,k1:l,k2neg:E,k2:g}}}},fd);BigInt(0);Fi.ProjectivePoint;function Hd(e){let t=e;if(typeof t!="string")throw new Error(`[padToEven] value must be type 'string', received ${typeof t}`);return t.length%2&&(t=`0${t}`),t}BigInt(0);const Ei={},Si={};for(let e=0;e<16;e++){const t=e,r=e*16,n=e.toString(16).toLowerCase();Si[n]=t,Si[n.toUpperCase()]=t,Ei[n]=r,Ei[n.toUpperCase()]=r}function zd(e){const t=e.length,r=new Uint8Array(t/2);for(let n=0;n<t;n+=2)r[n/2]=Ei[e[n]]+Si[e[n+1]];return r}Array.from({length:256},(e,t)=>t.toString(16).padStart(2,"0"));for(let e=0;e<=256*256-1;e++)BigInt(e);const bn=e=>{if(typeof e!="string")throw new Error(`hex argument type ${typeof e} must be of type string`);if(!/^0x[0-9a-fA-F]*$/.test(e))throw new Error(`Input must be a 0x-prefixed hexadecimal string, got ${e}`);const t=e.slice(2);return zd(t.length%2===0?t:Hd(t))},Gd=e=>{if(!Number.isSafeInteger(e)||e<0)throw new Error(`Received an invalid integer type: ${e}`);return`0x${e.toString(16)}`},mr=e=>{const t=Gd(e);return bn(t)};BigInt("0xffffffffffffffff");BigInt("0xffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff");BigInt("115792089237316195423570985008687907853269984665640564039457584007913129639935");Fi.CURVE.n;Fi.CURVE.n/BigInt(2);BigInt("0x10000000000000000000000000000000000000000000000000000000000000000");const Vd="0xc5d2460186f7233c927e7db2dcc703c0e500b653ca82273b7bfad8045d85a470";bn(Vd);const Kd="0x1dcc4de8dec75d7aab85b567b6ccd41ad312451b948a7413f0a142fd40d49347";bn(Kd);const Yd="0x56e81f171bcc55a6ff8345e692c0f86e5b48e01b996cadc001622fb5e363b421";bn(Yd);Uint8Array.from([128]);BigInt(-1);BigInt(0);BigInt(1);BigInt(2);BigInt(3);BigInt(7);BigInt(8);BigInt(27);BigInt(28);BigInt(31);BigInt(32);BigInt(64);BigInt(128);BigInt(255);BigInt(256);BigInt(96);BigInt(100);BigInt(160);BigInt(224);BigInt(7922816251426434e13);BigInt(1461501637330903e33);BigInt(2695994666715064e52);BigInt(1e9);Array.from({length:256},(e,t)=>t.toString(16).padStart(2,"0"));var _s;(function(e){e.String="string",e.Bytes="view",e.Number="number"})(_s||(_s={}));var ms;(function(e){e.String="string",e.Bytes="view",e.JSON="json"})(ms||(ms={}));var vs;(function(e){e[e.Number=0]="Number",e[e.BigInt=1]="BigInt",e[e.Uint8Array=2]="Uint8Array",e[e.PrefixedHexString=3]="PrefixedHexString"})(vs||(vs={}));var Es;(function(e){e[e.Deposit=0]="Deposit",e[e.Withdrawal=1]="Withdrawal",e[e.Consolidation=2]="Consolidation"})(Es||(Es={}));var Nt;(function(e){e[e.Version=0]="Version",e[e.Balance=1]="Balance",e[e.Nonce=2]="Nonce",e[e.CodeHash=3]="CodeHash",e[e.CodeSize=4]="CodeSize"})(Nt||(Nt={}));mr(Nt.Version);mr(Nt.Balance);mr(Nt.Nonce);mr(Nt.CodeHash);mr(Nt.CodeSize);BigInt(256)**BigInt(31);var Zd={exports:{}},qi={},Hi={};Object.defineProperty(Hi,"__esModule",{value:!0});function Jd(e){var t=4,r=e.length,n=r%t;if(!n)return e;var i=r,o=t-n,s=r+o,a=He.alloc(s);for(a.write(e);o--;)a.write("=",i++);return a.toString()}Hi.default=Jd;Object.defineProperty(qi,"__esModule",{value:!0});var Qd=Hi;function Ma(e,t){return t===void 0&&(t="utf8"),He.isBuffer(e)?Ai(e.toString("base64")):Ai(He.from(e,t).toString("base64"))}function Xd(e,t){return t===void 0&&(t="utf8"),He.from(zi(e),"base64").toString(t)}function zi(e){return e=e.toString(),Qd.default(e).replace(/\-/g,"+").replace(/_/g,"/")}function Ai(e){return e.replace(/=/g,"").replace(/\+/g,"-").replace(/\//g,"_")}function eh(e){return He.from(zi(e),"base64")}var Yt=Ma;Yt.encode=Ma;Yt.decode=Xd;Yt.toBase64=zi;Yt.fromBase64=Ai;Yt.toBuffer=eh;qi.default=Yt;(function(e){e.exports=qi.default,e.exports.default=e.exports})(Zd);const ue={MAINNET:"mainnet",TESTNET:"testnet",CYAN:"cyan",AQUA:"aqua",CELESTE:"celeste"},dt={SAPPHIRE_DEVNET:"sapphire_devnet",SAPPHIRE_MAINNET:"sapphire_mainnet"};ue.MAINNET+"",ue.TESTNET+"",ue.CYAN+"",ue.AQUA+"",ue.CELESTE+"";ue.AQUA+"",dt.SAPPHIRE_MAINNET,ue.CELESTE+"",dt.SAPPHIRE_MAINNET,ue.CYAN+"",dt.SAPPHIRE_MAINNET,ue.MAINNET+"",dt.SAPPHIRE_MAINNET,ue.TESTNET+"",dt.SAPPHIRE_DEVNET;ue.MAINNET+"",ue.TESTNET+"",ue.CYAN+"",ue.AQUA+"",ue.CELESTE+"";dt.SAPPHIRE_MAINNET+"",dt.SAPPHIRE_DEVNET+"",ue.MAINNET+"",ue.TESTNET+"",ue.CYAN+"",ue.AQUA+"",ue.CELESTE+"";ue.MAINNET+"",ue.TESTNET+"",ue.CYAN+"",ue.AQUA+"",ue.CELESTE+"";function Ss(e){let t=!1,r=0,n;try{n=window[e],t=!0,r=n.length;const i="__storage_test__";return n.setItem(i,i),n.removeItem(i),!0}catch(i){const o=i;return o&&(o.code===22||o.code===1014||o.name==="QuotaExceededError"||o.name==="NS_ERROR_DOM_QUOTA_REACHED")&&t&&r!==0}}class th{constructor(){G(this,"store",new Map)}getItem(t){return this.store.get(t)||null}setItem(t,r){this.store.set(t,r)}removeItem(t){this.store.delete(t)}}class rh{constructor(t,r){G(this,"storage",void 0),G(this,"_storeKey",void 0),this.storage=r,this._storeKey=t;try{r.getItem(t)||this.resetStore()}catch{}}static getInstance(t){let r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"local";if(!this.instanceMap.has(t)){let n;r==="local"&&Ss("localStorage")?n=window.localStorage:r==="session"&&Ss("sessionStorage")?n=window.sessionStorage:n=new th,this.instanceMap.set(t,new this(t,n))}return this.instanceMap.get(t)}toJSON(){return this.storage.getItem(this._storeKey)}resetStore(){const t=this.getStore();return this.storage.removeItem(this._storeKey),t}getStore(){return JSON.parse(this.storage.getItem(this._storeKey)||"{}")}get(t){return JSON.parse(this.storage.getItem(this._storeKey)||"{}")[t]}set(t,r){const n=JSON.parse(this.storage.getItem(this._storeKey)||"{}");n[t]=r,this.storage.setItem(this._storeKey,JSON.stringify(n))}}G(rh,"instanceMap",new Map);De(De({},dt),ue);const Ur={IFRAME_STATUS:"iframe_status",CLOSE_WINDOW:"close_window",USER_LOGGED_IN:"user_logged_in",USER_LOGGED_OUT:"user_logged_out"},nt={LOGOUT:"logout",WALLET_INSTANCE_ID:"wallet_instance_id",USER_INFO:"user_info",SET_PROVIDER:"set_provider",TOPUP:"topup",IFRAME_STATUS:"iframe_status",CLOSED_WINDOW:"closed_window",WINDOW_BLOCKED:"window_blocked",GET_PROVIDER_STATE:"get_provider_state",LOGIN_WITH_PRIVATE_KEY:"login_with_private_key",SHOW_WALLET_CONNECT:"show_wallet_connect",SHOW_CHECKOUT:"show_checkout",SHOW_WALLET_UI:"show_wallet_ui",LOGIN_WITH_SESSION_ID:"login_with_session_id"},nh={GET_PROVIDER_STATE:"wallet_get_provider_state"},ii={ACCOUNTS_CHANGED:"wallet_accounts_changed",CHAIN_CHANGED:"wallet_chain_changed",UNLOCK_STATE_CHANGED:"wallet_unlock_state_changed"};function ih(e){return function(r,n,i){i(o=>{n.error&&Qr.warn(`Error in RPC response:
`,n),!r.isTorusInternal&&(Qr.info(`RPC (${e.origin}):`,r,"->",n),o())})}}var it={},ht={};Object.defineProperty(ht,"__esModule",{value:!0});ht.EthereumProviderError=ht.EthereumRpcError=void 0;const oh=ua;class $a extends Error{constructor(t,r,n){if(!Number.isInteger(t))throw new Error('"code" must be an integer.');if(!r||typeof r!="string")throw new Error('"message" must be a nonempty string.');super(r),this.code=t,n!==void 0&&(this.data=n)}serialize(){const t={code:this.code,message:this.message};return this.data!==void 0&&(t.data=this.data),this.stack&&(t.stack=this.stack),t}toString(){return oh.default(this.serialize(),lh,2)}}ht.EthereumRpcError=$a;class sh extends $a{constructor(t,r,n){if(!ah(t))throw new Error('"code" must be an integer such that: 1000 <= code <= 4999');super(t,r,n)}}ht.EthereumProviderError=sh;function ah(e){return Number.isInteger(e)&&e>=1e3&&e<=4999}function lh(e,t){if(t!=="[Circular]")return t}var Gi={},gt={};Object.defineProperty(gt,"__esModule",{value:!0});gt.errorValues=gt.errorCodes=void 0;gt.errorCodes={rpc:{invalidInput:-32e3,resourceNotFound:-32001,resourceUnavailable:-32002,transactionRejected:-32003,methodNotSupported:-32004,limitExceeded:-32005,parse:-32700,invalidRequest:-32600,methodNotFound:-32601,invalidParams:-32602,internal:-32603},provider:{userRejectedRequest:4001,unauthorized:4100,unsupportedMethod:4200,disconnected:4900,chainDisconnected:4901}};gt.errorValues={"-32700":{standard:"JSON RPC 2.0",message:"Invalid JSON was received by the server. An error occurred on the server while parsing the JSON text."},"-32600":{standard:"JSON RPC 2.0",message:"The JSON sent is not a valid Request object."},"-32601":{standard:"JSON RPC 2.0",message:"The method does not exist / is not available."},"-32602":{standard:"JSON RPC 2.0",message:"Invalid method parameter(s)."},"-32603":{standard:"JSON RPC 2.0",message:"Internal JSON-RPC error."},"-32000":{standard:"EIP-1474",message:"Invalid input."},"-32001":{standard:"EIP-1474",message:"Resource not found."},"-32002":{standard:"EIP-1474",message:"Resource unavailable."},"-32003":{standard:"EIP-1474",message:"Transaction rejected."},"-32004":{standard:"EIP-1474",message:"Method not supported."},"-32005":{standard:"EIP-1474",message:"Request limit exceeded."},4001:{standard:"EIP-1193",message:"User rejected the request."},4100:{standard:"EIP-1193",message:"The requested account and/or method has not been authorized by the user."},4200:{standard:"EIP-1193",message:"The requested method is not supported by this Ethereum provider."},4900:{standard:"EIP-1193",message:"The provider is disconnected from all chains."},4901:{standard:"EIP-1193",message:"The provider is disconnected from the specified chain."}};(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.serializeError=e.isValidCode=e.getMessageFromCode=e.JSON_RPC_SERVER_ERROR_MESSAGE=void 0;const t=gt,r=ht,n=t.errorCodes.rpc.internal,i="Unspecified error message. This is a bug, please report it.",o={code:n,message:s(n)};e.JSON_RPC_SERVER_ERROR_MESSAGE="Unspecified server error.";function s(E,v=i){if(Number.isInteger(E)){const R=E.toString();if(p(t.errorValues,R))return t.errorValues[R].message;if(l(E))return e.JSON_RPC_SERVER_ERROR_MESSAGE}return v}e.getMessageFromCode=s;function a(E){if(!Number.isInteger(E))return!1;const v=E.toString();return!!(t.errorValues[v]||l(E))}e.isValidCode=a;function c(E,{fallbackError:v=o,shouldIncludeStack:R=!1}={}){var h,y;if(!v||!Number.isInteger(v.code)||typeof v.message!="string")throw new Error("Must provide fallback error with integer number code and string message.");if(E instanceof r.EthereumRpcError)return E.serialize();const b={};if(E&&typeof E=="object"&&!Array.isArray(E)&&p(E,"code")&&a(E.code)){const m=E;b.code=m.code,m.message&&typeof m.message=="string"?(b.message=m.message,p(m,"data")&&(b.data=m.data)):(b.message=s(b.code),b.data={originalError:g(E)})}else{b.code=v.code;const m=(h=E)===null||h===void 0?void 0:h.message;b.message=m&&typeof m=="string"?m:v.message,b.data={originalError:g(E)}}const T=(y=E)===null||y===void 0?void 0:y.stack;return R&&E&&T&&typeof T=="string"&&(b.stack=T),b}e.serializeError=c;function l(E){return E>=-32099&&E<=-32e3}function g(E){return E&&typeof E=="object"&&!Array.isArray(E)?Object.assign({},E):E}function p(E,v){return Object.prototype.hasOwnProperty.call(E,v)}})(Gi);var wn={};Object.defineProperty(wn,"__esModule",{value:!0});wn.ethErrors=void 0;const Vi=ht,Ba=Gi,Re=gt;wn.ethErrors={rpc:{parse:e=>$e(Re.errorCodes.rpc.parse,e),invalidRequest:e=>$e(Re.errorCodes.rpc.invalidRequest,e),invalidParams:e=>$e(Re.errorCodes.rpc.invalidParams,e),methodNotFound:e=>$e(Re.errorCodes.rpc.methodNotFound,e),internal:e=>$e(Re.errorCodes.rpc.internal,e),server:e=>{if(!e||typeof e!="object"||Array.isArray(e))throw new Error("Ethereum RPC Server errors must provide single object argument.");const{code:t}=e;if(!Number.isInteger(t)||t>-32005||t<-32099)throw new Error('"code" must be an integer such that: -32099 <= code <= -32005');return $e(t,e)},invalidInput:e=>$e(Re.errorCodes.rpc.invalidInput,e),resourceNotFound:e=>$e(Re.errorCodes.rpc.resourceNotFound,e),resourceUnavailable:e=>$e(Re.errorCodes.rpc.resourceUnavailable,e),transactionRejected:e=>$e(Re.errorCodes.rpc.transactionRejected,e),methodNotSupported:e=>$e(Re.errorCodes.rpc.methodNotSupported,e),limitExceeded:e=>$e(Re.errorCodes.rpc.limitExceeded,e)},provider:{userRejectedRequest:e=>sr(Re.errorCodes.provider.userRejectedRequest,e),unauthorized:e=>sr(Re.errorCodes.provider.unauthorized,e),unsupportedMethod:e=>sr(Re.errorCodes.provider.unsupportedMethod,e),disconnected:e=>sr(Re.errorCodes.provider.disconnected,e),chainDisconnected:e=>sr(Re.errorCodes.provider.chainDisconnected,e),custom:e=>{if(!e||typeof e!="object"||Array.isArray(e))throw new Error("Ethereum Provider custom errors must provide single object argument.");const{code:t,message:r,data:n}=e;if(!r||typeof r!="string")throw new Error('"message" must be a nonempty string');return new Vi.EthereumProviderError(t,r,n)}}};function $e(e,t){const[r,n]=Da(t);return new Vi.EthereumRpcError(e,r||Ba.getMessageFromCode(e),n)}function sr(e,t){const[r,n]=Da(t);return new Vi.EthereumProviderError(e,r||Ba.getMessageFromCode(e),n)}function Da(e){if(e){if(typeof e=="string")return[e];if(typeof e=="object"&&!Array.isArray(e)){const{message:t,data:r}=e;if(t&&typeof t!="string")throw new Error("Must specify string message.");return[t||void 0,r]}}return[]}(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.getMessageFromCode=e.serializeError=e.EthereumProviderError=e.EthereumRpcError=e.ethErrors=e.errorCodes=void 0;const t=ht;Object.defineProperty(e,"EthereumRpcError",{enumerable:!0,get:function(){return t.EthereumRpcError}}),Object.defineProperty(e,"EthereumProviderError",{enumerable:!0,get:function(){return t.EthereumProviderError}});const r=Gi;Object.defineProperty(e,"serializeError",{enumerable:!0,get:function(){return r.serializeError}}),Object.defineProperty(e,"getMessageFromCode",{enumerable:!0,get:function(){return r.getMessageFromCode}});const n=wn;Object.defineProperty(e,"ethErrors",{enumerable:!0,get:function(){return n.ethErrors}});const i=gt;Object.defineProperty(e,"errorCodes",{enumerable:!0,get:function(){return i.errorCodes}})})(it);var uh=function e(t,r){if(t===r)return!0;if(t&&r&&typeof t=="object"&&typeof r=="object"){if(t.constructor!==r.constructor)return!1;var n,i,o;if(Array.isArray(t)){if(n=t.length,n!=r.length)return!1;for(i=n;i--!==0;)if(!e(t[i],r[i]))return!1;return!0}if(t.constructor===RegExp)return t.source===r.source&&t.flags===r.flags;if(t.valueOf!==Object.prototype.valueOf)return t.valueOf()===r.valueOf();if(t.toString!==Object.prototype.toString)return t.toString()===r.toString();if(o=Object.keys(t),n=o.length,n!==Object.keys(r).length)return!1;for(i=n;i--!==0;)if(!Object.prototype.hasOwnProperty.call(r,o[i]))return!1;for(i=n;i--!==0;){var s=o[i];if(!e(t[s],r[s]))return!1}return!0}return t!==t&&r!==r};const ch=Vt(uh);var fh="2.1.0";function ja(e){return e!==null&&typeof e=="object"&&typeof e.pipe=="function"}function dh(e){return ja(e)&&e.writable!==!1&&typeof e._write=="function"&&typeof e._writableState=="object"}function hh(e){return ja(e)&&e.readable!==!1&&typeof e._read=="function"&&typeof e._readableState=="object"}function gh(e){return dh(e)&&hh(e)}var Ve={errors:{disconnected:()=>"Torus: Lost connection to Torus.",permanentlyDisconnected:()=>"Torus: Disconnected from iframe. Page reload required.",unsupportedSync:e=>`Torus: The Torus Ethereum provider does not support synchronous methods like ${e} without a callback parameter.`,invalidDuplexStream:()=>"Must provide a Node.js-style duplex stream.",invalidOptions:e=>`Invalid options. Received: { maxEventListeners: ${e}}`,invalidRequestArgs:()=>"Expected a single, non-array, object argument.",invalidRequestMethod:()=>"'args.method' must be a non-empty string.",invalidRequestParams:()=>"'args.params' must be an object or array if provided.",invalidLoggerObject:()=>"'args.logger' must be an object if provided.",invalidLoggerMethod:e=>`'args.logger' must include required method '${e}'.`},info:{connected:e=>`Torus: Connected to chain with ID "${e}".`}};const ph={PRODUCTION:"production"},lr={BOTTOM_LEFT:"bottom-left",TOP_LEFT:"top-left",BOTTOM_RIGHT:"bottom-right",TOP_RIGHT:"top-right"},bh={en:{embed:{continue:"Continue",actionRequired:"Authorization required",pendingAction:"Click continue to proceed with your request in a popup",cookiesRequired:"Cookies Required",enableCookies:"Please enable cookies in your browser preferences to access Torus",clickHere:"More Info"}},de:{embed:{continue:"Fortsetzen",actionRequired:"Autorisierung erforderlich",pendingAction:"Klicken Sie in einem Popup auf Weiter, um mit Ihrer Anfrage fortzufahren",cookiesRequired:"Cookies bentigt",enableCookies:"Bitte aktivieren Sie Cookies in Ihren Browsereinstellungen, um auf Torus zuzugreifen",clickHere:"Mehr Info"}},ja:{embed:{continue:"",actionRequired:"",pendingAction:"",cookiesRequired:"",enableCookies:"TorusCookie",clickHere:""}},ko:{embed:{continue:"",actionRequired:" ",pendingAction:"    .",cookiesRequired:" ",enableCookies:"     Torus .",clickHere:"  "}},zh:{embed:{continue:"",actionRequired:"",pendingAction:"",cookiesRequired:"Cookie",enableCookies:"cookieTorus",clickHere:""}}};var Ki={translations:bh,localStorageKeyPrefix:"torus-"},ae=Qr.getLogger("solana-embed");function wh(){return(e,t,r)=>{(typeof e.method!="string"||!e.method)&&(t.error=it.ethErrors.rpc.invalidRequest({message:"The request 'method' must be a non-empty string.",data:e})),r(n=>{const{error:i}=t;return i&&ae.error(`Torus - RPC Error: ${i.message}`,i),n()})}}function yh(e,t,r){let n=`Torus: Lost connection to "${e}".`;t!=null&&t.stack&&(n+=`
${t.stack}`),ae.warn(n),r&&r.listenerCount("error")>0&&r.emit("error",n)}const Fr=()=>Math.random().toString(36).slice(2),ka=async e=>{let t,r;switch(e){case"testing":t="https://solana-testing.tor.us",r="debug";break;case"development":t="http://localhost:8080",r="debug";break;default:t="https://solana.tor.us",r="error";break}return{torusUrl:t,logLevel:r}},_h=()=>{let e=window.navigator.language||"en-US";const t=e.split("-");return e=Object.prototype.hasOwnProperty.call(Ki.translations,t[0])?t[0]:"en",e},mh={height:660,width:375},vh={height:740,width:1315},Eh={height:700,width:1200},Wa={height:600,width:400};function Sh(e){let t;try{t=window[e];const r="__storage_test__";return t.setItem(r,r),t.removeItem(r),!0}catch(r){const n=r;return n&&(n.code===22||n.code===1014||n.name==="QuotaExceededError"||n.name==="NS_ERROR_DOM_QUOTA_REACHED")&&t&&t.length!==0}}function cr(e){let{width:t,height:r}=e;const n=window.screenLeft!==void 0?window.screenLeft:window.screenX,i=window.screenTop!==void 0?window.screenTop:window.screenY,o=window.innerWidth?window.innerWidth:document.documentElement.clientWidth?document.documentElement.clientWidth:window.screen.width,s=window.innerHeight?window.innerHeight:document.documentElement.clientHeight?document.documentElement.clientHeight:window.screen.height,a=1,c=Math.abs((o-t)/2/a+n),l=Math.abs((s-r)/2/a+i);return`titlebar=0,toolbar=0,status=0,location=0,menubar=0,height=${r/a},width=${t/a},top=${l},left=${c}`}class Ua extends hn{constructor(t,r){let{maxEventListeners:n=100,jsonRpcStreamName:i="provider"}=r;if(super(),G(this,"isTorus",void 0),G(this,"_rpcEngine",void 0),G(this,"jsonRpcConnectionEvents",void 0),G(this,"_state",void 0),!gh(t))throw new Error(Ve.errors.invalidDuplexStream());this.isTorus=!0,this.setMaxListeners(n),this._handleConnect=this._handleConnect.bind(this),this._handleDisconnect=this._handleDisconnect.bind(this),this._handleStreamDisconnect=this._handleStreamDisconnect.bind(this),this._rpcRequest=this._rpcRequest.bind(this),this._initializeState=this._initializeState.bind(this),this.request=this.request.bind(this),this.sendAsync=this.sendAsync.bind(this);const o=new Yf;Xo(t,o,t,this._handleStreamDisconnect.bind(this,"Torus")),o.ignoreStream("phishing");const s=Gf();Xo(s.stream,o.createStream(i),s.stream,this._handleStreamDisconnect.bind(this,"Torus RpcProvider"));const a=new tt;a.push(Vf()),a.push(wh()),a.push(ih({origin:location.origin})),a.push(s.middleware),this._rpcEngine=a,this.jsonRpcConnectionEvents=s.events}async request(t){if(!t||typeof t!="object"||Array.isArray(t))throw it.ethErrors.rpc.invalidRequest({message:Ve.errors.invalidRequestArgs(),data:t});const{method:r,params:n}=t;if(typeof r!="string"||r.length===0)throw it.ethErrors.rpc.invalidRequest({message:Ve.errors.invalidRequestMethod(),data:t});if(n!==void 0&&!Array.isArray(n)&&(typeof n!="object"||n===null))throw it.ethErrors.rpc.invalidRequest({message:Ve.errors.invalidRequestParams(),data:t});return new Promise((i,o)=>{this._rpcRequest({method:r,params:n},wi(i,o))})}send(t,r){this._rpcRequest(t,r)}sendAsync(t){return new Promise((r,n)=>{this._rpcRequest(t,wi(r,n))})}_handleStreamDisconnect(t,r){yh(t,r,this),this._handleDisconnect(!1,r?r.message:void 0)}}const Ut=e=>{const t=window.document.createElement("template"),r=e.trim();return t.innerHTML=r,t.content.firstChild};function qr(e){return e.version===void 0}class Fa extends hn{constructor(t){let{url:r,target:n,features:i,timeout:o=3e4}=t;super(),G(this,"url",void 0),G(this,"target",void 0),G(this,"features",void 0),G(this,"window",void 0),G(this,"windowTimer",void 0),G(this,"iClosedWindow",void 0),G(this,"timeout",void 0),this.url=r,this.target=n||"_blank",this.features=i||cr(Eh),this.window=void 0,this.windowTimer=void 0,this.iClosedWindow=!1,this.timeout=o,this._setupTimer()}_setupTimer(){this.windowTimer=Number(setInterval(()=>{this.window&&this.window.closed&&(clearInterval(this.windowTimer),setTimeout(()=>{this.iClosedWindow||this.emit("close"),this.iClosedWindow=!1,this.window=void 0},this.timeout)),this.window===void 0&&clearInterval(this.windowTimer)},500))}open(){var t;return this.window=window.open(this.url.href,this.target,this.features),(t=this.window)!=null&&t.focus&&this.window.focus(),Promise.resolve()}close(){this.iClosedWindow=!0,this.window&&this.window.close()}redirect(t){t?window.location.replace(this.url.href):window.location.href=this.url.href}}class yn extends Ua{constructor(t,r){let{maxEventListeners:n=100,jsonRpcStreamName:i="provider"}=r;super(t,{maxEventListeners:n,jsonRpcStreamName:i}),G(this,"embedTranslations",void 0),G(this,"torusUrl",void 0),G(this,"dappStorageKey",void 0),G(this,"windowRefs",void 0),G(this,"tryWindowHandle",void 0),G(this,"torusAlertContainer",void 0),G(this,"torusIframe",void 0),this._state=De({},yn._defaultState),this.torusUrl="",this.dappStorageKey="";const o=Ki.translations[_h()];this.embedTranslations=o.embed,this.windowRefs={},this.on("connect",()=>{this._state.isConnected=!0});const s=a=>{const{method:c,params:l}=a;if(c===Ur.IFRAME_STATUS){const{isFullScreen:g,rid:p}=l;this._displayIframe({isFull:g,rid:p})}else if(c==="create_window"){const{windowId:g,url:p}=l;this._createPopupBlockAlert(g,p)}else if(c===Ur.CLOSE_WINDOW)this._handleCloseWindow(l);else if(c===Ur.USER_LOGGED_IN){const{currentLoginProvider:g}=l;this._state.isLoggedIn=!0,this._state.currentLoginProvider=g}else c===Ur.USER_LOGGED_OUT&&(this._state.isLoggedIn=!1,this._state.currentLoginProvider=null,this._displayIframe())};this.jsonRpcConnectionEvents.on("notification",s)}get isLoggedIn(){return this._state.isLoggedIn}get isIFrameFullScreen(){return this._state.isIFrameFullScreen}isConnected(){return this._state.isConnected}async _initializeState(t){try{const{torusUrl:r,dappStorageKey:n,torusAlertContainer:i,torusIframe:o}=t;this.torusUrl=r,this.dappStorageKey=n,this.torusAlertContainer=i,this.torusIframe=o,this.torusIframe.addEventListener("load",()=>{this._state.isIFrameFullScreen||this._displayIframe()});const{currentLoginProvider:s,isLoggedIn:a}=await this.request({method:nt.GET_PROVIDER_STATE,params:[]});this._handleConnect(s,a)}catch(r){ae.error("Torus: Failed to get initial state. Please report this bug.",r)}finally{ae.info("initialized communication state"),this._state.initialized=!0,this.emit("_initialized")}}_handleWindow(t){let{url:r,target:n,features:i}=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};const o=new URL(r||`${this.torusUrl}/redirect?windowId=${t}`);this.dappStorageKey&&(o.hash?o.hash+=`&dappStorageKey=${this.dappStorageKey}`:o.hash=`#dappStorageKey=${this.dappStorageKey}`);const s=new Fa({url:o,target:n,features:i});if(s.open(),!s.window){this._createPopupBlockAlert(t,o.href);return}this.windowRefs[t]=s,this.request({method:"opened_window",params:{windowId:t}}),s.once("close",()=>{delete this.windowRefs[t],this.request({method:nt.CLOSED_WINDOW,params:{windowId:t}})})}_displayIframe(){let{isFull:t=!1,rid:r=""}=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};const n={};if(t)n.display="block",n.width="100%",n.height="100%",n.top="0px",n.right="0px",n.left="0px",n.bottom="0px";else switch(n.display=this._state.torusWidgetVisibility?"block":"none",n.height="70px",n.width="70px",this._state.buttonPosition){case lr.TOP_LEFT:n.top="0px",n.left="0px",n.right="auto",n.bottom="auto";break;case lr.TOP_RIGHT:n.top="0px",n.right="0px",n.left="auto",n.bottom="auto";break;case lr.BOTTOM_RIGHT:n.bottom="0px",n.right="0px",n.top="auto",n.left="auto";break;case lr.BOTTOM_LEFT:default:n.bottom="0px",n.left="0px",n.top="auto",n.right="auto";break}Object.assign(this.torusIframe.style,n),this._state.isIFrameFullScreen=t,this.request({method:nt.IFRAME_STATUS,params:{isIFrameFullScreen:t,rid:r}})}hideTorusButton(){this._state.torusWidgetVisibility=!1,this._displayIframe()}showTorusButton(){this._state.torusWidgetVisibility=!0,this._displayIframe()}_rpcRequest(t,r){const n=r,i=t;Array.isArray(i)||i.jsonrpc||(i.jsonrpc="2.0"),this.tryWindowHandle(i,n)}_handleConnect(t,r){this._state.isConnected||(this._state.isConnected=!0,this.emit("connect",{currentLoginProvider:t,isLoggedIn:r}),ae.debug(Ve.info.connected(t)))}_handleDisconnect(t,r){if(this._state.isConnected||!this._state.isPermanentlyDisconnected&&!t){this._state.isConnected=!1;let n;t?(n=new it.EthereumRpcError(1013,r||Ve.errors.disconnected()),ae.debug(n)):(n=new it.EthereumRpcError(1011,r||Ve.errors.permanentlyDisconnected()),ae.error(n),this._state.currentLoginProvider=null,this._state.isLoggedIn=!1,this._state.torusWidgetVisibility=!1,this._state.isIFrameFullScreen=!1,this._state.isPermanentlyDisconnected=!0),this.emit("disconnect",n)}}_handleCloseWindow(t){const{windowId:r}=t;this.windowRefs[r]&&(this.windowRefs[r].close(),delete this.windowRefs[r])}async _createPopupBlockAlert(t,r){const n=this.getLogoUrl(),i=Ut(`<div id="torusAlert" class="torus-alert--v2"><div id="torusAlert__logo"><img src="${n}" /></div><div><h1 id="torusAlert__title">${this.embedTranslations.actionRequired}</h1><p id="torusAlert__desc">${this.embedTranslations.pendingAction}</p></div></div>`),o=Ut(`<div><a id="torusAlert__btn">${this.embedTranslations.continue}</a></div>`),s=Ut('<div id="torusAlert__btn-container"></div>');s.appendChild(o),i.appendChild(s);const a=()=>{o.addEventListener("click",()=>{this._handleWindow(t,{url:r,target:"_blank",features:cr(Wa)}),i.remove(),this.torusAlertContainer.children.length===0&&(this.torusAlertContainer.style.display="none")})};(()=>{this.torusAlertContainer.appendChild(i)})(),a(),this.torusAlertContainer.style.display="block"}getLogoUrl(){return`${this.torusUrl}/images/torus_icon-blue.svg`}}G(yn,"_defaultState",{buttonPosition:"bottom-left",currentLoginProvider:null,isIFrameFullScreen:!1,hasEmittedConnection:!1,torusWidgetVisibility:!1,initialized:!1,isLoggedIn:!1,isPermanentlyDisconnected:!1,isConnected:!1});class _n extends Ua{constructor(t,r){let{maxEventListeners:n=100,jsonRpcStreamName:i="provider"}=r;super(t,{maxEventListeners:n,jsonRpcStreamName:i}),G(this,"chainId",void 0),G(this,"selectedAddress",void 0),G(this,"tryWindowHandle",void 0),this._state=De({},_n._defaultState),this.selectedAddress=null,this.chainId=null,this._handleAccountsChanged=this._handleAccountsChanged.bind(this),this._handleChainChanged=this._handleChainChanged.bind(this),this._handleUnlockStateChanged=this._handleUnlockStateChanged.bind(this),this.on("connect",()=>{this._state.isConnected=!0});const o=s=>{const{method:a,params:c}=s;a===ii.ACCOUNTS_CHANGED?this._handleAccountsChanged(c):a===ii.UNLOCK_STATE_CHANGED?this._handleUnlockStateChanged(c):a===ii.CHAIN_CHANGED&&this._handleChainChanged(c)};this.jsonRpcConnectionEvents.on("notification",o)}isConnected(){return this._state.isConnected}async _initializeState(){try{const{accounts:t,chainId:r,isUnlocked:n}=await this.request({method:nh.GET_PROVIDER_STATE,params:[]});this.emit("connect",{chainId:r}),this._handleChainChanged({chainId:r}),this._handleUnlockStateChanged({accounts:t,isUnlocked:n}),this._handleAccountsChanged(t)}catch(t){ae.error("Torus: Failed to get initial state. Please report this bug.",t)}finally{ae.info("initialized provider state"),this._state.initialized=!0,this.emit("_initialized")}}_rpcRequest(t,r){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1,i=r;const o=t;if(!Array.isArray(o)){if(o.jsonrpc||(o.jsonrpc="2.0"),o.method==="solana_accounts"||o.method==="solana_requestAccounts")i=(s,a)=>{this._handleAccountsChanged(a.result||[],o.method==="solana_accounts",n),r(s,a)};else if(o.method==="wallet_getProviderState"){this._rpcEngine.handle(t,i);return}}this.tryWindowHandle(o,i)}_handleConnect(t){this._state.isConnected||(this._state.isConnected=!0,this.emit("connect",{chainId:t}),ae.debug(Ve.info.connected(t)))}_handleDisconnect(t,r){if(this._state.isConnected||!this._state.isPermanentlyDisconnected&&!t){this._state.isConnected=!1;let n;t?(n=new it.EthereumRpcError(1013,r||Ve.errors.disconnected()),ae.debug(n)):(n=new it.EthereumRpcError(1011,r||Ve.errors.permanentlyDisconnected()),ae.error(n),this.chainId=null,this._state.accounts=null,this.selectedAddress=null,this._state.isUnlocked=!1,this._state.isPermanentlyDisconnected=!0),this.emit("disconnect",n)}}_handleAccountsChanged(t){let r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1,n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1,i=t;Array.isArray(i)||(ae.error("Torus: Received non-array accounts parameter. Please report this bug.",i),i=[]);for(const o of t)if(typeof o!="string"){ae.error("Torus: Received non-string account. Please report this bug.",t),i=[];break}ch(this._state.accounts,i)||(r&&Array.isArray(this._state.accounts)&&this._state.accounts.length>0&&!n&&ae.error('Torus: "solana_accounts" unexpectedly updated accounts. Please report this bug.',i),this._state.accounts=i,this.emit("accountsChanged",i)),this.selectedAddress!==i[0]&&(this.selectedAddress=i[0]||null)}_handleChainChanged(){let{chainId:t}=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};if(!t){ae.error("Torus: Received invalid network parameters. Please report this bug.",{chainId:t});return}t==="loading"?this._handleDisconnect(!0):(this._handleConnect(t),t!==this.chainId&&(this.chainId=t,this._state.initialized&&this.emit("chainChanged",this.chainId)))}_handleUnlockStateChanged(){let{accounts:t,isUnlocked:r}=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};if(typeof r!="boolean"){ae.error("Torus: Received invalid isUnlocked parameter. Please report this bug.",{isUnlocked:r});return}r!==this._state.isUnlocked&&(this._state.isUnlocked=r,this._handleAccountsChanged(t||[]))}}G(_n,"_defaultState",{accounts:null,isConnected:!1,isUnlocked:!1,initialized:!1,isPermanentlyDisconnected:!1,hasEmittedConnection:!1});function As(e){return new Promise((t,r)=>{try{const n=document.createElement("img");n.onload=()=>t(!0),n.onerror=()=>t(!1),n.src=e}catch(n){r(n)}})}const Ah=e=>{const{document:t}=e,r=t.querySelector('head > meta[property="og:site_name"]');if(r)return r.content;const n=t.querySelector('head > meta[name="title"]');return n?n.content:t.title&&t.title.length>0?t.title:e.location.hostname};async function Rh(e){try{const{document:t}=e;let r=t.querySelector('head > link[rel="shortcut icon"]');return r&&await As(r.href)||(r=Array.from(t.querySelectorAll('head > link[rel="icon"]')).find(n=>!!n.href),r&&await As(r.href))?r.href:""}catch{return""}}const Ih=async()=>({name:Ah(window),icon:await Rh(window)}),Th=["send_transaction","sign_transaction","sign_all_transactions","sign_message","connect"],Oh=[nt.SET_PROVIDER],Ch=Sh("localStorage");(async function(){try{if(typeof document>"u")return;const t=document.createElement("link"),{torusUrl:r}=await ka("production");t.href=`${r}/frame`,t.crossOrigin="anonymous",t.type="text/html",t.rel="prefetch",t.relList&&t.relList.supports&&t.relList.supports("prefetch")&&document.head.appendChild(t)}catch(t){ae.warn(t)}})();class qh{constructor(){let{modalZIndex:t=99999}=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};G(this,"isInitialized",void 0),G(this,"torusAlert",void 0),G(this,"modalZIndex",void 0),G(this,"alertZIndex",void 0),G(this,"requestedLoginProvider",void 0),G(this,"provider",void 0),G(this,"communicationProvider",void 0),G(this,"dappStorageKey",void 0),G(this,"isTopupHidden",!1),G(this,"torusAlertContainer",void 0),G(this,"torusUrl",void 0),G(this,"torusIframe",void 0),G(this,"styleLink",void 0),this.torusUrl="",this.isInitialized=!1,this.requestedLoginProvider=null,this.modalZIndex=t,this.alertZIndex=t+1e3,this.dappStorageKey=""}get isLoggedIn(){return this.communicationProvider?this.communicationProvider.isLoggedIn:!1}async init(){let{buildEnv:t=ph.PRODUCTION,enableLogging:r=!1,network:n,showTorusButton:i=!1,useLocalStorage:o=!1,buttonPosition:s=lr.BOTTOM_LEFT,apiKey:a="torus-default",extraParams:c={},whiteLabel:l}=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};if(this.isInitialized)throw new Error("Already initialized");const{torusUrl:g,logLevel:p}=await ka(t);ae.enableAll(),ae.info(g,"url loaded"),ae.info(`Solana Embed Version :${fh}`),this.torusUrl=g,ae.setDefaultLevel(p),r?ae.enableAll():ae.disableAll();const E=this.handleDappStorageKey(o),v=new URL(g);v.pathname.endsWith("/")?v.pathname+="frame":v.pathname+="/frame";const R=new URLSearchParams;return E&&R.append("dappStorageKey",E),R.append("origin",window.location.origin),v.hash=R.toString(),this.torusIframe=Ut(`<iframe
        id="torusIframe"
        class="torusIframe"
        src="${v.href}"
        style="display: none; position: fixed; top: 0; right: 0; width: 100%;
        height: 100%; border: none; border-radius: 0; z-index: ${this.modalZIndex.toString()}"
      ></iframe>`),this.torusAlertContainer=Ut(`<div id="torusAlertContainer" style="display:none; z-index: ${this.alertZIndex.toString()}"></div>`),this.styleLink=Ut(`<link href="${g}/css/widget.css" rel="stylesheet" type="text/css">`),new Promise((h,y)=>{try{this.torusIframe.addEventListener("load",async()=>{const b=await Ih();this.torusIframe.contentWindow.postMessage({buttonPosition:s,apiKey:a,network:n,dappMetadata:b,extraParams:c,whiteLabel:l},v.origin),await this._setupWeb3({torusUrl:g}),i&&this.showTorusButton(),l!=null&&l.topupHide?this.isTopupHidden=l.topupHide:this.hideTorusButton(),this.isInitialized=!0,window.torus=this,h()}),window.document.head.appendChild(this.styleLink),window.document.body.appendChild(this.torusIframe),window.document.body.appendChild(this.torusAlertContainer)}catch(b){y(b)}})}async login(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};if(!this.isInitialized)throw new Error("Call init() first");try{this.requestedLoginProvider=t.loginProvider||null,this.requestedLoginProvider||this.communicationProvider._displayIframe({isFull:!0});const r=await new Promise((n,i)=>{this.provider._rpcRequest({method:"solana_requestAccounts",params:[this.requestedLoginProvider,t.login_hint]},wi(n,i))});if(Array.isArray(r)&&r.length>0)return r;throw new Error("Login failed")}catch(r){throw ae.error("login failed",r),r}finally{this.communicationProvider.isIFrameFullScreen&&this.communicationProvider._displayIframe()}}async loginWithPrivateKey(t){if(!this.isInitialized)throw new Error("Call init() first");const{privateKey:r,userInfo:n}=t,{success:i}=await this.communicationProvider.request({method:"login_with_private_key",params:{privateKey:r,userInfo:n}});if(!i)throw new Error("Login Failed")}async logout(){if(!this.communicationProvider.isLoggedIn)throw new Error("Not logged in");await this.communicationProvider.request({method:nt.LOGOUT,params:[]}),this.requestedLoginProvider=null}async cleanUp(){this.communicationProvider.isLoggedIn&&await this.logout(),this.clearInit()}clearInit(){function t(r){return r instanceof Element||r instanceof Document}t(this.styleLink)&&window.document.body.contains(this.styleLink)&&(this.styleLink.remove(),this.styleLink=void 0),t(this.torusIframe)&&window.document.body.contains(this.torusIframe)&&(this.torusIframe.remove(),this.torusIframe=void 0),t(this.torusAlertContainer)&&window.document.body.contains(this.torusAlertContainer)&&(this.torusAlert=void 0,this.torusAlertContainer.remove(),this.torusAlertContainer=void 0),this.isInitialized=!1}hideTorusButton(){this.communicationProvider.hideTorusButton()}showTorusButton(){this.communicationProvider.showTorusButton()}async setProvider(t){await this.communicationProvider.request({method:nt.SET_PROVIDER,params:De({},t)})}async showWallet(t){let r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};const n=await this.communicationProvider.request({method:nt.WALLET_INSTANCE_ID,params:[]}),i=t?`/${t}`:"",o=new URL(`${this.torusUrl}/wallet${i}`);o.searchParams.append("instanceId",n),Object.keys(r).forEach(a=>{o.searchParams.append(a,r[a])}),this.dappStorageKey&&(o.hash=`#dappStorageKey=${this.dappStorageKey}`),new Fa({url:o,features:cr(vh)}).open()}async getUserInfo(){return await this.communicationProvider.request({method:nt.USER_INFO,params:[]})}async initiateTopup(t,r){if(!this.isInitialized)throw new Error("Torus is not initialized");const n=Fr();return this.communicationProvider._handleWindow(n),await this.communicationProvider.request({method:nt.TOPUP,params:{provider:t,params:r,windowId:n}})}async getAccounts(){return await this.provider.request({method:"getAccounts",params:[]})}async sendTransaction(t){const r=qr(t),n=r?t.serialize({requireAllSignatures:!1}).toString("hex"):He.from(t.serialize()).toString("hex");return await this.provider.request({method:"send_transaction",params:{message:n,isLegacyTransaction:r}})}async signAndSendTransaction(t,r){const n=qr(t),i=n?t.serialize({requireAllSignatures:!1}).toString("hex"):He.from(t.serialize()).toString("hex");return{signature:await this.provider.request({method:"send_transaction",params:{message:i,options:r,isLegacyTransaction:n}})}}async signTransaction(t){const r=qr(t),n=r?t.serializeMessage().toString("hex"):He.from(t.message.serialize()).toString("hex"),i=await this.provider.request({method:"sign_transaction",params:{message:n,messageOnly:!0,isLegacyTransaction:r}}),o=JSON.parse(i),s={publicKey:new oo(o.publicKey),signature:He.from(o.signature,"hex")};return t.addSignature(s.publicKey,s.signature),t}async signAllTransactions(t){let r;const n=t.map(s=>(r=qr(s),r?s.serializeMessage().toString("hex"):He.from(s.message.serialize()).toString("hex"))),o=(await this.provider.request({method:"sign_all_transactions",params:{message:n,messageOnly:!0,isLegacyTransaction:r}})).map(s=>{const a=JSON.parse(s);return{publicKey:new oo(a.publicKey),signature:He.from(a.signature,"hex")}});return t.forEach((s,a)=>(s.addSignature(o[a].publicKey,o[a].signature),s)),t}async signMessage(t){return await this.provider.request({method:"sign_message",params:{data:t}})}async getGaslessPublicKey(){return await this.provider.request({method:"get_gasless_public_key",params:[]})}handleDappStorageKey(t){const r=`${Ki.localStorageKeyPrefix}${window.location.hostname}`;let n="";if(Ch&&t){const i=window.localStorage.getItem(r);if(i)n=i;else{const o=`torus-app-${Fr()}`;window.localStorage.setItem(r,o),n=o}}return this.dappStorageKey=n,n}async _setupWeb3(t){ae.info("setupWeb3 running");const r=new rs({name:"embed_torus",target:"iframe_torus",targetWindow:this.torusIframe.contentWindow}),n=new rs({name:"embed_communication",target:"iframe_communication",targetWindow:this.torusIframe.contentWindow}),i=new _n(r,{}),o=new yn(n,{});i.tryWindowHandle=(l,g)=>{const p=l;if(!Array.isArray(p)&&Th.includes(p.method)){if(!this.communicationProvider.isLoggedIn)throw new Error("User Not Logged In");const E=Fr();o._handleWindow(E,{target:"_blank",features:cr(Wa)}),p.windowId=E}i._rpcEngine.handle(p,g)},o.tryWindowHandle=(l,g)=>{const p=l;if(!Array.isArray(p)&&Oh.includes(p.method)){const E=Fr();o._handleWindow(E,{target:"_blank",features:cr(mh)}),p.params.windowId=E}o._rpcEngine.handle(p,g)};const s=l=>{const g=i[l],p=this;i[l]=function(v,R){const{method:h,params:y=[]}=v;if(h==="solana_requestAccounts"){if(!R)return p.login({loginProvider:y[0]});p.login({loginProvider:y[0]}).then(b=>R(null,b)).catch(b=>R(b))}return g.apply(this,[v,R])}};s("request"),s("sendAsync"),s("send");const a=new Proxy(i,{deleteProperty:()=>!0}),c=new Proxy(o,{deleteProperty:()=>!0});this.provider=a,this.communicationProvider=c,await Promise.all([i._initializeState(),o._initializeState(De(De({},t),{},{dappStorageKey:this.dappStorageKey,torusAlertContainer:this.torusAlertContainer,torusIframe:this.torusIframe}))]),ae.debug("Torus - injected provider")}}export{lr as BUTTON_POSITION,ph as TORUS_BUILD_ENV,_n as TorusInPageProvider,qh as default};
