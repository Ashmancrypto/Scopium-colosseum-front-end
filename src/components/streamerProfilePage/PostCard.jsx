import { formatTimeAgo } from "../../utils/formatters.js";
import { useTheme } from "../../contexts/ThemeContext.jsx";

const PostCard = ({ post }) => {
  const { isDark } = useTheme();
  return (
    <div
      className={`rounded-[12px] px-[20px] py-[26px] border ${isDark ? "bg-[rgba(46,46,46,1)] border-[rgba(1,219,117,0.3)]" : "bg-[rgba(247,247,247,1)] border-[rgba(10,10,10,0.2)]"}`}
      style={{ boxShadow: "0px 0px 5px 0px rgba(10, 10, 10, 0.15)" }}
    >
      <div className="flex items-center gap-2 mb-[20px]">
        <div className="w-[40px] h-[40px] rounded-full overflow-hidden">
          <img
            src={post.avatar}
            alt={post.username}
            className="w-full h-full object-cover"
          />
        </div>
        <div className="leading-none space-y-2">
          <h4 className="text-[16px] font-semibold">{post.username}</h4>
          <p className={`text-[14px] ${isDark ? "text-white/60" : "text-[rgba(10,10,10,0.6)]"}`}>
            {formatTimeAgo(new Date(post.createdAt))}
          </p>
        </div>
      </div>

      <p className="text-[14px] mb-5">{post.description}</p>
      <div className="overflow-hidden rounded-[12px] mb-5">
        <img
          src={post.image}
          alt={post.username}
          className="w-full h-full object-cover"
        />
      </div>

      <div className="flex items-center gap-[40px]">
        <div className="flex items-center gap-2">
          <svg
            width="20"
            height="22"
            viewBox="0 0 20 22"
            fill="none"
            xmlns="http://www.w3.org/2000/svg"
          >
            <path
              d="M0.984375 8.98372L1.73137 8.91972C1.71416 8.72763 1.62361 8.54956 1.47854 8.42249C1.33346 8.29542 1.14501 8.22912 0.952334 8.23736C0.759654 8.24559 0.577552 8.32774 0.443853 8.46673C0.310154 8.60572 0.235134 8.79087 0.234375 8.98372H0.984375ZM18.2204 10.8067L17.5144 14.8867L18.9934 15.1427L19.6984 11.0627L18.2204 10.8067ZM11.2294 19.9997H6.58037V21.4997H11.2294V19.9997ZM5.66937 19.1627L4.85738 9.76972L3.36237 9.89872L4.17537 19.2917L5.66937 19.1627ZM17.5144 14.8867C17.0074 17.8167 14.3654 19.9997 11.2294 19.9997V21.4997C15.0554 21.4997 18.3554 18.8307 18.9934 15.1427L17.5144 14.8867ZM11.2394 3.84972L10.5764 7.89472L12.0564 8.13672L12.7194 4.09272L11.2394 3.84972ZM5.17238 8.99572L6.61137 7.75572L5.63137 6.61972L4.19438 7.85972L5.17238 8.99572ZM9.22838 3.72172L9.70438 1.88772L8.25237 1.51172L7.77637 3.34472L9.22838 3.72172ZM10.4224 1.52772L10.5674 1.57472L11.0264 0.146721L10.8814 0.099721L10.4224 1.52772ZM8.50737 5.56572C8.81956 4.98163 9.06158 4.36266 9.22838 3.72172L7.77637 3.34472C7.63858 3.87101 7.43991 4.37944 7.18437 4.85972L8.50737 5.56572ZM10.5674 1.57472C10.7098 1.61838 10.8391 1.69711 10.9432 1.80368C11.0473 1.91026 11.123 2.04128 11.1634 2.18472L12.6154 1.80872C12.5125 1.42002 12.3128 1.06373 12.0349 0.773095C11.757 0.482462 11.4101 0.266967 11.0264 0.146721L10.5674 1.57472ZM9.70438 1.88772C9.72461 1.81584 9.7601 1.74915 9.80841 1.69221C9.85673 1.63526 9.91674 1.58939 9.98438 1.55772L9.33337 0.206721C8.80138 0.462721 8.40137 0.936721 8.25237 1.51172L9.70438 1.88772ZM9.98438 1.55772C10.1213 1.49275 10.2778 1.48203 10.4224 1.52772L10.8814 0.099721C10.3706 -0.063548 9.81679 -0.0252654 9.33337 0.206721L9.98438 1.55772ZM12.1384 9.73372H17.3184V8.23372H12.1384V9.73372ZM2.70337 20.1557L1.73137 8.91972L0.237375 9.04872L1.20738 20.2847L2.70337 20.1557ZM1.73438 20.2627V8.98372H0.234375V20.2627H1.73438ZM1.20738 20.2847C1.20432 20.2484 1.20986 20.2118 1.22171 20.1773C1.23355 20.1428 1.25244 20.1112 1.27717 20.0844C1.30191 20.0576 1.33194 20.0362 1.36538 20.0216C1.39881 20.0071 1.43491 19.9996 1.47137 19.9997V21.4997C2.19738 21.4997 2.76537 20.8777 2.70337 20.1557L1.20738 20.2847ZM12.7194 4.09272C12.8451 3.33251 12.8096 2.55436 12.6154 1.80872L11.1634 2.18572C11.3052 2.72891 11.3311 3.29587 11.2394 3.84972L12.7194 4.09272ZM6.58037 19.9997C6.35139 19.9993 6.13085 19.9132 5.96223 19.7582C5.7936 19.6033 5.68912 19.3909 5.66937 19.1627L4.17537 19.2917C4.22741 19.8939 4.50326 20.4547 4.94848 20.8634C5.39371 21.2722 5.97597 21.4992 6.58037 21.4997V19.9997ZM6.61137 7.75572C7.29137 7.16972 8.02338 6.47272 8.50838 5.56572L7.18437 4.85972C6.83837 5.50872 6.28737 6.05572 5.63137 6.61972L6.61137 7.75572ZM19.6984 11.0627C19.7586 10.7157 19.7422 10.3597 19.6503 10.0197C19.5585 9.6797 19.3934 9.36388 19.1667 9.09437C18.94 8.82487 18.6571 8.60819 18.3378 8.45952C18.0185 8.31085 17.6706 8.23378 17.3184 8.23372V9.73372C17.8854 9.73372 18.3184 10.2457 18.2204 10.8067L19.6984 11.0627ZM1.47137 19.9997C1.61738 19.9997 1.73438 20.1177 1.73438 20.2627H0.234375C0.234375 20.9447 0.787375 21.4997 1.47137 21.4997V19.9997ZM10.5764 7.89472C10.5391 8.1213 10.5516 8.35328 10.6129 8.57456C10.6742 8.79584 10.783 9.00113 10.9316 9.17619C11.0802 9.35124 11.2651 9.49187 11.4735 9.58832C11.6819 9.68476 11.9087 9.73372 12.1384 9.73372V8.23372C12.1262 8.23378 12.1141 8.23214 12.103 8.227C12.092 8.22186 12.0822 8.21434 12.0744 8.20498C12.0665 8.19563 12.0609 8.18466 12.0577 8.17286C12.0546 8.16106 12.0542 8.14872 12.0564 8.13672L10.5764 7.89472ZM4.85738 9.76972C4.84518 9.62492 4.86645 9.47929 4.92138 9.34475C4.97631 9.21022 5.06232 9.09061 5.17238 8.99572L4.19238 7.85872C3.90252 8.10886 3.67615 8.4242 3.53186 8.77883C3.38757 9.13346 3.32949 9.51727 3.36237 9.89872L4.85738 9.76972Z"
              fill={isDark ? "rgba(1,219,117,1)":"#FA4EAB"}
            />
          </svg>
          <p className="text-[14px]">
            {post.likes > 0 && post.likes}
            </p>
        </div>
        <div className="flex items-center gap-2">
          <svg
            width="23"
            height="22"
            viewBox="0 0 23 22"
            fill="none"
            xmlns="http://www.w3.org/2000/svg"
          >
            <path
              d="M11.9844 20.75C13.9622 20.75 15.8956 20.1635 17.5401 19.0647C19.1846 17.9659 20.4663 16.4041 21.2232 14.5768C21.98 12.7496 22.1781 10.7389 21.7922 8.7991C21.4064 6.85929 20.454 5.07746 19.0554 3.67894C17.6569 2.28041 15.8751 1.328 13.9353 0.942152C11.9955 0.5563 9.9848 0.754333 8.15754 1.51121C6.33028 2.26809 4.76849 3.54981 3.66968 5.1943C2.57086 6.83879 1.98438 8.77219 1.98438 10.75C1.98438 12.4033 2.38437 13.9611 3.09549 15.3356L1.98438 20.75L7.39882 19.6389C8.77215 20.3489 10.3322 20.75 11.9844 20.75Z"
              stroke={isDark ? "rgba(1,219,117,1)":"#FA4EAB"}
              strokeWidth="2"
              strokeLinecap="round"
              strokeLinejoin="round"
            />
          </svg>
          <p className="text-[14px]">
            {post.comments > 0 && post.comments}
            </p>
        </div>
        <div className="flex items-center gap-2">
          <svg
            width="25"
            height="21"
            viewBox="0 0 25 21"
            fill="none"
            xmlns="http://www.w3.org/2000/svg"
          >
            <path
              d="M24.4784 9.69413L15.7284 0.944126C15.6061 0.821682 15.4502 0.738258 15.2805 0.704404C15.1107 0.67055 14.9348 0.687787 14.7749 0.753935C14.6149 0.820083 14.4782 0.932171 14.382 1.07602C14.2858 1.21987 14.2344 1.38903 14.2343 1.5621V5.97538C11.3971 6.21819 8.26353 7.60725 5.68556 9.79366C2.5815 12.4274 0.64884 15.8213 0.243059 19.3498C0.211348 19.6241 0.26697 19.9014 0.402007 20.1423C0.537044 20.3832 0.744616 20.5753 0.995183 20.6914C1.24575 20.8075 1.52655 20.8416 1.79761 20.7888C2.06867 20.736 2.31619 20.5991 2.50493 20.3976C3.70806 19.1168 7.98899 15.0666 14.2343 14.7101V19.0621C14.2344 19.2352 14.2858 19.4043 14.382 19.5482C14.4782 19.692 14.6149 19.8041 14.7749 19.8703C14.9348 19.9364 15.1107 19.9536 15.2805 19.9198C15.4502 19.8859 15.6061 19.8025 15.7284 19.6801L24.4784 10.9301C24.642 10.766 24.7339 10.5438 24.7339 10.3121C24.7339 10.0804 24.642 9.85816 24.4784 9.69413ZM15.9843 16.9501V13.8121C15.9843 13.58 15.8921 13.3575 15.728 13.1934C15.5639 13.0293 15.3414 12.9371 15.1093 12.9371C12.0381 12.9371 9.04665 13.7388 6.21821 15.3215C4.7777 16.1311 3.43552 17.1044 2.21837 18.2221C2.85275 15.6146 4.45181 13.1351 6.81759 11.128C9.35728 8.97444 12.457 7.6871 15.1093 7.6871C15.3414 7.6871 15.5639 7.59491 15.728 7.43081C15.8921 7.26672 15.9843 7.04416 15.9843 6.8121V3.67522L22.6223 10.3121L15.9843 16.9501Z"
              fill={isDark ? "rgba(1,219,117,1)":"#FA4EAB"}
            />
          </svg>
          <p className="text-[14px]">
            {post.shares > 0 && post.shares}
            </p>
        </div>
      </div>
    </div>
  );
};

export default PostCard;
